<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>FinancialBigData</title>
      <link href="/2023/12/08/FinancialBigData/"/>
      <url>/2023/12/08/FinancialBigData/</url>
      
        <content type="html"><![CDATA[<h1 id="å­¦ä¹ ç¬”è®°"><a href="#å­¦ä¹ ç¬”è®°" class="headerlink" title="å­¦ä¹ ç¬”è®°"></a>å­¦ä¹ ç¬”è®°</h1><h3 id="å¤§æ•°æ®-2001-å­™å•¸å†¬"><a href="#å¤§æ•°æ®-2001-å­™å•¸å†¬" class="headerlink" title="å¤§æ•°æ® 2001 å­™å•¸å†¬"></a>å¤§æ•°æ® 2001 å­™å•¸å†¬</h3><ul><li>1.çˆ¬å–æ•°æ®<ul><li>(1) çˆ¬å–æ—¶ä»¥è‚¡ç¥¨ä»£ç ä½œä¸º URL ä¸­çš„å‚æ•°ä¼ å…¥ï¼Œä½†é‡åˆ°æ²¡æœ‰å½“å‰è‚¡ç¥¨ä»£ç æ—¶ DOM æ ‘çš„ç»“æ„å’Œæ­£å¸¸çš„ä¸ä¸€æ ·ï¼Œå¯¼è‡´è¿è¡ŒæŠ¥é”™<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">è§£å†³æ–¹æ³•ï¼šåœ¨çˆ¬å–å‰å…ˆç”¨requeståº“ä¸­çš„getæ–¹æ³•è·å–URLçš„çŠ¶æ€ç ï¼ŒçŠ¶æ€ç ä¸º<span class="number">200</span>æ—¶å†ç»§ç»­</span><br></pre></td></tr></table></figure></li><li>(2) çˆ¬å–çš„é¡µé¢ä¸­çš„æ•°æ®æ˜¯é€šè¿‡ js æ¸²æŸ“çš„ï¼Œä¸€å¼€å§‹çˆ¬å–çš„å‘ç°è¡¨æ ¼åªæœ‰è¡¨å¤´æ²¡æœ‰å†…å®¹<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">è§£å†³æ–¹æ³•ï¼šç”¨HTML_Sessionåº“</span><br><span class="line">//åˆ›å»ºHTMLSessionå¯¹è±¡</span><br><span class="line">session = HTMLSession()</span><br><span class="line">//sessionè®¾ç½®URL</span><br><span class="line">first_page = session.get(url)</span><br><span class="line">//æ¸²æŸ“<span class="number">0.5</span>s</span><br><span class="line">first_page.html.render(sleep=<span class="number">0.5</span>)</span><br></pre></td></tr></table></figure></li><li>(3) åœ¨çˆ¬å–ä¸œæ–¹è´¢å¯Œç½‘ä¸­çš„æ•°æ®æ—¶ï¼Œæ¯çˆ¬å‡ ä¸ªå°±ä¼šå‡ºç°è¿æ¥è¢«æ–­å¼€çš„æƒ…å†µï¼Œå¯»æ‰¾è§£å†³æ–¹æ³•æ—¶æƒ³åˆ°äº†ç”¨ PowerAutomate æ¥è‡ªåŠ¨åŒ–è¿è¡Œï¼Œæµç¨‹å¦‚ä¸‹å›¾æ‰€ç¤ºï¼šå½“ vscode è¿è¡Œçª—å£å‡ºç°æŠ¥é”™æ—¶å°† Ctrl+Shift+F5 å‘é€åˆ° vscode çª—å£é‡æ–°è¿è¡Œ<br><img src="/image/FinancialBigData/1680161235760.png" alt="1680161235760"></li><li>(4) é€šè¿‡<code>tushare</code>çš„ api è·å–æ•°æ®ï¼Œå°†è‚¡ç¥¨ä»£ç ä¾æ¬¡ä¼ å…¥ apiï¼Œåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ç¢°åˆ°äº†ä¸€ä¸ªé—®é¢˜æ˜¯åˆ¤æ–­æœ‰æ²¡æœ‰è¿”å›çš„æ•°æ®ï¼Œä½¿ç”¨<code>result==None</code>çš„è¯ï¼Œè¿”å›æ­£å¸¸çš„<code>DataFrame</code>çš„æ—¶å€™æŠ¥é”™è¯´ä¸æ”¯æŒè¿™æ ·çš„æ“ä½œï¼Œå»ºè®®ç”¨<code>empty</code>æ–¹æ³•åˆ¤æ–­æ˜¯å¦ä¸ºç©ºï¼Œä½†æ˜¯æ²¡æœ‰æ‰¾åˆ°çš„ç”»è¿”å›çš„åˆæ˜¯<code>None</code>ï¼Œæœ€åç”¨<code>isinstance</code>æ–¹æ³•è§£å†³ï¼Œè¿”å›å¯¹è±¡æ˜¯å¦æ˜¯æŸç±»ç¤ºä¾‹çš„ boolean å€¼<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">isinstance</span>(tmp, pd.DataFrame)</span><br></pre></td></tr></table></figure></li></ul></li><li>2.å¤„ç† JSON æ•°æ®<br>JSON ä¸­çš„åˆ—è¡¨å¯ä»¥ç”¨åˆ—è¡¨è¡¨ç¤ºï¼Œå¯¹è±¡åˆ™å¯ä»¥ç”¨å­—å…¸æ¥è¡¨ç¤ºï¼Œæœ¬æ¬¡ä½¿ç”¨ä¸­æœ€åç›´æ¥æŠŠå­—å…¸ä¼ å…¥<code>json.dump</code>å‡½æ•°ä¸­å³å¯<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;result.json&#x27;</span>, <span class="string">&#x27;w&#x27;</span>,encoding=<span class="string">&#x27;utf-8&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">result = &#123;date: date <span class="keyword">for</span> date <span class="keyword">in</span> dates[<span class="number">1</span>:-<span class="number">1</span>]&#125;</span><br><span class="line"><span class="keyword">for</span> date <span class="keyword">in</span> dates[<span class="number">1</span>:-<span class="number">1</span>]:</span><br><span class="line">    b = a.get_group(date)</span><br><span class="line">    s = []</span><br><span class="line">    h = []</span><br><span class="line">    <span class="keyword">for</span> index, i <span class="keyword">in</span> b[b.<span class="built_in">type</span> == <span class="string">&#x27;æ·±å¸‚&#x27;</span>].iterrows():</span><br><span class="line">        s.append([i[<span class="string">&quot;æˆäº¤é‡&quot;</span>], i[<span class="string">&quot;å‡€æµå‡º&quot;</span>], i[<span class="string">&#x27;code&#x27;</span>],  i[<span class="string">&#x27;name&#x27;</span>], <span class="string">&#x27;æ·±å¸‚&#x27;</span>])</span><br><span class="line">    <span class="keyword">for</span> index, i <span class="keyword">in</span> b[b.<span class="built_in">type</span> == <span class="string">&#x27;æ²ªå¸‚&#x27;</span>].iterrows():</span><br><span class="line">        h.append([i[<span class="string">&quot;æˆäº¤é‡&quot;</span>], i[<span class="string">&quot;å‡€æµå‡º&quot;</span>], i[<span class="string">&#x27;code&#x27;</span>],  i[<span class="string">&#x27;name&#x27;</span>], <span class="string">&#x27;æ²ªå¸‚&#x27;</span>])<span class="number">1</span></span><br><span class="line">    result[date] = &#123;<span class="string">&quot;S&quot;</span>: s, <span class="string">&quot;H&quot;</span>: h&#125;</span><br><span class="line">json.dump(result, f, ensure_ascii=<span class="literal">False</span>)</span><br></pre></td></tr></table></figure></li><li>3.vue ä¸­çš„é—®é¢˜<ul><li>(1) åŠ¨æ€å›¾å®šæ—¶å™¨<br>vue ä¸­ä¸»è¦é—®é¢˜åœ¨æœ€ååŠ¨æ€çš„æ•£ç‚¹å›¾ä¸­ï¼Œæˆ‘æ˜¯æƒ³å®ç°ä¸€ä¸ªç‚¹å‡»æš‚å®šï¼Œç‚¹å‡»æ’­æ”¾ç»§ç»­æ’­æ”¾çš„æ•ˆæœï¼Œç†æƒ³çš„å®ç°æ–¹å¼æ˜¯å¼€å§‹æ’­æ”¾æ—¶åˆ›å»ºå®šæ—¶å™¨ï¼Œç‚¹å‡»åœæ­¢æ—¶é”€æ¯å®šæ—¶å™¨ï¼Œæ ¹æ®æ–‡æ¡£ï¼Œåœ¨<code>setOption</code>æ–¹æ³•å°†å›¾æŒ‚è½½åˆ° DOM åå°±è®¾ç½®å®šæ—¶å™¨ï¼Œè¿™æ ·çš„è¯ç¬¬ä¸€æ¬¡æœ‰æ•ˆï¼Œé—®é¢˜æ˜¯æ¯æ¬¡æ’­æ”¾åéƒ½ä¼šå†åˆ›å»ºä¸€ä¸ªå®šæ—¶å™¨ï¼Œå®šæ—¶å™¨ä¸­æ˜¯å¦æ›´æ”¹æ•°æ®æ˜¯æ ¹æ®ç»‘å®šçš„<code>playing</code>å†³å®šçš„ï¼Œå¦‚æœ<code>playing==true</code>æ‰æ›´æ”¹æ•°æ®ï¼Œä»è€Œä½¿å›¾è¡¨ä¼šæœ‰æ ¹æ®æ—¶é—´åŠ¨æ€æ’­æ”¾çš„æ•ˆæœã€‚äºæ˜¯å’Œå¾€å¸¸ä¸€æ ·åœ¨ç»„ä»¶ä¸­å®šä¹‰ä¸€ä¸ªå˜é‡<code>interval</code>ï¼Œåœ¨æŒ‚åœ¨åè°ƒç”¨åˆå§‹åŒ–æ–¹æ³•ï¼Œåœ¨åˆå§‹åŒ–æ—¶åˆ›å»ºå®šæ—¶å™¨å¹¶å°†å€¼èµ‹ç»™<code>interval</code>ï¼Œåé¢æ ¹æ®<code>playing</code>å±æ€§çš„æ”¹å˜åˆ›å»ºå’Œé”€æ¯å®šæ—¶å™¨ï¼Œä½†åœ¨å®é™…ä¸­å‘ç°ä¼šæœ‰å¤šä¸ªå®šæ—¶å™¨åŒæ—¶åœ¨å·¥ä½œï¼Œå¤šæ¬¡ç‚¹å‡»æ—¥å†åï¼Œä¼šå‡ºç°å¤šä¸ªå®šæ—¶å™¨ä»¥ç›¸éš”å¾ˆçŸ­çš„æ—¶é—´åˆ°è¾¾è®¾å®šæ—¶é—´ï¼Œæ•£ç‚¹å›¾ä¼šå‡ºç°æŠ½é£çš„æƒ…å†µï¼Œç›®å‰è¿˜æœªèƒ½è§£å†³ã€‚</li><li>(2) å›¾è¡¨å±•ç¤ºè¿‡åå†å›åˆ°å‰é¢çš„å›¾è¡¨ï¼Œæ§åˆ¶å°ä¼šæœ‰è­¦å‘Šè¯´å½“å‰ç”»å›¾çš„å…ƒç´ å·²ç»åœ¨ DOM æ ‘ä¸Šäº†ï¼Œå¯æ˜¯æˆ‘çœ‹äº†ä¸‹ä¹Ÿæ²¡æœ‰åœ¨ï¼Œåªå­˜åœ¨å½“å‰å›¾æ ‡å…ƒç´ ï¼Œå¯èƒ½å’Œ UI æ¡†æ¶åˆ‡æ¢æ ‡ç­¾çš„é€»è¾‘æœ‰å…³ï¼Œç›®å‰ä¹Ÿè¿˜æ²¡æœ‰è§£å†³ã€‚</li></ul></li><li>4.éæŠ€æœ¯é—®é¢˜<ul><li>(1)å®¡é¢˜ä¸æ¸…ï¼šä¸€å¼€å§‹æ²¡æœ‰çœ‹ä»”ç»†å¯¼è‡´åé¢å‘ç°è¿˜æœ‰ç¼ºçš„æ•°æ®</li><li>(2)æ²Ÿé€šé—®é¢˜ï¼šçˆ¬æ•°æ®å’Œå¤„ç†æ•°æ®æ²¡æœ‰æ²Ÿé€šå¥½ï¼Œå¯¼è‡´åé¢å­—æ®µä¸èƒ½å¾ˆå¥½ç†è§£</li><li>(3)è§„åˆ’é—®é¢˜ï¼šåˆ†é…å¥½å·¥ä½œåå¤§å®¶éƒ½æ˜¯æŒ‰ç…§è‡ªå·±çš„é‚£éƒ¨åˆ†åˆ‡å…¥ï¼Œå¾€å¾€æ˜¯é‡åˆ°é—®é¢˜äº†å†å»è§£å†³ï¼Œå¾ˆå¤šæ—¶å€™å°±åªèƒ½æ”¾å¼ƒä¸€äº›æ•ˆæœæˆ–è€…åšäº†æ— ç”¨åŠŸï¼Œåº”è¯¥ä¸€å¼€å§‹å°±æœ‰å¤§è‡´çš„è§„åˆ’ï¼Œéœ€è¦å“ªäº›æ•°æ®ï¼Œç”»ä»€ä¹ˆå›¾ï¼Œè¦æ€æ ·çš„æ•ˆæœï¼Œå¤§å®¶å•†é‡ä¸€äº›ï¼Œæœ‰ä¸ªè¾ƒä¸ºç»†è‡´çš„å·¥ä½œå†…å®¹åå†å¼€å§‹å·¥ä½œã€‚</li></ul></li></ul>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>python</title>
      <link href="/2023/12/08/python/"/>
      <url>/2023/12/08/python/</url>
      
        <content type="html"><![CDATA[<h1 id="å­¦ä¹ ç¬”è®°"><a href="#å­¦ä¹ ç¬”è®°" class="headerlink" title="å­¦ä¹ ç¬”è®°"></a>å­¦ä¹ ç¬”è®°</h1><h3 id="å¤§æ•°æ®-2001-å­™å•¸å†¬"><a href="#å¤§æ•°æ®-2001-å­™å•¸å†¬" class="headerlink" title="å¤§æ•°æ® 2001 å­™å•¸å†¬"></a>å¤§æ•°æ® 2001 å­™å•¸å†¬</h3><ul><li>1.DataFrame ç±»è¯»å–ä¸€åˆ—çš„æ–¹å¼ä¸º<code>dataFrame[â€˜åˆ—åâ€™]</code></li><li>2.DataFrame ç±»ä¸­ä¸€åˆ—ä¸º Series ç±»</li><li>3.å°†å­—ç¬¦ä¸²è½¬ä¸ºæ—¶é—´å¯¹è±¡ä¸ºï¼š</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">time.strptime(å­—ç¬¦ä¸²,<span class="string">&quot;%a, %d %b %Y %H:%M:%S GMT&quot;</span>)</span><br></pre></td></tr></table></figure><ul><li>4.æ—¶é—´å¯¹è±¡è½¬æ¢ä¸ºæ—¶é—´æˆ³ï¼š</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">time.mktime(struct_time)</span><br></pre></td></tr></table></figure><ul><li>5.éå† DataFrame æ—¶å¯ä»¥ç”¨</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> index, row <span class="keyword">in</span> dataFrame.iterrows():</span><br></pre></td></tr></table></figure><ul><li>6.è§£æ JSON æ–¹å¼ä¸º<code>json.loads(Str)</code></li><li>7.å°† Series ä¸­æ¯é¡¹éƒ½è¿›è¡Œå¤„ç†å¯ä»¥ç”¨ mapï¼Œä¾‹å¦‚æŠŠæ•°æ®ä¸­ä½œè€…é‚£åˆ—çš„å­—ç¬¦ä¸²ç”¨ç©ºæ ¼åˆ†éš”å¹¶è½¬åŒ–ä¸ºåˆ—è¡¨ï¼š</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dataRaw[<span class="string">&#x27;authors&#x27;</span>].<span class="built_in">map</span>(<span class="keyword">lambda</span> x: np.array(x.split(<span class="string">&#x27;,&#x27;</span>)))</span><br></pre></td></tr></table></figure><ul><li>8.é€‰å– DataFrame ä¸­çš„å¤šåˆ—</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dataRaw[[<span class="string">&#x27;id&#x27;</span>, <span class="string">&#x27;title&#x27;</span><span class="string">&#x27;versionsCount&#x27;</span>, <span class="string">&#x27;diff&#x27;</span>,<span class="string">&#x27;categories&#x27;</span>, <span class="string">&#x27;update_date&#x27;</span>]]</span><br></pre></td></tr></table></figure><ul><li>9.é€‰å– DataFrame ä¸­ç¬¦åˆä¸€å®šæ¡ä»¶çš„è¡Œï¼Œä¾‹å¦‚é€‰å– id åˆ—ä¸­ä¸“ä¸šç¬¦åˆæ­£åˆ™è¡¨è¾¾å¼çš„è¡Œ</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dataRaw[<span class="string">&#x27;id&#x27;</span>][dataRaw.categories.<span class="built_in">str</span>.contains(<span class="string">&#x27;math.[A-Z]+&#x27;</span>)]</span><br></pre></td></tr></table></figure><ul><li>10.ç”»å›¾æ—¶æ˜¾ç¤ºè°ƒç”¨<code>plt.show()</code>å³å¯ä¸æ˜¾ç¤ºç›¸å…³æ–‡å­—</li><li>11.ç”»å›¾æ—¶è®¾ç½® x è½´æ ‡ç­¾çš„å¤§å°å’Œæ—‹è½¬è§’åº¦å¯ä»¥ç”¨ä»¥ä¸‹æ–¹å¼</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">plt.xticks(<span class="built_in">range</span>(<span class="number">32</span>), labels=tmp[<span class="string">&#x27;type&#x27;</span>], rotation=<span class="number">43</span>, fontsize=<span class="number">8</span>)</span><br></pre></td></tr></table></figure><ul><li>12.å¯¹ Series ç»Ÿè®¡å¯ä»¥ç”¨ä»¥ä¸‹æ–¹å¼</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dataRaw[<span class="string">&#x27;update_date&#x27;</span>].value_counts()</span><br></pre></td></tr></table></figure><ul><li>13.å¯¹ Series æ’åº</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dataRaw[<span class="string">&#x27;update_date&#x27;</span>].sort_index()</span><br></pre></td></tr></table></figure><ul><li>14.åœ¨ç”»æ—¶é—´åºåˆ—å›¾çš„æ—¶å€™å‘ç° x è½´æ—¶è¿™ä¸€æ•´å¹´çš„åˆ»åº¦ï¼Œå…¨éƒ¨æŒ¤åœ¨ä¸€èµ·çœ‹ç€éå¸¸éš¾å—ï¼Œç™¾åº¦åå‘ç°ä»¥ä¸‹æ–¹å¼æ›´æ”¹å­å›¾çš„åˆ»åº¦å¯†åº¦ï¼Œç¼ºç‚¹æ˜¯ä¸Šé¢ä¼šå¤šå‡ºä¸€å¼ å¤šä½™çš„ç©ºç™½å­å›¾</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">plt.xticks(rotation=<span class="number">43</span>, fontsize=<span class="number">8</span>)</span><br><span class="line">fig, ax = plt.subplots(<span class="number">1</span>, <span class="number">1</span>)</span><br><span class="line">ax.plot(dataRaw[<span class="string">&#x27;update_date&#x27;</span>].value_counts().sort_index())</span><br><span class="line">ax.xaxis.set_major_locator(ticker.MultipleLocator(<span class="number">20</span>))</span><br><span class="line">plt.axis()</span><br><span class="line">plt.xticks(rotation=<span class="number">43</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><ul><li>15.ç”»è¯äº‘å›¾çš„æ–¹å¼ï¼š</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">from</span> os <span class="keyword">import</span> path</span><br><span class="line"><span class="keyword">from</span> wordcloud <span class="keyword">import</span> WordCloud, ImageColorGenerator</span><br><span class="line"><span class="comment"># éœ€è¦ç»˜åˆ¶çš„ç›®æ ‡å­—ç¬¦ä¸²</span></span><br><span class="line">string = <span class="string">&#x27;&#x27;</span></span><br><span class="line"><span class="comment"># åœæ­¢è¯</span></span><br><span class="line">stopword = [<span class="string">&#x27;in&#x27;</span>, <span class="string">&#x27;the&#x27;</span>, <span class="string">&#x27;and&#x27;</span>, <span class="string">&#x27;for&#x27;</span>, <span class="string">&#x27;of&#x27;</span>, <span class="string">&#x27;with&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;by&#x27;</span>, <span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;from&#x27;</span>, <span class="string">&#x27;on&#x27;</span>, <span class="string">&#x27;to&#x27;</span>]</span><br><span class="line"><span class="comment"># è¯»å–æ–‡ä»¶è®¾ç½®è¯äº‘å›¾çš„åº•å›¾</span></span><br><span class="line">d = path.dirname(__file__) <span class="keyword">if</span> <span class="string">&quot;__file__&quot;</span> <span class="keyword">in</span> <span class="built_in">locals</span>() <span class="keyword">else</span> os.getcwd()</span><br><span class="line">alice_mask = np.array(Image.<span class="built_in">open</span>(path.join(d, <span class="string">&quot;alice_mask.png&quot;</span>)))</span><br><span class="line"><span class="comment"># ç”¨ç›¸å…³å±æ€§æ„é€ WordCloudå¯¹è±¡</span></span><br><span class="line">wc = WordCloud(</span><br><span class="line">    background_color=<span class="string">&#x27;white&#x27;</span>,</span><br><span class="line">    width=<span class="number">1000</span>,</span><br><span class="line">    height=<span class="number">800</span>,</span><br><span class="line">    mask=alice_mask,</span><br><span class="line">    stopwords=stopword</span><br><span class="line">)</span><br><span class="line"><span class="comment"># ç”Ÿæˆæ¯ä¸ªè¯å‡ºç°çš„é¢‘ç‡</span></span><br><span class="line">wc.generate_from_text(string)</span><br><span class="line"><span class="comment"># å°†è¯çš„é¢œè‰²è®¾ç½®ä¸ºåº•å›¾ä½ç½®ä¸Šå¯¹åº”çš„é¢œè‰²</span></span><br><span class="line">wc.recolor(color_func=ImageColorGenerator(alice_mask))</span><br><span class="line"><span class="comment"># ç»˜åˆ¶å›¾ç‰‡</span></span><br><span class="line">wc.to_image()</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>So, what&#39;s next</title>
      <link href="/2023/12/08/So-what-s-next/"/>
      <url>/2023/12/08/So-what-s-next/</url>
      
        <content type="html"><![CDATA[<p><img src="https://user-images.githubusercontent.com/2213682/146607186-8e13ddef-26a4-4ebf-befd-5aac9d77c090.png" alt="logo"></p><div align="center"><p><a href="https://opencollective.com/core-js"><img src="https://opencollective.com/core-js/all/badge.svg?label=fundraising" alt="fundraising"></a> <a href="https://github.com/zloirock/core-js/blob/master/CONTRIBUTING.md"><img src="https://img.shields.io/badge/PRs-welcome-brightgreen.svg" alt="PRs welcome"></a> <a href="https://www.npmjs.com/package/core-js"><img src="https://img.shields.io/npm/v/core-js.svg" alt="version"></a> <a href="https://npm-stat.com/charts.html?package=core-js&package=core-js-pure&package=core-js-compat&from=2014-11-18"><img src="https://img.shields.io/npm/dm/core-js.svg?label=npm%20i%20core-js" alt="core-js downloads"></a> <a href="https://npm-stat.com/charts.html?package=core-js&package=core-js-pure&package=core-js-compat&from=2014-11-18"><img src="https://img.shields.io/npm/dm/core-js-pure.svg?label=npm%20i%20core-js-pure" alt="core-js-pure downloads"></a> <a href="https://www.jsdelivr.com/package/npm/core-js-bundle"><img src="https://data.jsdelivr.com/v1/package/npm/core-js-bundle/badge?style=rounded" alt="jsDelivr"></a></p></div><blockquote><p>If you are looking for <code>core-js</code> documentation, itâ€™s temporarily moved <a href="https://github.com/zloirock/core-js/blob/master/ORIGINAL_README.md">here</a>.</p><p>Later, this post will be available <a href="https://github.com/zloirock/core-js/blob/master/docs/2023-02-14-so-whats-next.md">by this link</a>.</p></blockquote><h1 id="So-whatâ€™s-next"><a href="#So-whatâ€™s-next" class="headerlink" title="So, whatâ€™s next?"></a>So, whatâ€™s next?</h1><p>Hi. I am (<strong><a href="https://github.com/zloirock">@zloirock</a></strong>) a full-time open-source developer. I donâ€™t like to write long posts, but it seems this is high time to do it. Initially, this post was supposed to be a post about the start of active development of the new major version of <code>core-js</code> and the roadmap (it was moved to <a href="#roadmap">the second half</a>), however, due to recent events, became a really long post about many different thingsâ€¦ Iâ€™m fucking tired. Free open-source software is fundamentally broken. I could stop working on this silently, but I want to give open-source one last chance.</p><details><summary><b>ğŸ”» Click to see how you can help ğŸ”»</b></summary><p>If you or your company use <code>core-js</code> in one way or another and are interested in the quality of your supply chain, support the project:</p><ul><li><a href="https://opencollective.com/core-js"><strong>Open Collective</strong></a></li><li><a href="https://patreon.com/zloirock"><strong>Patreon</strong></a></li><li><a href="https://boosty.to/zloirock"><strong>Boosty</strong></a></li><li><strong>Bitcoin ( bc1qlea7544qtsmj2rayg0lthvza9fau63ux0fstcz )</strong></li><li><a href="https://user-images.githubusercontent.com/2213682/219464783-c17ad329-17ce-4795-82a7-f609493345ed.png"><strong>Alipay</strong></a></li></ul><p><strong>Write me if you want to offer a good job on Web-standards and open-source.</strong></p></details><h2 id="What-is-core-js"><a href="#What-is-core-js" class="headerlink" title="What is core-js?"></a>What is <a href="https://github.com/zloirock/core-js"><code>core-js</code></a>?</h2><ul><li>It is the most popular and the most universal polyfill of the JavaScript standard library, which provides support for the latest ECMAScript standard and proposals, from ancient ES5 features to bleeding edge features like <a href="https://github.com/tc39/proposal-iterator-helpers">iterator helpers</a>, and web platform features closely related to ECMAScript, like <code>structuredClone</code>.</li><li>It is the most complex and comprehensive polyfill project. At the time of publishing this post, <code>core-js</code> contains about a half thousand polyfill modules with different levels of complexity - from <code>Object.hasOwn</code> or <code>Array.prototype.at</code> to <code>URL</code>, <code>Promise</code> or <code>Symbol</code> â€” that designed to work together. With another architecture, each of them could be a separate package - however, it is not so convenient.</li><li>It is maximally modular â€” you can easily (or even automatically) choose to load only the features you will be using. It can be used without polluting the global namespace (someone calls such a use case â€œponyfillâ€).</li><li>It is designed for integration with tools and provides all thatâ€™s required for this â€” for example, <code>@babel/preset-env</code>, <code>@babel/transform-runtime</code>, and similar SWC features are based on <code>core-js</code>.</li><li>It is one of the main reasons why developers can use modern ECMAScript features in their development process each day for many years, but most developers just donâ€™t know that they have this possibility because of <code>core-js</code> since they use <code>core-js</code> indirectly as itâ€™s provided by their transpilers &#x2F; frameworks &#x2F; intermediate packages like <code>babel-polyfill</code> &#x2F; etc.</li><li>It is not a framework or a library, which usage require the developer to know their API, periodically look at the documentation, or at least remember that he or she is using it. Even if developers use <code>core-js</code> directly â€” itâ€™s just some lines of import or some lines in the configuration (in most cases â€” with mistakes, since almost no one read the documentation), after that, they forget about <code>core-js</code> and just use provided by <code>core-js</code> features from web-standards â€” but sometimes this is the most of JS standard library that they use.</li></ul><p><a href="https://npm-stat.com/charts.html?package=core-js&package=core-js-pure&package=core-js-bundle&from=2014-11-18">About 9 billion NPM downloads &#x2F; 250 million NPM downloads for a month</a>, 19 million dependent GitHub repositories (<a href="https://github.com/zloirock/core-js/network/dependents?package_id=UGFja2FnZS00ODk5NjgyNDU=">global</a> â‹ƒ <a href="https://github.com/zloirock/core-js/network/dependents?package_id=UGFja2FnZS00MjYyOTI0Ng==">pure</a>) - big numbers, however, they do not show the real spread of <code>core-js</code>. Letâ€™s check it.</p><p>I wrote <a href="https://github.com/zloirock/core-js/blob/master/scripts/usage/usage.mjs">a simple script</a> that checks the usage of <code>core-js</code> in the wild by the Alexa top websites list. We can detect obvious cases of <code>core-js</code> usage and used versions (only modern).</p><p align="center"><img alt="usage" src="https://user-images.githubusercontent.com/2213682/218452738-859e7420-6376-44ec-addd-e91e4bcdec1d.png" /></p><p>At this moment, this script running on the TOP 1000 websites <strong>detects usage of <code>core-js</code> on <a href="https://gist.github.com/zloirock/7ad972bba4b21596a4037ea2d87616f6">52%</a> of tested websites</strong>. Depending on the phase of the moon (the list, websites, etc. are not constants), results may vary by a few percent. However, itâ€™s just a naive detection on initial pages using a modern browser that loses many cases, <strong>manual check shows that itâ€™s additional dozens of percent</strong>. For example, letâ€™s leave the initial pages of some websites from the screenshot above where <code>core-js</code> was <strong>not</strong> found by this script, without repetition of each company (at first â€” MS thatâ€™s already on the screenshot) websites (be patient, after the series of screenshots the number of pictures will decrease):</p><p align="center"><img alt="whatsapp" width="720" src="https://user-images.githubusercontent.com/2213682/153953087-8e3891aa-f00a-4882-a338-f4cc7496581b.png" /></p><hr><p align="center"><img alt="linkedin" width="720" src="https://user-images.githubusercontent.com/2213682/190879234-30c15dbb-cd5e-4056-8f32-2eac67ef9e89.png" /></p><hr><p align="center"><img alt="netflix" width="720" src="https://user-images.githubusercontent.com/2213682/213377001-2af36bac-0577-4e34-a4fc-a49ca06e9f04.png" /></p><hr><p align="center"><img alt="qq" width="720" src="https://user-images.githubusercontent.com/2213682/213378031-57496cb0-b6b6-4cc8-9656-f126820db26f.png" /></p><hr><p align="center"><img alt="ebay" width="720" src="https://user-images.githubusercontent.com/2213682/213379258-eba54efb-1c65-451a-91af-9f9978ece5a7.png" /></p><hr><p align="center"><img alt="apple" width="720" src="https://user-images.githubusercontent.com/2213682/161145359-812efe4c-33c9-4905-96b9-fef23d2d969e.png" /></p><hr><p align="center"><img alt="fandom" width="720" src="https://user-images.githubusercontent.com/2213682/218451581-5cae922c-f782-4e44-8385-a443ef0f8232.png" /></p><hr><p align="center"><img alt="pornhub" width="720" src="https://user-images.githubusercontent.com/2213682/174662177-5767c34b-f347-4045-96da-5b0783a1345b.png" /></p><hr><p align="center"><img alt="paypal" width="720" src="https://user-images.githubusercontent.com/2213682/218453759-d15fc6c4-4246-479d-aea6-b9123ecb59a2.png" /></p><hr><p align="center"><img alt="binance" width="720" src="https://user-images.githubusercontent.com/2213682/213380797-70a61338-2152-4642-b0e7-affebe2c3b71.png" /></p><hr><p align="center"><img alt="spotify" width="720" src="https://user-images.githubusercontent.com/2213682/213381068-fb73821f-3cfa-4f37-9096-305587c16ef8.png" /></p><p><strong>With such a manual check, you can find <code>core-js</code> on about 75-80 of the top 100 websites</strong> while the script found it on about 55-60. On a larger sample the percentage, of course, decreases.</p><p><a href="https://www.wappalyzer.com/technologies/javascript-libraries/">Wappalyzer</a> allows detection of used technologies, including <code>core-js</code>, with a browser plugin and has previously shown interesting results, but now on their website, all the most popular technologiesâ€™ public results are limited to only about 5 million positives. Statistics based on Wappalyzer results are available <a href="https://almanac.httparchive.org/en/2022/javascript#library-usage">here</a> and show <code>core-js</code> on 41% and 44% of 8 million mobile and 5 million desktop tested pages. <a href="https://trends.builtwith.com/javascript/core-js">Built With at this moment shows <code>core-js</code> on 54% of TOP 10000 sites</a> (however, Iâ€™m not sure about the completeness of their detection and see the graph from another reality).</p><p>Anyway, we can say with confidence that <strong><code>core-js</code> is used by most of the popular websites</strong>. Even if <code>core-js</code> is not used on the main site of any large corporation, itâ€™s definitely used in some of their projects.</p><p>What JS libraries are more widespread on websites? Itâ€™s not <a href="https://trends.builtwith.com/javascript/React">React</a>, <a href="https://trends.builtwith.com/javascript/lodash">Lodash</a>, or any other most talked-about library or framework, I am pretty sure only about <a href="https://trends.builtwith.com/javascript/jQuery">â€œgood oldâ€ jQuery</a>.</p><p>And <code>core-js</code> is not only about websites frontend â€” itâ€™s used almost everywhere where JavaScript is used â€” but I think thatâ€™s more than enough statistics.</p><p align="center"><img alt="github" src="https://user-images.githubusercontent.com/2213682/211223204-ec62ea94-1df8-4a91-a9b2-4e85aef24677.png" /></p><p>However, for the above reasons, <a href="https://2022.stateofjs.com/en-US/other-tools"><strong>almost no one remembers that he or she uses <code>core-js</code></strong></a>.</p><p>Why am I posting this? No, not to show how cool I am, but to show how bad everything is. Read on.</p><hr><h2 id="Letâ€™s-start-the-next-part-with-one-popular-xkcd-picture"><a href="#Letâ€™s-start-the-next-part-with-one-popular-xkcd-picture" class="headerlink" title="Letâ€™s start the next part with one popular xkcd picture"></a>Letâ€™s start the next part with one popular <code>xkcd</code> picture</h2><p><a href="https://xkcd.com/2347/"><p align="center"><img alt="xkcd" src="https://user-images.githubusercontent.com/2213682/113476934-c70f0900-94a8-11eb-8723-d080f129a449.png" /></p></a></p><h3 id="Beginning"><a href="#Beginning" class="headerlink" title="Beginning"></a>Beginning</h3><p>I switched my development stack to full-stack JavaScript in 2012. It was a time when JavaScript still was too raw - IE still was more popular than anything else, ES3 era browsers still occupied a significant part of the web, the latest NodeJS version was 0.7 - it was just starting its way. JavaScript still was not adapted for writing serious applications and developers solved problems of lack of required language syntax sugar with compilers from languages like CoffeeScript and lack of proper standard library with libraries like Underscore. However, it wasnâ€™t a standard - over time, these languages and libraries become obsolete together with the projects that use them. So, I took all news of the upcoming ECMAScript <del>Harmony</del> 6 standard with great hope.</p><p>Given the prevalence of old JavaScript engines and the fact that users were in no hurry and often did not have the opportunity to abandon them, even in the case of quick and problem-free adoption of the new ECMAScript standard, the ability to use it only through JavaScript engines was postponed for many and many years. But it was possible to try to get support features from this standard using some tools. Transpilers (this word was not as popular as now) should have to solve the problem with the syntax, and polyfills - with the standard library. However, at that time the necessary toolkit was only just beginning to emerge.</p><p>It was a time when ECMAScript transpilers started to become popular and develop actively. However, at the same time, polyfills almost have not evolved according to usersâ€™ and real-life projectsâ€™ needs. They were not modular. They were not been able to use without global namespace pollution - so they were not suitable for libraries. They were not one complex - it was required to use some different polyfill libraries from different authors and somehow make them work together - but in some cases, it was almost impossible. Too many necessary fundamental language features were just missed.</p><p>To fix those problems, at the end of 2012, initially for my own projects, I started to work on the project that later was called <code>core-js</code>. I wanted to make the life of all JS developers easier and in November 2014, I published <code>core-js</code> as an open-source project. <em>Maybe it was the biggest mistake in my life.</em></p><p>Since I was not the only one who faced these issues, after a few months, <code>core-js</code> has already become the de facto standard of JavaScript standard library features polyfill. <code>core-js</code> had been integrated into Babel (<code>6to5</code> at that moment) that appeared a couple of months before <code>core-js</code> publishing - some of mentioned above issues were critical for this project too. <code>core-js</code> began to be distributed as <code>6to5/polyfill</code>, after rebranding - <code>babel-polyfill</code>. After some months of collaboration, has appeared a tool that became <code>babel-runtime</code> after rebranding and evolution. After some months <code>core-js</code> was integrated into the key frameworks.</p><h3 id="Ensuring-compatibility-for-the-whole-Web"><a href="#Ensuring-compatibility-for-the-whole-Web" class="headerlink" title="Ensuring compatibility for the whole Web"></a>Ensuring compatibility for the whole Web</h3><p>I didnâ€™t promote myself or the project. <em>This is the second mistake.</em> <code>core-js</code> hadnâ€™t a website or social media accounts, only GitHub. I did not show up at conferences to talk about it. I almost didnâ€™t write posts about it. I was just making a really useful and wanted part of the modern development stack and I was happy about that. I gave developers a chance to use the most modern and really necessary JavaScript features without waiting for years until they are implemented in all required engines, without thinking about compatibility and bugs - and they started to use it. The spread of the project had grown exponentially - very soon it was already used on dozens of percent of popular websites.</p><p>However, it was just the start of the required work. Many years of hard work followed. Almost every day I spent some hours on <code>core-js</code> and related projects (mainly Babel and <a href="https://kangax.github.io/compat-table/es2016plus/"><code>compat-table</code></a>) maintenance.</p><p><img src="https://user-images.githubusercontent.com/2213682/218516268-6ec765a5-50df-4d45-971f-3c3fc4aba7a1.png" alt="github"></p><p><code>core-js</code> is not a several lines library that you can write and forget about it. Unlike the vast majority of libraries, itâ€™s bound to the state of the Web. It should react to any change of JavaScript standards or proposals, to any new JS engine release, to any detection of a bug in JS engines, etc. After ECMAScript <del>6</del> 2015 followed new proposals, new versions of ECMAScript, new non-ECMAScript web standards, new engines and tools, etc. The evolution, the improvement of the project, and the adaptation to the current state of the Web have never stopped - and almost all of this work remains not visible to the average user.</p><p>The scale of required work was constantly growing.</p><p>I tried to find other maintainers or at least constant contributors for <code>core-js</code> in different ways for a long time, but all attempts have failed. Almost every JS developer used <code>core-js</code> indirectly and knew, for example, <code>babel-polyfill</code>, <code>babel-runtime</code>, or that his framework polyfill all required features, but almost no one knew <code>core-js</code>. In some posts about polyfilling where <code>core-js</code> was mentioned, it was called â€œa small libraryâ€. It was not a trendy and widely discussed project, so why help maintain it if it works great anyway? Over time I lost hope for it, but I felt a responsibility to the community, so I was forced to continue working alone.</p><p>After a few years combining full-time work and FOSS became almost impossible - no one wanted to pay money for the working time devoted to FOSS, non-working hours were not enough, and sometimes <code>core-js</code> required complete immersion for weeks. I thought that proper polyfilling is required for the community and money was not my priority.</p><p>I left a high-paying job and did not accept some very good options because in those positions I did not have the opportunity to devote enough time to work on open-source. I started to work on open-source full-time. No one paid me for it. I hoped sooner or later to find a job where I could fully dedicate myself to open-source and web standards. Periodically, I earned the money, required for life and work on FOSS, on short-term contracts. I returned to Russia, where it was possible to have a decent standard of living for relatively small money. <em>One more mistake - as you will see below, money matters.</em></p><hr><p>Until April 2019, for about one and a half years as a whole and about a half-year full-time without distraction to any other work, I worked on <a href="https://github.com/zloirock/core-js/blob/master/docs/2019-03-19-core-js-3-babel-and-a-look-into-the-future.md">the <code>core-js@3</code> with a fundamental improvement of polyfilling-related Babel tools</a>, the basement of the toolkit generation that now is used almost everywhere.</p><h3 id="Accident"><a href="#Accident" class="headerlink" title="Accident"></a>Accident</h3><p>Shit happened 3 weeks after the <code>core-js@3</code> release. One April night, at 3 AM, I was driving home. Two deadly drunk 18-years-old girls in dark clothes decided somehow <em>to crawl</em> across a poorly lit highway - one of them lay down on the road, another sat down and dragged the first, but not from the road - directly under my wheels. Thatâ€™s what the witnesses said. I had absolutely no chance to see them. One more witness said that before the accident they were just jokingly fighting on the road. Nothing unusual, itâ€™s Russia. One of them died and another girl went to a hospital. However, even in this case, according to Russian arbitrage practice, if the driver is not a son of a deputy or someone like that, he almost always will be found guilty - he should see and anticipate everything, and a pedestrian owes nothing to anyone. I could end up in prison for a long time, IIRC later the prosecutor requested 7 years.</p><p>The only way not to end up in prison was reconciliation with â€œvictimsâ€ - a standard practice after such accidents - and a good lawyer. Within a few weeks after the accident, I received financial claims totaling about 80 thousand dollars at the exchange rate at that time from â€œvictimsâ€™â€ relatives. A significant amount of money was also needed for a lawyer.</p><p>Maybe itâ€™s not inconceivable much money for a good software engineer, but, as I wrote a little above, for a long time I worked on the <code>core-js@3</code> release full time. Of course, no one paid me for this work, and I completely exhausted all my financial reserves, so, sure, I hadnâ€™t such money and I didnâ€™t have a chance to find the required money from available sources. The time I had was running out.</p><h3 id="Fundraising"><a href="#Fundraising" class="headerlink" title="Fundraising"></a>Fundraising</h3><p>By that time <code>core-js</code> already was used almost as widely as itâ€™s now. As I wrote above, for a long time I looked for contributors for <code>core-js</code> without any success. However, <code>core-js</code> is a project that should be actively maintained and it canâ€™t stay just frozen. My long-term imprisonment would have caused problems not only for me - but itâ€™s also the death of <code>core-js</code> and problems for all who use it - for half of the Web. The notorious <a href="https://en.wikipedia.org/wiki/Bus_factor">bus factor</a>.</p><p>Some months before that, I started raising funds to support the <code>core-js</code> development (mainly it was posted READMEs on GitHub and NPM). The result wasâ€¦ $57 &#x2F; month. Fair pay for full-time work on ensuring compatibility for the whole web ğŸ˜‚</p><p>I decided to make a little experiment - to ask for help from the <code>core-js</code> users - those who will suffer if <code>core-js</code> will be left without maintenance. I added a message on <code>core-js</code> installation:</p><p><img src="https://user-images.githubusercontent.com/2213682/153024428-28b8102c-ce08-461c-af99-d0417dc7d2cd.png" alt="postinstall"></p><p>I understood that hardly Iâ€™ll get all the required money on donations, however, every dollar mattered. I added a job search message to get a chance to earn another part. I was thinking that some lines in the NPM installation log asking to help, which can be hidden if itâ€™s required, is an acceptable price for using <code>core-js</code>. The original plan was to delete this post in a few weeks, but everything went against the plan. How wrong I was about peopleâ€¦</p><h3 id="Hate"><a href="#Hate" class="headerlink" title="Hate"></a>Hate</h3><p>Of course, I expected that someone would not like to see a request for help in their console, but the continuous stream of hate that I began to receive went through the roof. It was hundreds of messages, posts, and comments for a day. All this can be reduced to something like:</p><p align="center"><img alt="get-rid" width="720" src="https://user-images.githubusercontent.com/2213682/154875165-2b144651-5769-4f8e-9072-3a1a03bfe164.png" /></p><p>This is far from the funniest thing Iâ€™ve seen - if I wanted to, I could collect a huge selection of statements in the style <a href="https://github.com/samdark/opensource-hate">collected here</a> - but why? I already have enough negativity in my life.</p><p><strong>Developers love to use free open-source software - itâ€™s free and works great, they are not interested in that many and many thousands of hours of development, and real people with their own problems and needs are behind it. They consider any mention of this as an invasion of their personal space or even a personal affront. For them, these are just gears that should automatically change without any noise and their participation.</strong></p><p>So, thousands of developers attacked me with insults and claimed that I have no right to ask them for any kind of help. My request for help offended them so much that they began to demand restricting my access to the repository and packages and move them to someone else like it was done with <a href="https://arstechnica.com/information-technology/2016/03/rage-quit-coder-unpublished-17-lines-of-javascript-and-broke-the-internet/"><code>left-pad</code></a>. Almost no one of them understood what <code>core-js</code> does, the scale of the project, and, of course, no one of them wanted to maintain it - it should do â€œthe communityâ€, someone else. Seeing all this hatred, in order not to be led by the haters, I did not delete the help-asking message, that initially planned to add only for a couple of weeks, just out of principle.</p><p><strong>What about companies for whom <code>core-js</code> helped and helps to make big money? Itâ€™s almost all big companies. Letâ€™s rephrase <a href="https://twitter.com/AdamRackis/status/931195056479965185">this old tweet</a>:</strong></p><blockquote><p>Company: â€œWeâ€™d like to use SQL Server Enterpriseâ€</p><p>MS: â€œThatâ€™ll be a quarter million dollars + $20K&#x2F;monthâ€</p><p>Company: â€œOk!â€</p><p>â€¦</p><p>Company: â€œWeâ€™d like to use core-jsâ€</p><p>core-js: â€œOk! npm i core-jsâ€</p><p>Company: â€œCoolâ€</p><p>core-js: â€œWould you like to help contribute financially?â€</p><p>Company: â€œlol noâ€</p></blockquote><p>A few months later, tired of user complaints, NPM presented <a href="https://docs.npmjs.com/cli/v6/commands/npm-fund"><code>npm fund</code></a> - it was not a problem solution, it was just a way to get rid of those complaints. How often did you call <code>npm fund</code>? How often did you pay donations to someone who you saw in <code>npm fund</code>? Who did you see and support at first - <code>core-js</code> or one who maintains a dozen of one-line libraries dependent on each other? It also provided NPM a perfect justification for the future step (read below).</p><p>Within 9 months many thousands of developers, including developers of projects fundamentally dependent on <code>core-js</code>, knew about the situation - but no one offered to maintain <code>core-js</code>. Within many months I talked with maintainers of some significant projects dependent on <code>core-js</code>, but without any success - they hadnâ€™t required time resources. So I was forced to ask some of my friends who were not related to FOSS community (at first <strong><a href="https://github.com/slowcheetah">@slowcheetah</a></strong>, thanks him for his help) to cover me and at least try to fix significant issues until I get free.</p><hr><p>Few users and small companies supported the <code>core-js</code> - and I am very grateful to them. However, within 9 months it was collected only about 1&#x2F;4 of the money that should have been collected within a couple of weeks to change something.</p><p>During the same time, despite everything, the number of <code>core-js</code> downloads for a day almost doubled.</p><p>In January 2020 I ended up in prison.</p><h3 id="Release"><a href="#Release" class="headerlink" title="Release"></a>Release</h3><p>I donâ€™t wanna say many words about prison and I have no great desire remembering this. It was slave labor at a chemical factory where my health was significantly ruined and where I 24&#x2F;7 had a great time in a company of drug dealers, thieves, and killers (from other regimes), without access to the Internet and computers.</p><p>After about 10 months, I was released early.</p><hr><p>I saw dozens of articles, hundreds of posts, and thousands of comments the essence of many of which can be expressed by this:</p><p align="center"><img alt="reddit" width="720" src="https://user-images.githubusercontent.com/2213682/218419779-d61c9e39-c8c1-412b-83aa-eb1b12d2e760.png" /></p><p>What do you think I did? <em>Of course, I made the same mistake.</em> I saw some people who supported the development of <code>core-js</code>, many issues, questions, and messages - sure, not so much like angry comments. <code>core-js</code> became even more popular and was already used by almost the same percentage of websites as it is now.</p><h3 id="Ensuring-compatibility-for-the-whole-Web-again"><a href="#Ensuring-compatibility-for-the-whole-Web-again" class="headerlink" title="Ensuring compatibility for the whole Web again"></a>Ensuring compatibility for the whole Web again</h3><p>I returned to <code>core-js</code> maintenance like it was before. Moreover, I completely stopped being distracted by contracts and any other work in favor of working on <code>core-js</code>. <code>core-js</code> had some money on funding platforms - not so much, many times less than I received before starting work on <code>core-js</code> full-time - but for me alone it was enough for life. A kind of down-shifting, full-time Open-Source for making the world betterâ€¦ I didnâ€™t think about the tens of thousands of dollars in lawsuits left over from the accident. I didnâ€™t think about my future. I thought about a better future for the Web. And, of course, I was hoping that some company would offer me a position with the opportunity to work on web standards and would sponsor my work on polyfills and FOSS.</p><p><a href="https://github.com/zloirock/core-js/compare/0943d43e98aca9ea7b23cdd23ab8b7f3901d04f1...master">A lot has been accomplished</a> over the next two years - in terms of work, almost the same as in the previous 8 years. This is still <code>core-js@3</code> - but much better. However, the changelog and even the previous diff reflect only a few percent of the work done. Almost all of this work remains in the shadows, not visible to the average user.</p><p>This is a fundamental work with standards and proposals. As a side effect of this work, taking into account the hard work that was done and changes after my feedback and suggestions, I consider many of the ECMAScript proposals that have become part of the language my achievements as much as they are achievements of their champions. This is work with engines and their bug trackers in searching for bugs. This is constant automatic and (too often) manual testing in many hundreds of environments, many thousands of environments &#x2F; builds &#x2F; test suites combinations for ensuring proper work of standard library everywhere and collecting compat data. From a raw prototype, made in a couple of days, <code>core-js</code> compat data became exhaustive data set with proper external and internal tooling. This is the design and prototyping of many features that are yet to appear in the project. And also much, much more.</p><hr><p>As you can see above, <code>core-js</code> is present in most of the popular websites, provides an almost complete JavaScript standard library, and fixes not proper implementations. The number of web page openings with <code>core-js</code> is greater than the number of web page openings in Safari and Firefox. Thus, from a certain point of view, <code>core-js</code> can be called one of the most popular JavaScript runtimes.</p><p>During work on <code>core-js</code>, I am the first implementor of almost all modern and future JavaScript standard library features, almost all of them have my feedback and they have been fixed according to it. <code>core-js</code> is the best playground for experimentation with ECMAScript proposals. In too many cases, proposals have feedback from other users after they play with experimental <code>core-js</code> implementations of proposals.</p><p>The best way forward for JavaScript would be for TC39 and <code>core-js</code> to work together on the future of JavaScript. For example, TC39 invites members of projects like Babel and others as experts. But seems not in the <code>core-js</code> case. Instead of this, too often, I see ignore of my or <code>core-js</code> issues or even making roadblocks by TC39 members and they even donâ€™t hide it:</p><p align="center"><img alt="shu" width="600" src="https://user-images.githubusercontent.com/2213682/140033052-46e53b0c-e1bc-4c84-a1f4-3511d7de604a.png" /></p><hr><p align="center"><img alt="lj" width="800" src="https://user-images.githubusercontent.com/2213682/217476089-604b1629-73a8-4715-9276-a601004f0947.png" /></p><hr><p>After a while, â€œsupportâ€ came from NPM. In <code>npm@7</code> which was released at the end of 2020 as a logical continuation of <code>npm fund</code> was disabled console output in post-install scripts. The result was expected - because people stopped seeing the funding request and almost no one uses <code>npm fund</code>, the number of <code>core-js</code> backers began to decline. Excellent support for the project from those who not only earn by distributing my work but also use it themselves -)</p><p align="center"><img alt="npm" width="720" src="https://user-images.githubusercontent.com/2213682/218333796-18bee93f-64e7-4257-8ddd-d16fc4f05989.png" /></p><p>In addition, another factor came into play again. Higher quality - less support. Is the library well-maintained? There are practically almost no open bug reports, and if they happen, is it fixed almost instantly? Does the library already give us almost everything we want? Yes? So why should we support the maintenance of the library? The price at which this is done for the maintainers is not on the surface - for the most, itâ€™s still just â€œa small libraryâ€. Many of those who backed <code>core-js</code> before stopped doing it.</p><p><code>core-js</code> code contains my copyright. As you can see at the top of this post, itâ€™s present in about half of all websites. Regularly someone finds it in the source code of harmful sites &#x2F; applications - but they donâ€™t know what is <code>core-js</code> and their tech level is not good enough even for finding out it. After that, the police call and threaten me, and someone even tries to blackmail me. Sometimes itâ€™s even not funny.</p><p>I have been contacted several times by American and Canadian journalists who discover <code>core-js</code> on American news and government websites. They were very disappointed that I was not an evil Russian hacker who meddles in American elections.</p><p>The endless stream of hatred decreased slightly over time but continued. However, most of it moved from something like GitHub issues or Twitter threads to my mail or IM. Today, one developer wrote to me a message. He called me a parasite on the body of the developer community that makes a lot of money spamming and doing nothing useful. He called me the same murderer as <a href="https://en.wikipedia.org/wiki/Hans_Reiser">Hans Reiser</a>, but who bought the judge and went unpunished. He wished death on me and all my relatives. And there is nothing unusual here, I get several such messages a month. In the last year, this has been added that I am a â€œRussian fascistâ€.</p><h3 id="Some-words-about-war"><a href="#Some-words-about-war" class="headerlink" title="Some words about war"></a>Some words about war</h3><p><strong>Open-source should be out of politics.</strong></p><p>I donâ€™t want to choose between two kinds of evil. I will not comment on this in more detail, since there are people close to me on both sides of the border who may suffer because of this.</p><p>Let me remind you what I wrote about above - I returned to Russia because it was a place where it was possible to have a decent standard of living for relatively small money and concentrate on FOSS instead of making money. Now I cannot leave Russia, because after the accident I have outstanding lawsuits in the amount of tens of thousands of dollars and I am forbidden to leave the country until they are paid off.</p><h3 id="What-do-you-think-how-much-money-core-js-earn-for-a-month"><a href="#What-do-you-think-how-much-money-core-js-earn-for-a-month" class="headerlink" title="What do you think, how much money core-js earn for a month?"></a>What do you think, how much money <code>core-js</code> earn for a month?</h3><p>When I started to maintain <code>core-js</code> full-time, without being distracted by contracts and any other work, <strong>it was about $2500 for a month - it was about 4-5 times less than I usually had on full-time contracts</strong>. Remember, a kind of down-shifting, to make the Web better. Temporarily. Reduce issues and bugs to zero, make the highest quality product, which is used by almost everyone - and the project will be sufficiently supported, right? Right?</p><p>After a few months, monthly repeat was <strong>decreased to about $1700</strong> <em>(at least thatâ€™s what I thought)</em> - $1000 via Tidelift, $600 via Open Collective, and $100 via Patreon. In addition to the monthly repeat, one-time donations periodically come - on average it was maybe $100 for a month.</p><p>Crypto? Adding a crypto wallet for donations was a very popular request. However, for all the time, only 2 transfers for a total amount of about $200 have been received on crypto wallets, the previous one was more than a year ago. GitHub sponsors? Itâ€™s not available for Russia and never was. PayPal? Itâ€™s banned for Russians. When it was available, <code>core-js</code> received about 60$ for all time. Grants? I applied for a lot of grants - all were ignored.</p><p><strong>The main part, $400 for a month, from those donations, <code>core-js</code> had fromâ€¦ <a href="https://bower.io/">Bower</a>, another FOSS community. I am also very grateful <a href="https://opencollective.com/core-js#section-contributors">to all other sponsors</a> - because of your donations, Iâ€™m still working on this project.</strong></p><p>However, in this list there is no one big corporation or at least a company from the top 1000 website list. Letâ€™s be honest - there are mainly individuals, and only a few small companies on the current list of backers and they pay a few dollars a month.</p><p>If someone will say that they donâ€™t know that <code>core-js</code> requires fundingâ€¦ Come on, I regularly see memes like <a href="https://www.reddit.com/r/ProgrammerHumor/comments/fbfb2o/thank_you_for_using_corejs/">this</a>:</p><p align="center"><img alt="sanders" width="400" src="https://user-images.githubusercontent.com/2213682/218325687-08d58543-4b88-4a39-a0de-420bd325450f.png" /></p><hr><p>A year ago, Tidelift stopped sending me money. They said that because of the political situation, the Hyperwallet that they used is no longer available for Russians (but it was available for me till the previous month when I tried to update some personal data), and for safety, they will store my money on their side. Within a previous few months, I tried to get this money to a bank or a Hyperwallet account but received only replies that they will try to do something (<em>sounds great, doesnâ€™t it?</em>). From the end of the previous year, they just stopped responding to emails. And now, Iâ€™ve got this:</p><p><img src="https://user-images.githubusercontent.com/2213682/217650273-548d123d-4ee4-4beb-ad5b-631c55e612a6.png" alt="tidelift"></p><p><strong>In such an amusing way, I found out that I will not receive the money for the previous year, and this year I worked not for $1800, but for $800 a month.</strong> There were, of course, no replies to subsequent emails. However, their site indicated that I received and still receive money through them.</p><p align="center"><img alt="tidelift" width="500" src="https://user-images.githubusercontent.com/2213682/218159794-1ea53543-a8ff-463a-ad36-dc900a34b7c8.png" /></p><p>I wonder how the companies that support their dependencies chain through them will react to such a scam.</p><hr><p>At the same day, on OpenCollective I saw that the monthly repeat was reduced from about $600 to about $300. Apparently, the financial reserves of <code>Bower</code> have come to an end. That means that <strong>for this month Iâ€™ll get about $400 at all</strong>.</p><p>In the previous months, I measured how much time takes the work on <code>core-js</code>. It turned out aboutâ€¦ <strong>250 hours a month</strong> - significantly more than a full day without any days off, which makes it impossible to have â€œrealâ€ (as many say) full-time work or work any significant contracts. $400 for 250 hoursâ€¦ It will be less than <strong>$2 per hour of work, for the previous year a little more - $4 per hour</strong>. Yes, in some months, I spend less time working on the project - however it does not change much.</p><p>So much willing to pay for ensuring compatibility for the whole Web. And no insurance or social security.</p><p><strong>Awesome earning growth and career, right?</strong></p><p>I think you understand well how much senior software engineers in key IT companies get paid. I received a lot of comparable offers, however, they are not compatible with the proper work on <code>core-js</code>.</p><hr><p>Among the regular threats, accusations, demands, and insults, I often get something like â€œStop begging and go to work, idler. Remove your beggarly messages immediately - I donâ€™t wanna see them.â€ The funny thing is that at least some of these people get over $300,000 a year (which I know for sure because I talk to their colleagues), and (because of the nature of their work) <code>core-js</code> save them many hours of work each month.</p><h3 id="Everything-changes"><a href="#Everything-changes" class="headerlink" title="Everything changes"></a>Everything changes</h3><p>When I started working on <code>core-js</code>, I was alone. Now I have a family. A few over a year ago, I became a father of son. Now I have to provide him with a decent standard of living.</p><p><img src="https://user-images.githubusercontent.com/2213682/208297825-7f98a8e2-088e-47d3-95a6-a853077296b3.png" alt="son"></p><p>I have a wife and sometimes she wants some new shoes or a bag, a new iPhone or Apple Watch. My parents are already at the age that I need to significantly support them.</p><p>I think it is obvious that it is impossible to properly support a family with the money that I have or had from <code>core-js</code> maintenance. Financial reserves I used, have finally come to the end.</p><p>More and more often I hear reproaches like: â€œGive up your Open-Source, this is pampering. Go back to a normal job. <code>%USERNAME%</code> works as a programmer for just a year. He understands almost nothing about it, works a couple of hours a day, and already earns times more than you.â€</p><h1 id="NO-MORE"><a href="#NO-MORE" class="headerlink" title="NO MORE"></a>NO MORE</h1><p>Iâ€™m damn tired. I love working on open-source and <code>core-js</code>. But who or what am I doing this for? Letâ€™s summarize the above.</p><ul><li>I ensure no compatibility issues and provide bleeding edge features of the web platform for most of the Web from 2014 and Iâ€™m working on it almost all my time for money that now will not be enough even for food.</li><li>Instead of any gratitude, all I see is huge hatred from developers whose life I simplify.</li><li>Companies that save and earn many millions of dollars on <code>core-js</code> usage just ignore <code>core-js</code> funding requests.</li><li>Even in a critical situation, on an ask for help, instead of help, most of them preferred to ignore or hate.</li><li>Instead of working together with standards and browsers developers on a better future for JavaScript, Iâ€™m forced to struggle with roadblocks that they make.</li></ul><hr><p>I donâ€™t care about the haters. Otherwise, I would leave open-source a long time ago.</p><p>I can tolerate the lack of normal interaction with the standards developers. First of all, itâ€™s future problems for users and, when the Web will be broken, for standards developers themself.</p><p><strong>However, money matters.</strong> Iâ€™ve had enough of sponsoring corporations at the expense of my and my familyâ€™s well-being. I should be able to ensure a bright future for my family, for my son.</p><p>The work on <code>core-js</code> takes almost all my time, more than a full working day. This work ensures the proper work the most of the popular websites and this work should be paid properly. Iâ€™m not going to keep working for free or for $2 per hour. Iâ€™m willing to continue working on a project at least for $80 an hour. This is the money that have, for example, <a href="https://eslint.org/blog/2022/02/paying-contributors-sponsoring-projects/#paying-team-members-per-hour"><code>eslint</code> team members for an hour</a>. And, if work on open-source requires it, Iâ€™m ready to pay off my lawsuits and leave Russia - however, itâ€™s not cheap.</p><hr><p>Regularly I see comments like this:</p><p align="center"><img alt="core-js approach" width="600" src="https://user-images.githubusercontent.com/2213682/136879465-88b3d349-6a1a-442e-bb78-fb20916a4679.png" /></p><p>Ok guys, if you want it - letâ€™s use such an approach.</p><hr><h2 id="Depending-on-your-feedback-core-js-will-soon-follow-one-of-the-following-ways"><a href="#Depending-on-your-feedback-core-js-will-soon-follow-one-of-the-following-ways" class="headerlink" title="Depending on your feedback, core-js will soon follow one of the following ways:"></a>Depending on your feedback, <code>core-js</code> will soon follow one of the following ways:</h2><ul><li><p><strong>Appropriate financial backing</strong></p><p>I hope that at least after reading this post corporations, small companies, and developers will finally think about the sustainability of their development stack and will properly back <code>core-js</code> development. In this case, <code>core-js</code> will be appropriately maintained and Iâ€™ll be able to concentrate on adding <a href="#roadmap">a new level of functionality</a>.</p><p>The scale of the necessary work goes through the roof, one of me is no longer enough - I canâ€™t work more physically. Some work, for example, improving test coverage or documentation, is simple enough and takes a lot of time, but itâ€™s not the kind of work that volunteers want to do - I donâ€™t remember any PRs with improving test coverage of existent features. So it makes sense to attract at least one or two developers (at least students, better - higher level) on a paid basis.</p><p>Taking into account the involvement of additional maintainers and other expenses, I think that at this moment about 30 thousand dollars for a month could be enough. More money - better product and faster development. A couple times less - it makes sense to resume the work on <code>core-js</code> full-time alone - sure, not as productive as it could be with a team.</p></li><li><p><strong>I may be hired by a company where I will be able to work on Open-Source and Web standards</strong></p><p>and that will give me the resources required for continuation of work.</p></li><li><p><strong><code>core-js</code> will become a commercial project</strong> if it will not have appropriate support from users</p><p>Itâ€™s problematic to create a commercial infrastructure around the current <code>core-js</code> packages, so most likely the new <code>core-js</code> major release will change the license. The free version will be significantly limited. All extra functionality will be paid for. <code>core-js</code> will continue to evolve appropriately and, in the scope of this project, will be created many new tools for ensuring web compatibility. Sure, it will significantly reduce the spread of <code>core-js</code> and will cause problems for many developers, however, even some paying customers could be enough and my family will have money for paying bills.</p></li><li><p><strong>Slow death</strong> in case Iâ€™ll see that <code>core-js</code> is not required</p><p>I have many ideas for commercial projects, I have a lot of good job offers - all this takes time, which now goes to <code>core-js</code> maintenance. It does not mean that Iâ€™ll immediately completely stop to maintain <code>core-js</code> - Iâ€™ll just maintain pro-rata donations. If they are at the current level, it will be only a few hours of maintenance a month instead of hundreds now. The project will stop the upgrowth - maybe minor bugs will be fixed and compatibility data will be updated - this time is not enough for more. After a while, <code>core-js</code> will become just useless and will die.</p></li></ul><p>I still hope for the first outcome since <code>core-js</code> is one of the key components of the modern digital infrastructure, but, looking at the current and the past, I am mentally getting ready for other options.</p><h2 id="I-will-answer-in-advance-some-angry-comments-that-I-see-regularly-and-that-will-definitely-be-after-this-post"><a href="#I-will-answer-in-advance-some-angry-comments-that-I-see-regularly-and-that-will-definitely-be-after-this-post" class="headerlink" title="I will answer in advance some angry comments that I see regularly and that will definitely be after this post:"></a>I will answer in advance some angry comments that I see regularly and that will definitely be after this post:</h2><ul><li><p><strong>â€œNot a problem, we will just pin the <code>core-js</code> dependency.â€</strong></p><p>Unlike most projects, <code>core-js</code> should be on the bleeding edge since <code>core-js</code> allows you to be on the bleeding edge of JavaScript - use the most recent JavaScript features and donâ€™t think about engines compatibility and bugs. However, the library has a good safety margin for the future. Maybe for a year or a couple, you will not have serious problems. After that, they will appear - polyfills will be obsolete, but still will be present in your bundles and will be just useless ballast. You will not be able to use new features of the language and will face new bugs in JS engines.</p></li><li><p><strong>â€œItâ€™s open-source, we will fork it, fuck off.â€</strong></p><p>I see such comments regularly, someone even tries to scare me with a fork. Iâ€™ve said already too many times that <strong>if someone will fork and properly maintain <code>core-js</code>, Iâ€™d be happy</strong> - it makes no sense just to fork it without maintenance. Now I donâ€™t see even anyone who tries to add to <code>core-js</code> something significant or at least contribute regularly. It should react on each new JavaScript engine release to update compatibility data, fix or at least take into account each new (no matter how significant) bug from each engine, take a look and implement each new JavaScript feature that possible, do it maximally properly, test and take into account the specifics of each version of each modern or legacy engine - itâ€™s a hard work - are you ready and have the required knowledge and time for that? For example, when I was in prison, Babel said that they are not:</p><p align="center"><img alt="babel" width="800" src="https://user-images.githubusercontent.com/2213682/154870832-36318fdd-c5a0-45ce-aaed-2d50371a2976.png" /></p></li><li><p><strong>â€œWe donâ€™t need <code>core-js</code>, many alternative projects are available.â€</strong></p><p>Nobody is holding you. But where are those alternatives in real life? Sure, <code>core-js</code> is not the only polyfill of the JavaScript standard library. But all other projects are <a href="https://npm-stat.com/charts.html?package=core-js&package=core-js-pure&package=es6-shim&from=2014-11-18">tens</a> <a href="https://user-images.githubusercontent.com/2213682/205467964-2dfcce78-5cdf-4f4f-b0d6-e37c02e1bf01.png">times</a> less popular than <code>core-js</code>, and itâ€™s not unreasonable - all of them provide only a little part of <code>core-js</code> functionality, they are not enough proper and complex, the number of cases where they can be used is significantly limited, they canâ€™t be properly integrated into your project in such simple way and have other significant problems. In case of the existence of proper alternatives, I would stop working on <code>core-js</code> a long time ago.</p></li><li><p><strong>â€œWe can drop IE support, so we no longer need polyfills.â€</strong></p><p>As I wrote a little above, nobody is holding you. In some cases, polyfills are really not required and you can avoid them, but itâ€™s only a little part of all cases - almost the same as it was in the IE era. Of course, if you donâ€™t need IE support, polyfills will not expand your possibilities as much as it was with adding ES6 support to IE8. But even the most modern engines do not implement the most modern JavaScript features. Even the most modern engines contain bugs. Are you pretty sure that you and your team perfectly know all limitations of all engines that you support and can work around them? Even I sometimes may forget some moments.</p></li><li><p><strong>â€œYou are an asshole, we will expel you from the FOSS community.â€</strong></p><p>Yes, youâ€™re right. Iâ€™m such an asshole that gives you a chance to use modern JavaScript features in the real life, have been solving your cross-engine compatibility issues for many years, and had sacrificed for this more than anyone else. Iâ€™m such an asshole that just wants his son to be well-fed, wants his family has money to pay bills and does not need anything. Some options above suppose my leaving FOSS in favor of commercial software, so will see.</p></li></ul><hr><p>Now letâ€™s move away from the negative to the second half of this post where we will talk about things that would be nice to implement in <code>core-js</code> and problems of polyfilling at all.</p><h1 id="Roadmap"><a href="#Roadmap" class="headerlink" title="Roadmap"></a>Roadmap</h1><p>JavaScript, browsers, and web development are evolving with amazing speed. The time when almost all of the <code>core-js</code> modules were required for all browsers has gone. The latest browsers have good standards support and, with common use cases, they need only some percentage of the <code>core-js</code> modules for the most recent language features and bug fixes. Some companies are already dropping support for IE11 which recently was â€œburiedâ€ once more. However, even without IE, old browsers will always be, bugs will happen even in modern browsers, and new language features will appear regularly and anyway they will appear in browsers with a delay - so, if we want to use modern JS in development and minimize possible problems, polyfills stay with us for a long time, but they should evolve.</p><p>Here I will not (almost) write about adding new or improving existing specific polyfills (but, sure, itâ€™s one of the main parts of <code>core-js</code> development), letâ€™s talk about some other crucial moments without focusing on minor things. If it is decided to make a commercial project from <code>core-js</code>, the roadmap will be adapted to this condition.</p><p>I am trying to keep <code>core-js</code> as compact as possible, but one of the main conceptions that it should follow is to be maximally useful in the modern web - the client should not load any unnecessary polyfills and polyfills should be maximally compact and optimized. Currently, a maximal <code>core-js</code> bundle size with early-stage proposals <a href="https://bundlephobia.com/package/core-js">is about 220KB minified, 70KB gzipped</a> - itâ€™s not a tiny package, itâ€™s big enough - itâ€™s like jQuery, LoDash, and Axios together - the reason is that the package covers almost the entire standard library of the language. The individual weight of each component is several times less than the weight of quite correct alternatives. Itâ€™s possible to load only the <code>core-js</code> features that you use and in minimal cases, the bundle size can be reduced to some kilobytes. When <code>core-js</code> is used correctly, this is usually a couple of tens of kilobytes - however, there is something to strive for. <a href="https://almanac.httparchive.org/en/2022/media#bytesizes">Most pages contain pictures larger</a> even the full <code>core-js</code> bundle, most users have Internet speed in dozens of Mbps, so why is this concept so significant?</p><p>I donâ€™t want to repeat old posts about <a href="https://medium.com/dev-channel/the-cost-of-javascript-84009f51e99e">the cost of JavaScript</a> in detail where you can read why adding JS increases the time when the user can start interacting with the page much more than adding a similar size picture - itâ€™s not only downloading, itâ€™s also parsing, compiling, evaluating the script, it blocks the page rendering.</p><p>In too many places, mobile Internet is not perfect and still 3G or even 2G. In the case of 3G, downloading of one full copy of <code>core-js</code> can take a couple of seconds. However, pages contain more than one copy of <code>core-js</code> and many other duplicated polyfills too often. Some (mainly mobile) Internet providers have very limited â€œunlimitedâ€ tariff plans and after some gigabytes reduce the speed to some Kbps. Internet speed is also often limited for many other reasons.</p><p>The speed of the page loading equals the revenue.</p><p align="center"><img alt="conversion" width="600" src="https://user-images.githubusercontent.com/2213682/217910389-7320a726-890d-4f34-a941-f51a069f01a1.png" /></p><blockquote><p>Illustration is from a <a href="https://medium.com/@vikigreen/impact-of-slow-page-load-time-on-website-performance-40d5c9ce568a">random post</a> by googling</p></blockquote><p>The size of <code>core-js</code> is constantly growing because of adding new or improving existing polyfills. This issue also is a block for adding some big polyfills - adding <code>Intl</code>, <code>Temporal</code>, and some other features to <code>core-js</code> could increase the maximal bundle size a dozen times to some megabytes.</p><p>One of the main <code>core-js</code> killer features is that it can be optimized with the usage of Babel, SWC, or manually, however, current approaches solve only a part of the problem. To properly solve them, the modern web requires a new generation of the toolkit that could be simply integrated into the current development stack. And in some cases, as you will see below, this toolkit could help to make the size of your website pages even less than just without <code>core-js</code>.</p><p>I already wrote about some of this in <a href="https://github.com/zloirock/core-js/blob/master/docs/2019-03-19-core-js-3-babel-and-a-look-into-the-future.md#look-into-the-future"><strong><code>core-js@3</code>, Babel and a look into the future</strong> post</a>, but that were just raw ideas. Now itâ€™s in the stage of experimentation or even implementation.</p><p>Since the future of the project is in doubt, it makes no sense to write any specific dates here, I do not promise that all of this will be done shortly, but this is what should be strived for.</p><hr><h3 id="New-major-version"><a href="#New-major-version" class="headerlink" title="New major version"></a>New major version</h3><p><code>core-js@3</code> was released about 4 years ago - itâ€™s too much. Itâ€™s not a big problem for me to add some breaking changes (rather ensuring backward compatibility is often a challenge) and to mark a new version as a major release - itâ€™s a big problem for users.</p><p>At this moment, about 25% of <code>core-js</code> downloads are critically obsolete <code>core-js@2</code>. Many users wanna update it to <code>core-js@3</code>, but because their dependencies use <code>core-js@2</code> they still use the obsolete version for avoiding multiple copies (I saw such issues on GitHub in too many projects). Too frequent major updates would worsen such cases even more.</p><p>However, itâ€™s better not to get too obsessed with compatibility with older versions. The library contains too much thatâ€™s not removed only for compatibility reasons. The absence of some long-needed breaking changes for someone will negatively affect the future. Judging by how the standards, the ecosystem, and the Web change, and how legacy accumulates, itâ€™s better to release a new major version each 2-3 years.</p><p>Adding all the new things that we would like to see in the new major version would take many years, which is unacceptable. However, <code>core-js</code> follows <a href="https://semver.org/">SemVer</a> and makes sense to release a new major release at first with breaking changes (some of them below), most of the new features can be added in minor releases. In this case, such a release can take just about 2-3 months of full-time work and it can be the first <code>core-js</code> version that reduced the size compared to the previous -)</p><h3 id="core-js-package-directly"><a href="#core-js-package-directly" class="headerlink" title="core-js package directly"></a><code>core-js</code> package directly</h3><h3 id="Drop-critically-obsolete-engines-support"><a href="#Drop-critically-obsolete-engines-support" class="headerlink" title="Drop critically obsolete engines support"></a>Drop critically obsolete engines support</h3><p>IE is dead. However, not for all - for many different reasons, someone is still forced to make or maintain websites that should work in IE. <code>core-js</code> is one of the main tools that makes life easier for them.</p><p>At this moment, <code>core-js</code> tries to support all possible engines and platforms, even ES3 - IE8-. But only a small part of developers using <code>core-js</code> needs support of ES3 engines - at this moment, the IE8- segment of browsers is about 0.1%. For many other users, it causes problems - bigger bundle size and slower runtime execution.</p><p>The main problem comes from supporting ES3 engines: most modern ES features are based on ES5 features, which arenâ€™t available in those old engines. Some features (like getters &#x2F; setters) canâ€™t be polyfilled, so some polyfills (like typed arrays) canâ€™t work in IE8- complete. Some others require heavy workarounds. In case you need to polyfill only some simple features, the main part of <code>core-js</code> size in the bundle is the implementation of ES5 methods (in the case of polyfilling a lot of features, itâ€™s only some percent, so this problem is related mainly to minimalistic bundles).</p><p>Even simple replacing internal fallbacks of ES5 features to implementations to direct usage of those native features reduces minimalistic <code>core-js</code> bundle size 2+ times. After reworking the architecture, it will be reduced even more.</p><p>The IE9-10 segment of browsers already is also small - at this moment, the same 0.1%. But it makes no sense to consider dropping their support without dropping support of some other obsolete engines with similar or even greater restrictions, for example, Android 4.4.4 - in total, itâ€™s about 1%. Raising the lower bar higher than ES5 is a more difficult decision at least because of some non-browser engines. However, even dropping IE11 support in the future will not give so many benefits as dropping IE8- support now.</p><h3 id="ECMAScript-modules-and-modern-syntax"><a href="#ECMAScript-modules-and-modern-syntax" class="headerlink" title="ECMAScript modules and modern syntax"></a>ECMAScript modules and modern syntax</h3><p>At this moment, <code>core-js</code> uses CommonJS modules. For a long time, it was the most popular JavaScript modules format, but now ECMAScript provides its own modules format and itâ€™s already very popular and supported <em>almost</em> everywhere. For example, Deno, like browsers, doesnâ€™t support CommonJS, but supports ES modules. <code>core-js</code> should get an ECMAScript modules version in the near future. But, for example, on NodeJS, ECMAScript modules are supported only in the modern versions - but on NodeJS <code>core-js</code> should work without transpiling &#x2F; bundling even in ancient versions, <a href="https://github.com/electron/electron/issues/21457">Electron still does not support it</a>, etc., so itâ€™s problematically to get rid of the CommonJS version immediately.</p><p>The situation with the rest of modern syntax is not so obvious. At this moment, <code>core-js</code> uses ES3 syntax. Initially, it was for maximal optimization since anyway it should be pre-transpiled to old syntax. But it was only initially. Now, <code>core-js</code> just canâ€™t be properly transpiled in userland and should be ignored in transpiler configs. Why? Letâ€™s take a look, for example, at Babel transforms:</p><ul><li>A big part of transforms rely on modern built-ins, for example, transforms which use <code>@@iterator</code> protocol - but <code>Symbol.iterator</code>, iterators, and all other related built-ins are implemented in <code>core-js</code> and absent before <code>core-js</code> loading.</li><li>Another problem is transpiling <code>core-js</code> with transforms that inject <code>core-js</code> polyfills. Obviously, we canâ€™t inject polyfills into the place where they are implemented since it is circular dependencies.</li><li>Some other transforms applied on <code>core-js</code> just break its internals - for example, <a href="https://babeljs.io/docs/en/babel-plugin-transform-typeof-symbol">the <code>typeof</code> transform</a> (that should help to work with polyfilled symbols) breaks the <code>Symbol</code> polyfill.</li></ul><p>However, the usage of modern syntax in polyfills code could significantly improve the readability of the source code, reduce the size and in some cases improve performance if polyfill is bundled for a modern engine, so itâ€™s time to think about rewriting <code>core-js</code> to modern syntax, making it transpilable by getting around those problems and publishing versions with different syntax for different use cases.</p><h3 id="Web-standards-polyfills"><a href="#Web-standards-polyfills" class="headerlink" title="Web standards polyfills"></a>Web standards polyfills</h3><p>Iâ€™m thinking about adding the maximum possible web standards (not only ECMAScript and closely related features) support to <code>core-js</code> for a long time. First - about the remaining features from the <a href="https://common-min-api.proposal.wintercg.org/#index">Minimum Common Web Platform API</a> (<a href="https://blog.cloudflare.com/introducing-the-wintercg/">what is it?</a>), but not only about them. It could be good to have one bulletproof polyfills project for all possible web development cases, not only for ECMAScript. At the moment, the situation with the support of web standards in browsers is much worse than with the support of modern ECMAScript features.</p><p>One of the barriers preventing the addition of web standards polyfills to <code>core-js</code> was significantly increasing bundles size, but I think that with current technics of loading only required polyfills and technics which you could see below, we could add polyfills of web standards to <code>core-js</code>.</p><p>But the main problem is that it should not be naive polyfills. As I wrote above, now the correctness of ECMAScript features almost everywhere is not very bad, but we canâ€™t say it about web platform features. For example, <a href="https://github.com/zloirock/core-js#structuredclone">a <code>structuredClone</code> polyfill</a> was relatively recently added. During work on it, taking into account the dependencies, I faced <strong>hundreds</strong> of different JavaScript engines bugs - I donâ€™t remember when I saw something like that when I added new ECMAScript features - for this reason, the work on this simple method, that naively could be implemented for a couple of hours, with resolving all issues and adding required features, lasted for several months. In the case of polyfills, better to do nothing than to do bad. The proper testing, polyfilling, and ensuring cross-platform compatibility web platform features require even more significant resources than what I spend on ECMAScript polyfills. So adding the maximum possible web standards support to <code>core-js</code> will be started only in case I have such resources.</p><hr><h3 id="New-approaches-to-tooling-are-more-interesting"><a href="#New-approaches-to-tooling-are-more-interesting" class="headerlink" title="New approaches to tooling are more interesting"></a>New approaches to tooling are more interesting</h3><p>Someone will ask why itâ€™s here. What do tools, like transpilers, have to do with the <code>core-js</code> project? <code>core-js</code> is just a polyfill, and those tools are written and maintained by other people. Once I also thought that it is enough to write a great project with a good API, explain its possibilities, and when it becomes popular, it will acquire an ecosystem with proper third-party tools. However, over the years, I realized that this will not happen if you do not do, or at least not control, it yourself.</p><p>For example, for many years, instance methods were not able to be polyfilled through Babel <code>runtime</code>, but I explained how to do it too many times. Polyfilling via <code>preset-env</code> was not able to be used in real-life projects because of incomplete detection of required polyfills and a bad source of compatibility data, which I explained from the beginning. Because of such problems, I was forced <a href="https://github.com/babel/babel/pull/7646">to almost completely rewrite those tools in 2018-2019, for the <code>core-js@3</code> release</a>, after that we got the current state of statically analysis-based tools for polyfills injecting.</p><p>I am sure that if the approaches below are not implemented in the scope of <code>core-js</code>, they will not be properly implemented at all.</p><hr><p>For avoiding some questions related to the following text: <code>core-js</code> tools will be moved to scoped packages - tools like <code>core-js-builder</code> and <code>core-js-compat</code> will become <code>@core-js/builder</code> and <code>@core-js/compat</code> respectively.</p><h3 id="Not-only-Babel-plugins-for-transpilers-and-module-bundlers"><a href="#Not-only-Babel-plugins-for-transpilers-and-module-bundlers" class="headerlink" title="Not only Babel: plugins for transpilers and module bundlers"></a>Not only Babel: plugins for transpilers and module bundlers</h3><p>At this moment, some users are forced to use Babel only due to the need to automatically inject &#x2F; optimize required polyfills. At this moment, Babelâ€™s <a href="https://babeljs.io/docs/en/babel-preset-env#usebuiltins"><code>preset-env</code></a> and <a href="https://babeljs.io/docs/en/babel-plugin-transform-runtime#core-js-aliasing"><code>runtime</code></a> are the only enough good and well-known ways to optimize usage of <code>core-js</code> with statical analysis. It happened historically because I helped Babel with polyfills. It does not mean that itâ€™s the only or the best place where it could be done.</p><p>Babel is only one of many transpilers. TypeScript is another popular option. Other transpilers are gaining popularity now, for example, <a href="https://swc.rs/">SWC</a> (that already contains <a href="https://swc.rs/docs/configuration/supported-browsers">a tool for automatic polyfilling &#x2F; <code>core-js</code> optimization</a>, but itâ€™s still not perfect). However, why do we talk about the transpilers layer? The bundlers layer and tools like <code>webpack</code> or <a href="https://esbuild.github.io/"><code>esbuild</code></a> (that also contains an integrated transpiler) are more interesting for the optimization of polyfills. <a href="https://rome.tools/">Rome</a> in development for several years and still is not ready, but its conception looks very promising.</p><p>One of the main problems with statical analysis-based automatic polyfilling on the transpiler layer is that usually not all files from the bundle are transpiled - for example, dependencies. If some of your dependencies need a polyfill of a modern built-in feature, but you donâ€™t use this built-in in your userland code, this polyfill will not be added to the bundle. Unnecessary polyfills import also will not be removed from your dependencies (see below). Moving automatic polyfilling to the bundlers layer fixes this problem.</p><p>Sure, writing or using such plugins in many places is difficult compared to Babel. For example, <a href="https://github.com/microsoft/TypeScript/issues/14419">without some extra tools now you canâ€™t use plugins for custom transforms in TypeScript</a>. However, there are always options and there would be a desire.</p><p>Automatic polyfilling &#x2F; optimization of <code>core-js</code> should be available not only in Babel. Itâ€™s almost impossible to write and maintain plugins for all transpilers and bundlers in the scope of the <code>core-js</code> project, but itâ€™s possible to do those things:</p><ul><li>Improve provided by <code>core-js</code> data (<code>@core-js/compat</code>) and tools for integration with third-party projects, they should be comprehensive. For example, â€œbuilt-in definitionsâ€ are still on Babelâ€™s side that causing problems with their reuse in other projects.</li><li>Since some tools already provide <code>core-js</code> integration, makes sense to help them, not only Babel.</li><li>Makes sense to write and maintain plugins for some significant tools in the scope of the <code>core-js</code> project. What? Will see.</li></ul><h3 id="Polyfills-collector"><a href="#Polyfills-collector" class="headerlink" title="Polyfills collector"></a>Polyfills collector</h3><p>One of the problems of the statical analysis-based automatic polyfilling on the files layer (<code>usage</code> polyfilling mode of Babel <code>preset-env</code>) was explained above, but itâ€™s not the only problem. Letâ€™s talk about some others.</p><p>Your dependencies could have their own <code>core-js</code> dependencies and they can be incompatible with the <code>core-js</code> version that you use at the root of your project, so injecting <code>core-js</code> imports to your dependencies directly could cause breakage.</p><p>Projects often contain multiple entry points, multiple bundles, and, in some cases, the proper moving of all <code>core-js</code> modules to one chunk can be problematic and it could cause duplication of <code>core-js</code> in each bundle.</p><p>I already posted <a href="https://gist.github.com/zloirock/7331cec2a1ba74feae09e64584ec5d0e">the <code>core-js</code> usage statistics</a> above. In many cases, you could see the duplication of <code>core-js</code> - and itâ€™s only on the first loaded page of the application. Sometimes itâ€™s even like what we see on the Bloomberg website:</p><p align="center"><img alt="bloomberg" width="720" src="https://user-images.githubusercontent.com/2213682/218467140-c475482c-24b0-4420-b510-32f6e2a15743.png" /></p><p><a href="https://user-images.githubusercontent.com/2213682/115339234-87e1f700-a1ce-11eb-853c-8b93b7fc5657.png">Some time ago this number was even more.</a> Of course, a such number of copies and various versions of <code>core-js</code> is not something typical, but a situation with some copies of <code>core-js</code> is too common and you could see it on about half of the websites with <code>core-js</code>, so for preventing this <strong>required a way to collect all polyfills from all entry points, bundles and dependencies of the project in one place.</strong></p><p>Letâ€™s call a tool for this <code>@core-js/collector</code>. This tool should take an entry point or a list of entry points and should use the same statical analysis thatâ€™s used in <code>preset-env</code>, however, this tool should not transform code or inject anything, should check full dependencies trees and should return a full list of required <code>core-js</code> modules. Require simple ways to integrate this into the current development stack. One of those ways can be a new polyfilling mode in plugins, letâ€™s call it <code>collected</code> - that will allow loading all collected polyfills of the application in one place and remove unnecessary (see below).</p><h3 id="Removing-unnecessary-third-party-polyfills"><a href="#Removing-unnecessary-third-party-polyfills" class="headerlink" title="Removing unnecessary third-party polyfills"></a>Removing unnecessary third-party polyfills</h3><p>Now itâ€™s typical to see, for example, a dozen copies of <code>Promise</code> polyfills with the same functionality on a website - you load only one <code>Promise</code> polyfill from <code>core-js</code>, but some of your dependencies load <code>Promise</code> polyfills by themself - <code>Promise</code> polyfill from one more <code>core-js</code> copy, <code>es6-promise</code>, <code>promise-polyfill</code>, <code>es6-promise-polyfill</code>, <code>native-promise-only</code>, etc. But itâ€™s just ES6 <code>Promise</code> which is already completely covered by <code>core-js</code> - and available in most browsers without polyfills. Sometimes, due to this, the size of all polyfills in the bundle swells to several megabytes.</p><p>Itâ€™s not an ideal illustration for this issue, many other examples would have been better, but since above we started to talk about the Bloomberg website, letâ€™s take a look at this site one more time. We have no access to the source code, however, we have, for example, such an awesome tool as <a href="https://bundlescanner.com/website/bloomberg.com%2Feurope/all"><code>bundlescanner.com</code></a> (I hope that the Bloomberg team will fix it ASAP, so the result could be outdated).</p><p align="center"><img alt="bundlescanner" width="720" src="https://user-images.githubusercontent.com/2213682/181242201-ec16dd17-f4dd-4706-abf5-36e764c72e22.png" /></p><p>As shown in the practice, since such analysis itâ€™s not a simple work, this tool detects only about half of librariesâ€™ code. However, in addition to 4.5 hundred kilobytes of <code>core-js</code>, we see hundreds of kilobytes of other polyfills - many copies of <code>es6-promise</code>, <code>promise-polyfill</code>, <code>whatwg-fetch</code> (<a href="#web-standards-polyfills">for the above reason</a>, <code>core-js</code> <em>still</em> does not polyfill it), <code>string.prototype.codepointat</code>, <code>object-assign</code> (itâ€™s a <em>ponyfill</em> and about them the next section), <code>array-find-index</code>, etc.</p><p>But how many polyfills were not detected? Whatâ€™s the size of all polyfills that this website loads? It seems a couple of megabytes. However, even for <em>very</em> old browsers, maximally a hundred kilobytes more than be enoughâ€¦ And this situation is not something unique - itâ€™s a too common problem.</p><p>Since many of those polyfills contain just a subset of <code>core-js</code> functionality, in the scope of <code>@core-js/compat</code>, we could collect data that will show if a module is an unnecessary third-party polyfill or not and, if this functionality is contained in <code>core-js</code>, a transpiler or bundler plugin will remove the import of this module or will replace it to the import of suitable <code>core-js</code> modules.</p><p>The same approach could be applied to rid dependencies from old <code>core-js</code> versions.</p><h3 id="Globalization-of-pure-version-polyfills-ponyfills"><a href="#Globalization-of-pure-version-polyfills-ponyfills" class="headerlink" title="Globalization of pure version polyfills &#x2F; ponyfills"></a>Globalization of pure version polyfills &#x2F; ponyfills</h3><p>One more popular and similar issue is a duplication of polyfills from global and pure <code>core-js</code> versions. The pure version of <code>core-js</code> &#x2F; <code>babel-runtime</code> is intended for usage in libraries code, so itâ€™s a normal situation if you use a global version of <code>core-js</code> and your dependencies also load some copies of <code>core-js</code> without global namespace pollution. They use different internals and itâ€™s problematic to share similar code between them.</p><p>Iâ€™m thinking about resolving this issue on the transpiler or bundler plugins side similarly to the previous one (but, sure, a little more complex) - we could replace imports from the pure version with imports from the global version and remove polyfills unnecessary for the target engines.</p><p>That also could be applied to third-party ponyfills or obsolete libraries that implement something already available in the JS standard library. For example, usage of <code>has</code> package can be replaced by <code>Object.hasOwn</code>, <code>left-pad</code> by <code>String.prototype.padStart</code>, some <code>lodash</code> methods by related modern built-in JS methods, etc.</p><h3 id="Service"><a href="#Service" class="headerlink" title="Service"></a>Service</h3><p>Loading the same polyfills, for example, in IE11, iOS Safari 14.8, and the latest Firefox is wrong - too much dead code will be loaded in modern browsers. At this moment, a popular pattern is a usage 2 bundles - for â€œmodernâ€ browsers that will be loaded if native modules are supported, <code>&lt;script type=&quot;module&quot;&gt;</code>, and for obsolete browsers which do not support native modules, <code>&lt;script nomodule&gt;</code> (a little harder in a practice). For example, Lighthouse can detect some cases of polyfills that are not required with the <code>esmodules</code> target, <a href="https://googlechrome.github.io/lighthouse/viewer/?psiurl=https://www.bloomberg.com/europe&strategy=mobile&category=performance">letâ€™s check the long-suffering Bloomberg website</a>:</p><p align="center"><img alt="lighthouse" width="720" src="https://user-images.githubusercontent.com/2213682/148652288-bd6e452a-f6ba-417d-8972-9d98d2f715a4.png" /></p><p>Lighthouse shows just about 200KB in all resources, 0.56s. Letâ€™s remember that the site contains about a couple of megabytes of polyfills. <a href="https://github.com/GoogleChrome/lighthouse/issues/13440">Now Lighthouse detects less than half of the features that it should</a>, but even with another half, itâ€™s only a little part of all loaded polyfills. Where are the rest? Are they really required for a modern browser? The problem is that the lower bar of native modules support is too low - â€œmodernâ€ browsers, in this case, will need most of the polyfills of stable JS features that are required for old IE, so a part of polyfills is shown in the â€œunused JavaScriptâ€ section that takes 6.41s, a part is not shown at allâ€¦</p><p>From the very beginning of work on <code>core-js</code>, Iâ€™m thinking about creating a web service that gives only the polyfills that are needed for the requesting browser.</p><p>The availability of a such service is the only moment in which <code>core-js</code> have lagged behind another project. <a href="https://polyfill.io/"><code>polyfill-service</code></a> project from Financial Times is based on this conception and itâ€™s a great service. The main problem with this project - itâ€™s a great service that uses bad polyfills. This project polyfill only a little part of ECMAScript features that <code>core-js</code> provides, the main part of polyfills are third-party and are not designed to work together, too many donâ€™t properly follow specs, too raw or just dangerous for usage (for example, <a href="https://github.com/Financial-Times/polyfill-library/blob/554248173eae7554ef0a7776549d2901f02a7d51/polyfills/WeakMap/polyfill.js"><code>WeakMap</code> looks like a step-by-step implementation of the spec text</a>, but the absence of some non-spec magic cause memory leaking and linear access time that makes it harmful, more other - instead of patching, fixing and reusage of native implementation in engines like IE11 where itâ€™s available, but does not accept an iterable argument, <a href="https://github.com/Financial-Times/polyfill-library/blob/554248173eae7554ef0a7776549d2901f02a7d51/polyfills/WeakMap/detect.js"><code>WeakMap</code> will be completely replaced</a>). Some good developers try to fix this from time to time, but polyfills themselves are given unforgivably little time, so itâ€™s still too far from something that could be recommended for usage.</p><p>Creating such a service in the proper form requires the creation and maintenance of many new components. I work on <code>core-js</code> alone, the project does not have the necessary support from any company, and the development is carried out with pure enthusiasm, I need to look for funds to feed myself and my family, so I have no time and other resources required for that. However, in the scope of other tasks, I already made some required components, and discussions with some users convinced me that creating a maximally simplified service that you could start on your own server could be enough.</p><p>We already have the best set of polyfills, the proper compatibility data, and the builder which already could create a bundle for a target browser. Already mentioned above <code>@core-js/collector</code> could be used for optimization - getting only the required subset of modules, plugins for transpilers &#x2F; bundlers - for removing unnecessary polyfills. Missed a tool for the normalization of the user agent and a service that will bind those components together. Letâ€™s call it <code>@core-js/service</code>.</p><h4 id="How-should-it-look-in-the-perfect-world"><a href="#How-should-it-look-in-the-perfect-world" class="headerlink" title="How should it look in the perfect world?"></a>How should it look in the perfect world?</h4><ul><li>You bundle your project. A plugin on the bundlers side removes all polyfills import (including third-party, without global pollution, from your dependencies, etc.). Your bundles will not contain any polyfills.</li><li>You run <code>@core-js/service</code>. When you run it, <code>@core-js/collector</code> checks all your frontend codebase, all your entry points, including dependencies, and collects a list of all required polyfills.</li><li>A user loads a page and requests a polyfill bundle from the service. The service gives the client a bundle compiled for the target browser that contains the required subset of polyfills and uses allowed syntax.</li></ul><p>So, with this complex of tools, modern browsers will not load polyfills at all if they are not required, old browsers will load only required and maximally optimized polyfills.</p><hr><p>Most of the above are about minimizing the size of polyfills sent to the client - but these are just a little subset of the concepts that it would be good to implement in the scope of <code>core-js</code>, however, I think that itâ€™s enough for understanding that still required a huge work and this work could significantly improve web development. Whether it will be implemented in practice and whether it will be available as FOSS or as a commercial project is up to you.</p><h1 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h1><p>This was the last attempt to keep <code>core-js</code> as a free open-source project with a proper quality and functionality level. It was the last attempt to convey that there are real people on the other side of open-source with families to feed and problems to solve.</p><p>If you or your company use <code>core-js</code> in one way or another and are interested in the quality of your supply chain, support the project:</p><ul><li><a href="https://opencollective.com/core-js"><strong>Open Collective</strong></a></li><li><a href="https://patreon.com/zloirock"><strong>Patreon</strong></a></li><li><a href="https://boosty.to/zloirock"><strong>Boosty</strong></a></li><li><strong>Bitcoin ( bc1qlea7544qtsmj2rayg0lthvza9fau63ux0fstcz )</strong></li></ul><p><strong>Write me if you want to offer a good job on Web-standards and open-source.</strong></p><hr><p><strong>Feel free to add comments to this post <a href="https://github.com/zloirock/core-js/issues/1179">here.</a></strong></p><p><strong><a href="https://github.com/zloirock">Denis Pushkarev</a>, February 14th 2023</strong></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>è®°å½•SpringSecurityçš„ä¸€æ¬¡å®è·µ</title>
      <link href="/2023/12/08/%E8%AE%B0%E5%BD%95SpringSecurity%E7%9A%84%E4%B8%80%E6%AC%A1%E5%AE%9E%E8%B7%B5/"/>
      <url>/2023/12/08/%E8%AE%B0%E5%BD%95SpringSecurity%E7%9A%84%E4%B8%80%E6%AC%A1%E5%AE%9E%E8%B7%B5/</url>
      
        <content type="html"><![CDATA[<p>[toc]</p><h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>&ensp;&ensp;åœ¨é¡¹ç›®ä¸­éœ€è¦æœ‰ç”¨æˆ·å’Œç®¡ç†å‘˜ç™»å½•çš„åŠŸèƒ½ï¼Œç”¨æˆ·ç™»é™†åè§‚çœ‹è§†é¢‘è®°å½•è§‚çœ‹æ—¶é•¿ï¼Œèµ·å…ˆé‚£åšçš„çœŸçš„æ—¶å¤ªæ½¦è‰äº†å®Œå…¨æ²¡æœ‰æ„è¯†ï¼Œuser ä¸€å¼ è¡¨ï¼Œadmin ä¸€å¼ è¡¨ï¼Œç„¶åä¸åŒçš„ RequestMappingï¼Œåæ¥çŒ›ç„¶æƒŠé†’ï¼Œé‚£ç”¨æˆ·ä¸æ˜¯å¯ä»¥åœ¨ä¸åŒåœ°æ–¹ä¸€èµ·ç™»å½•ï¼Œä¸€èµ·çœ‹è§†é¢‘åˆ·å¤šå€çš„æ—¶é•¿äº†ä¹ˆï¼Œè¿™å¯ä¸è¡Œå•Šï¼Œåæ¥ç™¾åº¦äº†ä¸€å¤§åœˆï¼Œæœ€åå†³å®šè¿˜æ˜¯ç”¨ springsecurityï¼Œå…¶å®ä¹Ÿä¸æ˜¯å¾ˆç¡®å®šç”¨å“ªä¸ªï¼Œä½†æ˜¯å°±æ„Ÿè§‰å®ƒä¸»æµä¸€ç‚¹?</p><p>&ensp;&ensp;ä¸€å¼€å§‹çœ‹åˆ«äººçš„åšå®¢çš„æ—¶å€™éƒ½æ˜¯ä¸€å¤´é›¾æ°´ï¼Œè¿™æ€ä¹ˆæ€ä¹ˆå°±å¯ä»¥äº†ï¼Œå¾ˆå°‘æœ‰å¯¹æ¯ä¸ªéƒ¨åˆ†æœ‰è¯¦ç»†çš„è§£é‡Šçš„ï¼Œåæ¥çœ‹äº†æ¾å“¥çš„æ•™ç¨‹æ‰æ¸æ¸çš„ç†è§£ï¼Œé“¾æ¥ï¼š<a href="http://www.javaboy.org/springsecurity/">æ±Ÿå—ä¸€ç‚¹é›¨</a>ï¼Œè¿™ç¯‡åšå®¢ä¹Ÿæ˜¯çœ‹äº†æ¾å“¥æ–‡ç« åçš„ä¸€æ¬¡æ€»ç»“ã€‚</p><hr><h1 id="ä¸€ã€ç®€è¿°"><a href="#ä¸€ã€ç®€è¿°" class="headerlink" title="ä¸€ã€ç®€è¿°"></a>ä¸€ã€ç®€è¿°</h1><p>SpringSecurity æ˜¯ä¸€ä¸ªæƒé™ç®¡ç†æ¡†æ¶ï¼ŒåŒ…æ‹¬éªŒè¯ç”¨æˆ·çš„å¯†ç æ˜¯å¦æ­£ç¡®ï¼Œç”¨æˆ·çš„è§’è‰²æ˜¯æ™®é€šç”¨æˆ·è¿˜æ˜¯ç®¡ç†å‘˜ï¼ŒæŸé¡¹æ“ä½œæ˜¯å¦å¾—åˆ°æˆæƒç­‰ï¼Œæ¡†æ¶çš„ä½œç”¨å°±æ˜¯è®©æˆ‘ä»¬å°‘äº›ä»£ç å°‘é…ç½®ï¼Œç¼ºç‚¹å°±æ˜¯å¯¹äºåˆå­¦è€…æ¥è¯´å°±ä¸€å¼€å§‹æ¯”è¾ƒéš¾ä¸Šæ‰‹ï¼Œåœ¨ springboot ä¸­ï¼Œå®ƒå¯ä»¥å¾ˆæ–¹ä¾¿å’Œå…¶ä»–éƒ¨åˆ†ç»“åˆï¼Œåªéœ€è¦å¼•å…¥ä¾èµ–å°±å¯ä»¥ä¿æŠ¤æ‰€æœ‰çš„æ¥å£ã€‚æˆ‘ä»¬æ“ä½œçš„ä¸»è¦æ˜¯ä¸‰ä¸ªéƒ¨åˆ†</p><ul><li><ol><li>å®ä½“ç±» Userï¼Œå®ƒå°±æ˜¯ SpringSecurity ç»™æˆ‘ä»¬å®šä¹‰çš„å®ä½“ç±»<br><img src="/image/%E8%AE%B0%E5%BD%95SpringSecurity%E7%9A%84%E4%B8%80%E6%AC%A1%E5%AE%9E%E8%B7%B5/1678377525493.png" alt="1678377525493"><br>ä»æºç ä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°å®ƒå®ç°äº† UserDetails æ¥å£ï¼Œä½†æ˜¯ä»–è¿™é‡Œå®ä¾‹å˜é‡å¾ˆå¤šï¼Œæˆ‘ä»¬å¯ä»¥è‡ªå·±åˆ›å»ºå®ä½“ç±»å¹¶å®ç° UserDetails æ¥å£</li></ol></li><li><ol start="2"><li>UserDetailsService å®ƒæ˜¯ç”¨æ¥è·å–ç”¨æˆ·ä¿¡æ¯ï¼Œè¿”å› UserDetails ç±»ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥åˆ›å»ºä¸€ä¸ªç±»å¹¶å®ç° UserDetailsService æ¥è‡ªå®šä¹‰è¿”å›çš„å†…å®¹ï¼Œä¾‹å¦‚æˆ‘åœ¨é¡¹ç›®ä¸­çš„å®ç°ï¼š<br><img src="/image/%E8%AE%B0%E5%BD%95SpringSecurity%E7%9A%84%E4%B8%80%E6%AC%A1%E5%AE%9E%E8%B7%B5/1678377576565.png" alt="1678377576565"><br>åœ¨æ•°æ®åº“ä¸­æŸ¥æ‰¾æ˜¯å¦æœ‰å¯¹åº” userId çš„ç”¨æˆ·æ²¡æœ‰å°±æŠ›å‡º UsernameNotFound å¼‚å¸¸ï¼Œç„¶ååœ¨æˆæƒä¸­åŠ å…¥ç”¨æˆ·çš„è§’è‰²ï¼Œæœ€åè¿”å› userBeanã€‚</li></ol></li><li>3.WebSecurityConfig é…ç½®ç±»</li></ul><h1 id="äºŒã€ä½¿ç”¨æ­¥éª¤"><a href="#äºŒã€ä½¿ç”¨æ­¥éª¤" class="headerlink" title="äºŒã€ä½¿ç”¨æ­¥éª¤"></a>äºŒã€ä½¿ç”¨æ­¥éª¤</h1><h2 id="1-å¼•å…¥ä¾èµ–"><a href="#1-å¼•å…¥ä¾èµ–" class="headerlink" title="1.å¼•å…¥ä¾èµ–"></a>1.å¼•å…¥ä¾èµ–</h2><p>åœ¨ pom.xml ä¸­åŠ å…¥ä»¥ä¸‹ä¾èµ–ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-security<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å¼•å…¥ä¾èµ–åæˆ‘ä»¬å¯ä»¥å…ˆç›´æ¥è¿è¡Œè¯•ä¸€ä¸‹</p><h2 id="2-è¯»å…¥æ•°æ®"><a href="#2-è¯»å…¥æ•°æ®" class="headerlink" title="2.è¯»å…¥æ•°æ®"></a>2.è¯»å…¥æ•°æ®</h2><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>å¾®æœåŠ¡</title>
      <link href="/2023/12/08/%E5%BE%AE%E6%9C%8D%E5%8A%A1/"/>
      <url>/2023/12/08/%E5%BE%AE%E6%9C%8D%E5%8A%A1/</url>
      
        <content type="html"><![CDATA[<p>[Toc]</p><hr><h1 id="ä¸€ã€å†…å®¹æ•´ç†"><a href="#ä¸€ã€å†…å®¹æ•´ç†" class="headerlink" title="ä¸€ã€å†…å®¹æ•´ç†"></a>ä¸€ã€å†…å®¹æ•´ç†</h1><h4 id="å¸¸è§ç»„ä»¶æœ‰å“ªäº›"><a href="#å¸¸è§ç»„ä»¶æœ‰å“ªäº›" class="headerlink" title="å¸¸è§ç»„ä»¶æœ‰å“ªäº›"></a>å¸¸è§ç»„ä»¶æœ‰å“ªäº›</h4><ul><li>æ³¨å†Œä¸­å¿ƒï¼šnacos</li><li>è´Ÿè½½å‡è¡¡ï¼šribben</li><li>è¿œç¨‹è°ƒç”¨ï¼šfeign</li><li>æœåŠ¡ç†”æ–­é™çº§ï¼šsentinel</li><li>ç½‘å…³ï¼šgateway</li></ul><h4 id="æœåŠ¡æ³¨å†Œå’Œå‘ç°æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ"><a href="#æœåŠ¡æ³¨å†Œå’Œå‘ç°æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ" class="headerlink" title="æœåŠ¡æ³¨å†Œå’Œå‘ç°æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ"></a>æœåŠ¡æ³¨å†Œå’Œå‘ç°æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ</h4><p>æœåŠ¡å°†è‡ªå·±çš„æœåŠ¡åå’Œ ip ç«¯å£å·ä¿¡æ¯å‘é€åˆ°æ³¨å†Œä¸­å¿ƒï¼Œæ³¨å†Œä¸­å¿ƒä¿å­˜è¿™äº›ä¿¡æ¯å¹¶ä¸”å®šæ—¶å‘é€å¿ƒè·³ä¿¡æ¯ï¼Œåˆ¤æ–­æœåŠ¡çš„å­˜æ´»çŠ¶æ€<br>æœåŠ¡å‘ç°æ˜¯æœåŠ¡å’Œæ³¨å†Œä¸­å¿ƒä¼šæ¨é€å’Œæ‹‰å–æœåŠ¡ä¿¡æ¯ï¼Œå‘èµ·è¿œç¨‹è°ƒç”¨æ—¶æ ¹æ®è´Ÿè½½å‡è¡¡ç­–ç•¥å‘ç›®æ ‡æœåŠ¡å‘èµ·è¯·æ±‚</p><h4 id="æ³¨å†Œä¸­å¿ƒ-nacos"><a href="#æ³¨å†Œä¸­å¿ƒ-nacos" class="headerlink" title="æ³¨å†Œä¸­å¿ƒ nacos"></a>æ³¨å†Œä¸­å¿ƒ nacos</h4><p>nacosåŒæ—¶æ”¯æŒé…ç½®ä¸­å¿ƒï¼Œé›†ç¾¤é»˜è®¤é‡‡ç”¨APæ¨¡å¼</p><h4 id="ribbon-è´Ÿè½½å‡è¡¡ï¼Œè´Ÿè½½å‡è¡¡ç­–ç•¥ï¼Œè‡ªå®šä¹‰è´Ÿè½½å‡è¡¡"><a href="#ribbon-è´Ÿè½½å‡è¡¡ï¼Œè´Ÿè½½å‡è¡¡ç­–ç•¥ï¼Œè‡ªå®šä¹‰è´Ÿè½½å‡è¡¡" class="headerlink" title="ribbon è´Ÿè½½å‡è¡¡ï¼Œè´Ÿè½½å‡è¡¡ç­–ç•¥ï¼Œè‡ªå®šä¹‰è´Ÿè½½å‡è¡¡"></a>ribbon è´Ÿè½½å‡è¡¡ï¼Œè´Ÿè½½å‡è¡¡ç­–ç•¥ï¼Œè‡ªå®šä¹‰è´Ÿè½½å‡è¡¡</h4><p>feignä¸­å·²ç»é›†æˆäº†ribbonï¼Œå‘èµ·è°ƒç”¨æ—¶ï¼Œä¼šå…ˆä»æ³¨å†Œä¸­å¿ƒæ‹‰å»æœåŠ¡çš„åœ°å€ï¼ŒæŒ‰ç…§è´Ÿè½½å‡è¡¡ç­–ç•¥é€‰æ‹©ä¸€ä¸ªåœ°å€å‘é€<br>è´Ÿè½½å‡è¡¡æœ‰è½®è¯¢ï¼Œéšæœºï¼Œæƒé‡å’Œåœ°åŸŸçš„æ–¹å¼<br>å¯ä»¥é€šè¿‡å®ç°IRuleæ¥å£è‡ªå®šä¹‰ï¼Œè¿™æ˜¯å…¨å±€çš„è´Ÿè½½å‡è¡¡ç­–ç•¥<br>ä¹Ÿå¯ä»¥é€šè¿‡å†é…ç½®æ–‡ä»¶ä¸­é…ç½®è°ƒç”¨æ¯ä¸ªæœåŠ¡çš„è´Ÿè½½å‡è¡¡ç­–ç•¥</p><h4 id="æœåŠ¡é›ªå´©ã€ç†”æ–­é™çº§"><a href="#æœåŠ¡é›ªå´©ã€ç†”æ–­é™çº§" class="headerlink" title="æœåŠ¡é›ªå´©ã€ç†”æ–­é™çº§"></a>æœåŠ¡é›ªå´©ã€ç†”æ–­é™çº§</h4><p>æœåŠ¡é›ªå´©æ˜¯æŒ‡æœåŠ¡çš„è°ƒç”¨é“¾è·¯è¾ƒé•¿æ—¶ï¼Œåé¢çš„æœåŠ¡å‘ç”Ÿäº†é˜»å¡ç­‰é—®é¢˜ï¼Œå¯¼è‡´æ•´ä¸ªæœåŠ¡é“¾è·¯çš„ä¸å¯ç”¨<br>å¯ä»¥ä½¿ç”¨æœåŠ¡ç†”æ–­å’ŒæœåŠ¡é™çº§çš„æ–¹å¼é¿å…<br>æœåŠ¡é™çº§ï¼šå½“è°ƒç”¨çš„æœåŠ¡å‡ºç°å¼‚å¸¸æ—¶çš„ç­–ç•¥<br>æœåŠ¡ç†”æ–­ï¼šå½“å¯¹æœåŠ¡çš„å¤šæ¬¡è¯·æ±‚å‡ºç°å¤±è´¥æ—¶ï¼Œä¼šè§¦å‘ç†”æ–­æœºåˆ¶</p><h4 id="å¾®æœåŠ¡çš„ç›‘æ§-skywalking"><a href="#å¾®æœåŠ¡çš„ç›‘æ§-skywalking" class="headerlink" title="å¾®æœåŠ¡çš„ç›‘æ§-skywalking"></a>å¾®æœåŠ¡çš„ç›‘æ§-skywalking</h4><p>å¯ä»¥ç›‘æ§æ¥å£æœåŠ¡çš„çŠ¶æ€ï¼Œå¯ä»¥çœ‹åˆ°å“ªäº›æœåŠ¡å’Œç»“æ„é€Ÿåº¦è¾ƒæ…¢ï¼Œå¯ä»¥è¿›è¡Œé’ˆå¯¹æ€§çš„ä¼˜åŒ–</p><h4 id="å¾®æœåŠ¡é™æµï¼ˆæ¼æ¡¶ç®—æ³•ã€ä»¤ç‰Œæ¡¶ç®—æ³•ï¼‰"><a href="#å¾®æœåŠ¡é™æµï¼ˆæ¼æ¡¶ç®—æ³•ã€ä»¤ç‰Œæ¡¶ç®—æ³•ï¼‰" class="headerlink" title="å¾®æœåŠ¡é™æµï¼ˆæ¼æ¡¶ç®—æ³•ã€ä»¤ç‰Œæ¡¶ç®—æ³•ï¼‰"></a>å¾®æœåŠ¡é™æµï¼ˆæ¼æ¡¶ç®—æ³•ã€ä»¤ç‰Œæ¡¶ç®—æ³•ï¼‰</h4><h4 id="åˆ†å¸ƒå¼ç³»ç»Ÿç†è®º-CAP-å’Œ-BASE"><a href="#åˆ†å¸ƒå¼ç³»ç»Ÿç†è®º-CAP-å’Œ-BASE" class="headerlink" title="åˆ†å¸ƒå¼ç³»ç»Ÿç†è®º-CAP å’Œ BASE"></a>åˆ†å¸ƒå¼ç³»ç»Ÿç†è®º-CAP å’Œ BASE</h4><p>CAPæ˜¯åˆ†å¸ƒå¼é¡¹ç›®çš„ä¸€ä¸ªç†è®ºï¼ŒåŒ…æ‹¬ä¸€è‡´æ€§ï¼Œå¯ç”¨æ€§ï¼Œåˆ†åŒºå®¹é”™æ€§</p><p>å¯¹åˆ†å¸ƒå¼ç³»ç»Ÿæ¥è¯´åˆ†åŒºå®¹é”™æ€§æ˜¯å¿…é¡»çš„ï¼Œå¦å¤–åœ¨ä¸€è‡´æ€§å’Œå¯ç”¨æ€§ä¸­åªèƒ½äºŒé€‰ä¸€</p><p>BASEæ˜¯CAPä¸­APçš„å»¶ç”³ï¼Œä¸»è¦æ€æƒ³æ˜¯é‡‡å–ä¸€äº›æªæ–½ï¼Œä½¿å¾—æ•°æ®è¾¾åˆ°æœ€ç»ˆçš„ä¸€è‡´æ€§ã€‚</p><h4 id="åˆ†å¸ƒå¼äº‹åŠ¡è§£å†³æ–¹æ¡ˆ"><a href="#åˆ†å¸ƒå¼äº‹åŠ¡è§£å†³æ–¹æ¡ˆ" class="headerlink" title="åˆ†å¸ƒå¼äº‹åŠ¡è§£å†³æ–¹æ¡ˆ"></a>åˆ†å¸ƒå¼äº‹åŠ¡è§£å†³æ–¹æ¡ˆ</h4><p>ä¸»è¦æ˜¯ä½¿ç”¨MQå®ç°çš„åˆ†å¸ƒå¼äº‹åŠ¡ï¼Œå¯¹æ•°æ®çš„å³æ—¶æ€§è¦æ±‚æ²¡æœ‰é‚£ä¹ˆé«˜ï¼Œæ•°æ®æ˜¯æœ€ç»ˆä¸€è‡´æ€§çš„</p><h4 id="åˆ†å¸ƒå¼æœåŠ¡çš„æ¥å£å¹‚ç­‰æ€§å¦‚ä½•è®¾è®¡"><a href="#åˆ†å¸ƒå¼æœåŠ¡çš„æ¥å£å¹‚ç­‰æ€§å¦‚ä½•è®¾è®¡" class="headerlink" title="åˆ†å¸ƒå¼æœåŠ¡çš„æ¥å£å¹‚ç­‰æ€§å¦‚ä½•è®¾è®¡"></a>åˆ†å¸ƒå¼æœåŠ¡çš„æ¥å£å¹‚ç­‰æ€§å¦‚ä½•è®¾è®¡</h4><p>ä½¿ç”¨tokençš„æ–¹å¼ï¼Œæ¯”å¦‚åœ¨æ‰“å¼€è®¢å•é¡µé¢çš„æ—¶å€™åç«¯è¿”å›ä¸€ä¸ªtokeç»™å‰ç«¯ï¼Œå‰ç«¯æäº¤è®¢å•ä¿¡æ¯æ—¶æºå¸¦tokenï¼Œåç«¯æ£€æŸ¥tokenæ˜¯å¦å­˜åœ¨ï¼Œå­˜åœ¨å°±å¾€ä¸‹æ‰§è¡Œï¼Œç„¶ååˆ é™¤token</p><h4 id="ä½ ä»¬é¡¹ç›®ä¸­ä½¿ç”¨äº†ä»€ä¹ˆåˆ†å¸ƒå¼ä»»åŠ¡è°ƒåº¦-xxl-job"><a href="#ä½ ä»¬é¡¹ç›®ä¸­ä½¿ç”¨äº†ä»€ä¹ˆåˆ†å¸ƒå¼ä»»åŠ¡è°ƒåº¦-xxl-job" class="headerlink" title="ä½ ä»¬é¡¹ç›®ä¸­ä½¿ç”¨äº†ä»€ä¹ˆåˆ†å¸ƒå¼ä»»åŠ¡è°ƒåº¦-xxl-job"></a>ä½ ä»¬é¡¹ç›®ä¸­ä½¿ç”¨äº†ä»€ä¹ˆåˆ†å¸ƒå¼ä»»åŠ¡è°ƒåº¦-xxl-job</h4>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>JVM</title>
      <link href="/2023/12/08/JVM/"/>
      <url>/2023/12/08/JVM/</url>
      
        <content type="html"><![CDATA[<p>[Toc]</p><hr><h1 id="ä¸€ã€å†…å®¹æ•´ç†"><a href="#ä¸€ã€å†…å®¹æ•´ç†" class="headerlink" title="ä¸€ã€å†…å®¹æ•´ç†"></a>ä¸€ã€å†…å®¹æ•´ç†</h1><h2 id="ç±»åŠ è½½å™¨"><a href="#ç±»åŠ è½½å™¨" class="headerlink" title="ç±»åŠ è½½å™¨"></a>ç±»åŠ è½½å™¨</h2><h4 id="ä»€ä¹ˆæ˜¯ç±»åŠ è½½å™¨"><a href="#ä»€ä¹ˆæ˜¯ç±»åŠ è½½å™¨" class="headerlink" title="ä»€ä¹ˆæ˜¯ç±»åŠ è½½å™¨"></a>ä»€ä¹ˆæ˜¯ç±»åŠ è½½å™¨</h4><p>ç±»åŠ è½½å™¨æ˜¯å°† class æ–‡ä»¶åŠ è½½åˆ° jvm ä¸­ï¼Œjvm ä¸­æœ‰å››ä¸ªç±»åŠ è½½å™¨</p><ul><li>å¯åŠ¨ç±»åŠ è½½å™¨ï¼šç”± C++ç¼–å†™ï¼ŒåŠ è½½ java çš„æ ¸å¿ƒç±»</li><li>æ‰©å±•ç±»åŠ è½½å™¨ï¼šåŠ è½½ java çš„æ‰©å±•ç±»</li><li>åº”ç”¨ç¨‹åºåŠ è½½å™¨ï¼šåŠ è½½ classPath ä¸­çš„ç±»ï¼Œä¹Ÿå°±æ˜¯ç”¨æˆ·è‡ªå·±ç¼–å†™çš„ç±»</li><li>è‡ªå®šä¹‰ç±»åŠ è½½å™¨ï¼šç”¨æˆ·è‡ªå®šä¹‰</li></ul><h4 id="ä»€ä¹ˆæ˜¯åŒäº²å§”æ´¾æ¨¡å‹"><a href="#ä»€ä¹ˆæ˜¯åŒäº²å§”æ´¾æ¨¡å‹" class="headerlink" title="ä»€ä¹ˆæ˜¯åŒäº²å§”æ´¾æ¨¡å‹"></a>ä»€ä¹ˆæ˜¯åŒäº²å§”æ´¾æ¨¡å‹</h4><p>åŠ è½½ä¸€ä¸ªç±»æ—¶å¦‚æœç±»æœ‰ä¸Šçº§ç±»åŠ è½½å™¨ï¼Œåˆ™å°†ç±»çš„åŠ è½½å§”æ‰˜ç»™ä¸Šçº§ï¼Œå¦‚æœä¸Šçº§ç±»åŠ è½½å™¨ä¸èƒ½åŠ è½½è¿™ä¸ªç±»ï¼Œå°±å°†è¿™ä¸ªç±»çš„è¯·æ±‚å‘ä¸‹ä¼ é€’ï¼Œè®©ä¸‹çº§çš„ç±»åŠ è½½å™¨åŠ è½½</p><p>åŸå› ï¼š</p><ul><li>ç¡®ä¿ JVM ä¸­ç±»çš„å”¯ä¸€æ€§ï¼Œé˜²æ­¢é‡å¤åŠ è½½</li><li>ä¿è¯ç±»åº“ API çš„å®‰å…¨æ€§</li></ul><h4 id="ç±»åŠ è½½è¿‡ç¨‹"><a href="#ç±»åŠ è½½è¿‡ç¨‹" class="headerlink" title="ç±»åŠ è½½è¿‡ç¨‹"></a>ç±»åŠ è½½è¿‡ç¨‹</h4><ul><li>åŠ è½½ï¼šå°†ç±»çš„å­—èŠ‚ç åŠ è½½æˆ java ç±»æ¨¡å‹ï¼Œåˆ›å»ºè¿™ä¸ªç±»çš„ Class å¯¹è±¡</li><li>éªŒè¯ï¼šæ£€æŸ¥è¿™ä¸ªç±»æ˜¯å¦ç¬¦åˆ JVM è§„èŒƒ</li><li>å‡†å¤‡ï¼šä¸ºstaticä¿®é¥°çš„å˜é‡èµ‹åˆå§‹å€¼ï¼Œstatic finalçš„ç›´æ¥èµ‹å€¼</li><li>è§£æï¼šå°†ç±»ä¸­çš„ç¬¦å·å¼•ç”¨è½¬æ¢ä¸ºç›´æ¥å¼•ç”¨</li><li>åˆå§‹åŒ–ï¼šä¸ºç±»å˜é‡èµ‹å€¼ï¼Œæ‰§è¡Œé™æ€ä»£ç å—</li><li>ä½¿ç”¨ï¼šä»mainæ–¹æ³•ä¸­å¼€å§‹æ‰§è¡Œ</li><li>é”€æ¯ï¼šé”€æ¯Classå¯¹è±¡</li></ul>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>SpringSecurity6.0.1ä¸­è§’è‰²ç»§æ‰¿æ— æ•ˆçš„é—®é¢˜</title>
      <link href="/2023/12/08/SpringSecurity6.0.1%E4%B8%AD%E8%A7%92%E8%89%B2%E7%BB%A7%E6%89%BF%E6%97%A0%E6%95%88%E7%9A%84%E9%97%AE%E9%A2%98/"/>
      <url>/2023/12/08/SpringSecurity6.0.1%E4%B8%AD%E8%A7%92%E8%89%B2%E7%BB%A7%E6%89%BF%E6%97%A0%E6%95%88%E7%9A%84%E9%97%AE%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<p>[toc]</p><hr><h1 id="ä¸€ã€ç®€è¿°"><a href="#ä¸€ã€ç®€è¿°" class="headerlink" title="ä¸€ã€ç®€è¿°"></a>ä¸€ã€ç®€è¿°</h1><p>&ensp;&ensp;æˆ‘åœ¨ SpringSecurity ä¸­åšäº†ä¸å°‘çš„å®éªŒï¼Œä½†æ€»æ„Ÿè§‰å¯¹è¿™ä¸ªæ¡†æ¶è¿˜æ˜¯æœ‰ç‚¹æ¨¡ç³Šï¼Œæœ€è¿‘åœ¨å¤ä¹  SpringSecurityï¼Œè¿›è¡Œåˆ°è§’è‰²ç»§æ‰¿æ—¶ï¼Œå‘ç°è§’è‰²ç»§æ‰¿å¹¶æ²¡æœ‰èµ·ä½œç”¨ï¼ŒæŠ˜è…¾äº†å¾ˆä¹…æœ€ååœ¨ SpringSecurity çš„ issue ä¸­æ‰¾åˆ°äº†è§£å†³æ–¹æ³•ï¼Œä¸»è¦é—®é¢˜å°±æ˜¯ 6.0.1 çš„ç‰ˆæœ¬è¿˜æ²¡æœ‰å¾ˆå¥½åœ°å…¼å®¹ RoleHierarchy è¿™ä¸ª Beanã€‚</p><h1 id="äºŒã€é€šå¸¸åšæ³•"><a href="#äºŒã€é€šå¸¸åšæ³•" class="headerlink" title="äºŒã€é€šå¸¸åšæ³•"></a>äºŒã€é€šå¸¸åšæ³•</h1><p>&ensp;&ensp;é€šå¸¸æˆ‘ä»¬åšè§’è‰²ç»§æ‰¿åªéœ€è¦è‡ªå®šä¹‰æ³¨å…¥ä¸€ä¸ª <code>RoleHierarchy</code> çš„ Bean å°±å¯ä»¥äº†ï¼Œå°±åƒè¿™æ ·ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">static</span> RoleHierarchy <span class="title function_">roleHierarchy</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">RoleHierarchyImpl</span> <span class="variable">hierarchy</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">RoleHierarchyImpl</span>();</span><br><span class="line">        hierarchy.setHierarchy(<span class="string">&quot;ROLE_ADMIN &gt; ROLE_user&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> hierarchy;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h1 id="ä¸‰ã€è¯•éªŒ"><a href="#ä¸‰ã€è¯•éªŒ" class="headerlink" title="ä¸‰ã€è¯•éªŒ"></a>ä¸‰ã€è¯•éªŒ</h1><p>&ensp;&ensp;å‡†å¤‡ä¸‰ä¸ªæ¥å£ï¼Œå…¶ä¸­ <code>getAll</code> ä¸è®¾ç½®è®¿é—®æƒé™ï¼Œ<code>getUser</code> åªå…è®¸æœ‰ User æƒé™çš„ç”¨æˆ·è®¿é—®ï¼Œ<code>getAdmin</code> åªå…è®¸æœ‰ Admin æƒé™çš„ç”¨æˆ·è®¿é—®ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/getAll&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">getAll</span><span class="params">(<span class="meta">@RequestParam(&quot;msg&quot;)</span> String msg)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> msg + <span class="string">&quot; ALL&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/getUser&quot;)</span></span><br><span class="line"><span class="meta">@PreAuthorize(&quot;hasRole(&#x27;user&#x27;)&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">getUser</span><span class="params">(<span class="meta">@RequestParam(&quot;msg&quot;)</span> String msg)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> msg + <span class="string">&quot; USER&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/getAdmin&quot;)</span></span><br><span class="line"><span class="meta">@PreAuthorize(&quot;hasRole(&#x27;ADMIN&#x27;)&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">getAdmin</span><span class="params">(<span class="meta">@RequestParam(&quot;msg&quot;)</span> String msg)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> msg + <span class="string">&quot; ADMIN&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç„¶åå‘ç™»å½•æ¥å£å‘é€è¯·æ±‚ï¼Œåœ¨è¿™é‡Œç”¨æˆ· 1111 çš„è§’è‰²æ˜¯ç®¡ç†å‘˜ï¼Œ111 åˆ™æ˜¯æ™®é€šç”¨æˆ·ï¼Œè¿™ä¸¤ä¸ªè´¦å·æ˜¯åœ¨ä¿å­˜å†æ•°æ®åº“ä¸­çš„ï¼Œç™»å½•æˆåŠŸåè¿”å›ç”¨æˆ·å</p><p><img src="/image/SpringSecurity6.0.1%E4%B8%AD%E8%A7%92%E8%89%B2%E7%BB%A7%E6%89%BF%E6%97%A0%E6%95%88%E7%9A%84%E9%97%AE%E9%A2%98/1678157532410.png#pic_center" alt="1678157532410"></p><p>ä¹‹åè®¿é—® <code>getAll</code></p><p><img src="/image/SpringSecurity6.0.1%E4%B8%AD%E8%A7%92%E8%89%B2%E7%BB%A7%E6%89%BF%E6%97%A0%E6%95%88%E7%9A%84%E9%97%AE%E9%A2%98/1678157741520.png" alt="1678157741520"></p><p>è®¿é—®æˆåŠŸ,å†è®¿é—® <code>getAdmin</code></p><p><img src="/image/SpringSecurity6.0.1%E4%B8%AD%E8%A7%92%E8%89%B2%E7%BB%A7%E6%89%BF%E6%97%A0%E6%95%88%E7%9A%84%E9%97%AE%E9%A2%98/1678157776037.png" alt="1678157776037"><br>ä¹Ÿèƒ½è®¿é—®åˆ°ï¼Œæœ€åå†è®¿é—® <code>getUser</code> çœ‹çœ‹è§’è‰²ç»§æ‰¿æ˜¯å¦æœ‰æ•ˆ<br><img src="/image/SpringSecurity6.0.1%E4%B8%AD%E8%A7%92%E8%89%B2%E7%BB%A7%E6%89%BF%E6%97%A0%E6%95%88%E7%9A%84%E9%97%AE%E9%A2%98/1678157826069.png" alt="1678157826069"></p><p>è¿™é‡ŒæŠ¥ 403 ç¦æ­¢è®¿é—®äº†ï¼Œä¸ºäº†æ¢ç©¶æ˜¯å“ªå‡ºçš„é—®é¢˜ï¼Œæˆ‘ä»¬åœ¨ç±» <code>SecurityExpressionRoot</code> çš„ <code>hasRole</code> æ–¹æ³•ä¸­æ‰“ä¸ªæ–­ç‚¹ï¼Œä¹‹åä¸€ç›´æ­¥å…¥åˆ°æ–¹æ³• <code>hasAnyAuthorityName</code>ï¼Œè¯¥æ–¹æ³•çš„ç¬¬ä¸€è¡Œæ˜¯å°†æ–¹æ³• <code>getAuthoritySet</code> çš„ç»“æœæ”¾åˆ° <code>roleSet</code> ä¸­ï¼Œæ ¹æ®åå­—è¿™ä¸ªæ–¹æ³•åº”è¯¥æ˜¯è·å–å½“å‰ç”¨æˆ·çš„è§’è‰²é›†åˆã€‚</p><p><img src="/image/SpringSecurity6.0.1%E4%B8%AD%E8%A7%92%E8%89%B2%E7%BB%A7%E6%89%BF%E6%97%A0%E6%95%88%E7%9A%84%E9%97%AE%E9%A2%98/1678158151080.png" alt="1678158151080"></p><p>æ­¥è¿‡è¯¥æ–¹æ³•ï¼Œå‘ç°è¿™é›†åˆé‡Œé¢åªæœ‰ ROLE*ADMIN</p><p><img src="/image/SpringSecurity6.0.1%E4%B8%AD%E8%A7%92%E8%89%B2%E7%BB%A7%E6%89%BF%E6%97%A0%E6%95%88%E7%9A%84%E9%97%AE%E9%A2%98/1678159673712.png" alt="1678159673712"></p><p>æ–¹æ³• <code>hasAnyAuthorityName</code> åé¢çš„éƒ¨åˆ†åˆ™æ˜¯æŠŠ <code>haseRole</code> ä¸­çš„è§’è‰²åŠ ä¸Šå‰ç¼€ ROLE*ï¼Œå¹¶åˆ¤æ–­è¿™ä¸ªè§’è‰²æ˜¯å¦åœ¨ <code>roleSet</code> é‡Œï¼Œé‚£è¿™è‚¯å®šæ˜¯ä¸åŒ…æ‹¬çš„ï¼Œæœ€åè¿”å› Falseï¼Œæ‰€ä»¥å°±è®¿é—®ä¸åˆ°è¿™ä¸ªæ¥å£äº†ã€‚<br>æˆ‘ä»¬é‡æ–°åœ¨å‘é€ä¸€æ¬¡è¯·æ±‚åˆ° <code>getUser</code>ï¼Œæ­¥å…¥æ–¹æ³• <code>getAuthoritySet</code>ï¼Œ</p><p><img src="/image/SpringSecurity6.0.1%E4%B8%AD%E8%A7%92%E8%89%B2%E7%BB%A7%E6%89%BF%E6%97%A0%E6%95%88%E7%9A%84%E9%97%AE%E9%A2%98/1678159809157.png" alt="1678159809157"></p><p>å…¶ä¸­å…³é”®çš„ç¬¬ä¸‰è¡Œå¯ä»¥çœ‹åˆ°å°±æ˜¯åˆ¤æ–­å½“å‰å¯¹è±¡çš„ <code>roleHierachy</code> æ˜¯å¦ä¸ºç©ºï¼Œä¸ä¸ºç©ºåˆ™å°†è¿”å›æ‰€æœ‰å¯è®¿é—®æƒé™çš„é›†åˆ</p><p><img src="/image/SpringSecurity6.0.1%E4%B8%AD%E8%A7%92%E8%89%B2%E7%BB%A7%E6%89%BF%E6%97%A0%E6%95%88%E7%9A%84%E9%97%AE%E9%A2%98/1678161022293.png" alt="1678161022293"></p><p>ä¹‹åå°†æƒé™é›†åˆè½¬æ¢ä¸º <code>Set</code></p><p><img src="/image/SpringSecurity6.0.1%E4%B8%AD%E8%A7%92%E8%89%B2%E7%BB%A7%E6%89%BF%E6%97%A0%E6%95%88%E7%9A%84%E9%97%AE%E9%A2%98/1678161087471.png" alt="1678161087471"></p><p>ä½†åœ¨è¿™é‡Œ <code>roleHierachy</code> æ˜¯ null å•Šï¼Œwhatï¼Ÿæˆ‘ä»¬é…ç½®çš„è§’è‰²ç»§æ‰¿å“ªå»äº†ï¼Ÿ</p><p>åé¢å»ç¿»äº†ç¿» <a href="https://docs.spring.io/spring-security/reference/6.0.1/servlet/authorization/architecture.html#authz-hierarchical-roles">SpringSecurity çš„æ–‡æ¡£</a>ï¼Œå®ƒç»™çš„ç¤ºä¾‹æ˜¯è¿™æ ·çš„</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line">AccessDecisionVoter <span class="title function_">hierarchyVoter</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">RoleHierarchy</span> <span class="variable">hierarchy</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">RoleHierarchyImpl</span>();</span><br><span class="line">    hierarchy.setHierarchy(<span class="string">&quot;ROLE_ADMIN &gt; ROLE_STAFF\n&quot;</span> +</span><br><span class="line">            <span class="string">&quot;ROLE_STAFF &gt; ROLE_USER\n&quot;</span> +</span><br><span class="line">            <span class="string">&quot;ROLE_USER &gt; ROLE_GUEST&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">RoleHierarchyVoter</span>(hierarchy);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æŒ‰ç…§è¿™ä¸ªæ–¹æ³•å†™äº†ä¹‹åä¾æ—§è¿˜æ˜¯ä¸è¡Œã€‚ã€‚ã€‚<br>idea ä¹Ÿæç¤ºç±» <code>AccessDecisionVoter</code> å’Œ <code>RoleHierarchyVoter</code> å·²ç»å¼ƒç”¨äº†ï¼Œè¿›å…¥è¿™ä¸¤ä¸ªç±»éƒ½æç¤ºæ”¹ç”¨ <code>AuthorizationManager</code></p><p>åœ¨ SpringSecurity çš„<a href="https://github.com/spring-projects/spring-security/issues/12766">ä¸€ä¸ª issue</a> ä¸­å‘ç°æœ‰å…³æ–‡æ¡£ä¸­ç»™çš„ç¤ºä¾‹æ— æ•ˆçš„é—®é¢˜<br>åé¢çš„å›å¤ä¸­æœ‰ä¸€ä¸ªè§£å†³æ–¹æ³•ã€‚</p><blockquote><p>Thanks for the report, @istoony. <code>RoleHierarchy</code> bean configuration is not fully ported over as of 6.0.x. As such, I think what should be done here is add a note about that in the documentation and then update it once completed. Iâ€™ve also added #12783 detailing what needs to be done to support <code>RoleHierarchy</code> bean configuration.<br>In the meantime, to configure <code>RoleHierarchy</code> for pre-post method security, use <code>DefaultMethodSecurityExpressionHandler</code>:</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="keyword">static</span> RoleHierarchy <span class="title function_">roleHierarchy</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">RoleHierarchy</span> <span class="variable">hierarchy</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">RoleHierarchyImpl</span>();</span><br><span class="line">    hierarchy.setHierarchy(<span class="string">&quot;ROLE_ADMIN &gt; ROLE_STAFF\n&quot;</span> +</span><br><span class="line">            <span class="string">&quot;ROLE_STAFF &gt; ROLE_USER\n&quot;</span> +</span><br><span class="line">            <span class="string">&quot;ROLE_USER &gt; ROLE_GUEST&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">RoleHierarchyVoter</span>(hierarchy);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="keyword">static</span> DefaultMethodSecurityExpressionHandler <span class="title function_">methodSecurityExpressionHandler</span><span class="params">(RoleHierarchy roleHierarchy)</span> &#123;</span><br><span class="line">    <span class="type">DefaultMethodSecurityExpressionHandler</span> <span class="variable">expressionHandler</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DefaultMethodSecurityExpressionHandler</span>();</span><br><span class="line">    expressionHandler.setRoleHierarchy(roleHierarchy);</span><br><span class="line">    <span class="keyword">return</span> expressionHandler;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>And to configure it for filter security, use the <code>access(AuthorizationManager)</code> method instead of <code>hasRole</code>, like so:</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">AuthorityAuthorizationManager&lt;RequestAuthorizationContext&gt; hasRoleUser =</span><br><span class="line">    AuthorityAuthorizationManager.hasRole(<span class="string">&quot;USER&quot;</span>);</span><br><span class="line">hasRoleUser.setRoleHierarchy(roleHierarchy);</span><br><span class="line"></span><br><span class="line">http</span><br><span class="line">    .authorizeHttpRequests((authorize) -&gt; authorize</span><br><span class="line">        .requestMatchers(<span class="string">&quot;/needs/user/**&quot;</span>).access(hasRoleUser)</span><br><span class="line">        .anyRequest().authenticated()</span><br><span class="line">    )</span><br><span class="line">    <span class="comment">// ...</span></span><br></pre></td></tr></table></figure><p>æŒ‰ç…§è¿™ä¸ªç¤ºä¾‹å°†è§’è‰²ç»§æ‰¿çš„é…ç½®ä¿®æ”¹ä¸º</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">static</span> RoleHierarchy <span class="title function_">roleHierarchy</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">RoleHierarchyImpl</span> <span class="variable">hierarchy</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">RoleHierarchyImpl</span>();</span><br><span class="line">        hierarchy.setHierarchy(<span class="string">&quot;ROLE_ADMIN &gt; ROLE_user&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> hierarchy;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">static</span> DefaultMethodSecurityExpressionHandler <span class="title function_">methodSecurityExpressionHandler</span><span class="params">(RoleHierarchy roleHierarchy)</span> &#123;</span><br><span class="line">        <span class="type">DefaultMethodSecurityExpressionHandler</span> <span class="variable">expressionHandler</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DefaultMethodSecurityExpressionHandler</span>();</span><br><span class="line">        expressionHandler.setRoleHierarchy(roleHierarchy);</span><br><span class="line">        <span class="keyword">return</span> expressionHandler;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>ç»è¿‡æµ‹è¯•ï¼Œè§’è‰²ä¸º ADMIN çš„ç”¨æˆ·éƒ½å¯ä»¥è®¿é—®åˆ° <code>hasRole(&quot;user&quot;)</code>çš„æ¥å£ï¼Œå¹¶ä¸” user è§’è‰²ä¹Ÿè¿˜æ˜¯è®¿é—®ä¸äº† <code>hasRole(&quot;ADMIN&quot;)</code>çš„æ¥å£ï¼Œè§’è‰²ç»§æ‰¿ç”Ÿæ•ˆäº†ï¼</p><h1 id="é€šå¸¸åšæ³•æ— æ•ˆçš„åŸå› "><a href="#é€šå¸¸åšæ³•æ— æ•ˆçš„åŸå› " class="headerlink" title="é€šå¸¸åšæ³•æ— æ•ˆçš„åŸå› "></a>é€šå¸¸åšæ³•æ— æ•ˆçš„åŸå› </h1><p>åœ¨ 6.1.0-SNAPSHOT ç‰ˆæœ¬çš„æ–‡æ¡£ä¸­å¯¹åº”è§’è‰²ç»§æ‰¿çš„ä½ç½®æœ‰è¿™ä¹ˆä¸€ä¸ªæç¤º</p><p><img src="/image/SpringSecurity6.0.1%E4%B8%AD%E8%A7%92%E8%89%B2%E7%BB%A7%E6%89%BF%E6%97%A0%E6%95%88%E7%9A%84%E9%97%AE%E9%A2%98/1678168778522.png" alt="1678168778522"><br><code>RoleHierarchy</code> è¿™ä¸ª Bean è¿˜æ²¡æœ‰é€‚é…@EnableMethodSecurity è¿™ä¸ªæ³¨è§£ï¼Œéœ€è¦ç­‰åˆ°è¿™ä¸ª issues ä¿®å®Œã€‚</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Windowsæ­å»ºRabbitMqé›†ç¾¤</title>
      <link href="/2023/12/08/Windows%E6%90%AD%E5%BB%BARabbitMq%E9%9B%86%E7%BE%A4/"/>
      <url>/2023/12/08/Windows%E6%90%AD%E5%BB%BARabbitMq%E9%9B%86%E7%BE%A4/</url>
      
        <content type="html"><![CDATA[<p>[toc]</p><hr><h1 id="ä¸€ã€ç®€è¿°"><a href="#ä¸€ã€ç®€è¿°" class="headerlink" title="ä¸€ã€ç®€è¿°"></a>ä¸€ã€ç®€è¿°</h1><p>&ensp;&ensp;RabbitMQ åœ¨ Linux ç«¯çš„é›†ç¾¤æ­å»ºå¯å‚è€ƒçš„æ•™ç¨‹å¾ˆå¤šï¼Œä½† windows ç«¯çš„ç›¸å¯¹è¾ƒå°‘ï¼Œè™½ç„¶ç”Ÿäº§ç¯å¢ƒè‚¯å®šè¿˜æ˜¯è¦åœ¨ Linux ä¸Šæ•´çš„ï¼Œä½†æ˜¯æœ¬ç€ä¸æ•´å¥½ä¸ç—›å¿«çš„ç²¾ç¥ï¼Œå‚è€ƒäº†å¥½å‡ ç¯‡åšå®¢ï¼Œè¸©äº†ä¸€äº›å‘ï¼Œç»ˆäºæ­å¥½äº†ã€‚ğŸ˜†ğŸ˜†ğŸ˜†</p><h1 id="äºŒã€æ­¥éª¤"><a href="#äºŒã€æ­¥éª¤" class="headerlink" title="äºŒã€æ­¥éª¤"></a>äºŒã€æ­¥éª¤</h1><p>é›†ç¾¤åŒ…æ‹¬ä¸€ä¸ªä¸»èŠ‚ç‚¹ï¼Œä¸¤ä¸ªä»èŠ‚ç‚¹ï¼Œä»¥ä¸‹æ˜¯æ“ä½œæ­¥éª¤</p><ol><li><p>æ‰“å¼€ windows å‘½ä»¤æç¤ºç¬¦ï¼Œæ³¨æ„ä¸æ˜¯ powershell(åç»­éœ€è¦åœ¨è¿™ä¸ªç»ˆç«¯è®¾ç½®å˜é‡)<br><img src="/image/Windows%E6%90%AD%E5%BB%BARabbitMq%E9%9B%86%E7%BE%A4/1687607312573.png" alt="1687607312573"></p></li><li><p>æ–°å»ºä¸‰ä¸ªå‘½ä»¤æç¤ºç¬¦ï¼Œæ¯ä¸ªç»ˆç«¯è´Ÿè´£æ¯ä¸ªèŠ‚ç‚¹çš„ç¯å¢ƒé…ç½®å’Œå¯åŠ¨ï¼Œåœ¨æ¯ä¸ªå‘½ä»¤æç¤ºç¬¦ä¸­ä¾æ¬¡æ‰§è¡Œè®¾ç½®ç¯å¢ƒå˜é‡ï¼Œå¯åŠ¨èŠ‚ç‚¹çš„å‘½ä»¤ã€‚<br><code>ç¬¬ä¸€ã€ä¸‰è¡Œå‘½ä»¤ä¸­çš„å€¼æ˜¯ç«¯å£å·ï¼Œç¬¬äºŒè¡Œçš„å€¼æ˜¯èŠ‚ç‚¹åç§°ï¼Œå¯ä»¥æ ¹æ®éœ€æ±‚æ›´æ”¹</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># é…ç½®ä¸»èŠ‚ç‚¹</span></span><br><span class="line"><span class="built_in">set</span> RABBITMQ_NODE_PORT=5673</span><br><span class="line"><span class="built_in">set</span> RABBITMQ_NODENAME=master</span><br><span class="line"><span class="built_in">set</span> RABBITMQ_SERVER_START_ARGS=-rabbitmq_management listener [&#123;port,15673&#125;]</span><br><span class="line">rabbitmq-server.bat</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># é…ç½®ä»1èŠ‚ç‚¹</span></span><br><span class="line"><span class="built_in">set</span> RABBITMQ_NODE_PORT=5674</span><br><span class="line"><span class="built_in">set</span> RABBITMQ_NODENAME=slave1</span><br><span class="line"><span class="built_in">set</span> RABBITMQ_SERVER_START_ARGS=-rabbitmq_management listener [&#123;port,15674&#125;]</span><br><span class="line">rabbitmq-server.bat</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># é…ç½®ä»2èŠ‚ç‚¹</span></span><br><span class="line"><span class="built_in">set</span> RABBITMQ_NODE_PORT=5675</span><br><span class="line"><span class="built_in">set</span> RABBITMQ_NODENAME=slave2</span><br><span class="line"><span class="built_in">set</span> RABBITMQ_SERVER_START_ARGS=-rabbitmq_management listener [&#123;port,15675&#125;]</span><br><span class="line">rabbitmq-server.bat</span><br></pre></td></tr></table></figure></li><li><p>æ–°å»ºä¸€ä¸ªç»ˆç«¯ï¼Œåœ¨ç»ˆç«¯å†…åœæ­¢æ¯ä¸ªèŠ‚ç‚¹çš„è¿è¡Œå¹¶é‡ç½®æ¯ä¸ªèŠ‚ç‚¹(é˜²æ­¢åˆ›å»ºé›†ç¾¤æ—¶å‡ºç°ä¸åŒæ­¥ç­‰é—®é¢˜)</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">rabbitmqctl.bat -n master stop_app</span><br><span class="line">rabbitmqctl.bat -n master reset</span><br><span class="line"></span><br><span class="line">rabbitmqctl.bat -n slave1 stop_app</span><br><span class="line">rabbitmqctl.bat -n slave1 reset</span><br><span class="line"></span><br><span class="line">rabbitmqctl.bat -n slave2 stop_app</span><br><span class="line">rabbitmqctl.bat -n slave2 reset</span><br></pre></td></tr></table></figure></li><li><p>å¯åŠ¨ä¸»èŠ‚ç‚¹</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rabbitmqctl.bat -n master start_app</span><br></pre></td></tr></table></figure></li><li><p>ä»èŠ‚ç‚¹æŒ‚è½½åˆ°ä¸»èŠ‚ç‚¹ä¸‹</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">rabbitmqctl.bat -n slave1 join_cluster master@workMachine</span><br><span class="line">rabbitmqctl.bat -n slave2 join_cluster master@workMachine</span><br></pre></td></tr></table></figure></li><li><p>å¯åŠ¨ä»èŠ‚ç‚¹</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">rabbitmqctl.bat -n slave1 start_app</span><br><span class="line">rabbitmqctl.bat -n slave2 start_app</span><br></pre></td></tr></table></figure></li></ol><h1 id="å®Œæˆ"><a href="#å®Œæˆ" class="headerlink" title="å®Œæˆ"></a>å®Œæˆ</h1><p>è¿™æ—¶å†è¿›å…¥ä¸»èŠ‚ç‚¹çš„æ§åˆ¶ç•Œé¢å°±å¯ä»¥çœ‹åˆ°ä¸‰ä¸ªèŠ‚ç‚¹éƒ½åœ¨çº¿äº†<br><img src="/image/Windows%E6%90%AD%E5%BB%BARabbitMq%E9%9B%86%E7%BE%A4/1687607211343.png" alt="1687607211343"><br>é€šè¿‡å‘½ä»¤<code>rabbitmqctl.bat cluster_status -n master</code>ä¹Ÿå¯ä»¥çœ‹åˆ°ä¸‰ä¸ªèŠ‚ç‚¹çš„è¿è¡ŒçŠ¶å†µ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">C:\Users\hahaha&gt; rabbitmqctl.bat cluster_status -n master</span><br><span class="line">Cluster status of node master@workMachine ...</span><br><span class="line">Basics</span><br><span class="line"></span><br><span class="line">Cluster name: master@workMachine</span><br><span class="line">Total CPU cores available cluster-wide: 48</span><br><span class="line"></span><br><span class="line">Disk Nodes</span><br><span class="line"></span><br><span class="line">master@workMachine</span><br><span class="line">slave1@workMachine</span><br><span class="line">slave2@workMachine</span><br><span class="line"></span><br><span class="line">Running Nodes</span><br><span class="line"></span><br><span class="line">master@workMachine</span><br><span class="line">slave1@workMachine</span><br><span class="line">slave2@workMachine</span><br><span class="line"></span><br><span class="line">Versions</span><br><span class="line"></span><br><span class="line">master@workMachine: RabbitMQ 3.12.0 on Erlang 26.0.1</span><br><span class="line">slave1@workMachine: RabbitMQ 3.12.0 on Erlang 26.0.1</span><br><span class="line">slave2@workMachine: RabbitMQ 3.12.0 on Erlang 26.0.1</span><br><span class="line"></span><br><span class="line">CPU Cores</span><br><span class="line"></span><br><span class="line">Node: master@workMachine, available CPU cores: 16</span><br><span class="line">Node: slave1@workMachine, available CPU cores: 16</span><br><span class="line">Node: slave2@workMachine, available CPU cores: 16</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>é›†åˆç±»</title>
      <link href="/2023/12/08/collection/"/>
      <url>/2023/12/08/collection/</url>
      
        <content type="html"><![CDATA[<p>[Toc]</p><hr><h1 id="ä¸€ã€å†…å®¹æ•´ç†"><a href="#ä¸€ã€å†…å®¹æ•´ç†" class="headerlink" title="ä¸€ã€å†…å®¹æ•´ç†"></a>ä¸€ã€å†…å®¹æ•´ç†</h1><h2 id="ArrayList"><a href="#ArrayList" class="headerlink" title="ArrayList"></a>ArrayList</h2><h4 id="åº•å±‚åŸç†åŠæ„é€ å‡½æ•°ç›¸å…³"><a href="#åº•å±‚åŸç†åŠæ„é€ å‡½æ•°ç›¸å…³" class="headerlink" title="åº•å±‚åŸç†åŠæ„é€ å‡½æ•°ç›¸å…³"></a>åº•å±‚åŸç†åŠæ„é€ å‡½æ•°ç›¸å…³</h4><p>ArrayList åº•å±‚ç»´æŠ¤ä¸€ä¸ªæ•°ç»„ elementDataï¼Œå…±æœ‰ä¸‰ä¸ªæ„é€ å‡½æ•°</p><ul><li>æ— å‚æ„é€ ï¼šå°†ä¸€ä¸ªç©ºæ•°ç»„èµ‹å€¼ç»™ elementData</li><li>å‚æ•° int initialCapacityï¼šåˆå§‹åŒ–æ‰‹åŠ¨æŒ‡å®šæ•°ç»„é•¿åº¦ï¼Œå°äº 0 æŠ›å‡ºå¼‚å¸¸ï¼Œç­‰äº 0 å°† elementData èµ‹å€¼ä¸ºç©ºæ•°ç»„ï¼Œå¤§äº 0 èµ‹å€¼ä¸ºæŒ‡å®šé•¿åº¦çš„æ•°ç»„</li><li>å‚æ•° Collection&lt;? extends E&gt; cï¼šå°† c è½¬åŒ–ä¸ºæ•°ç»„åæ›´å…·æƒ…å†µèµ‹å€¼</li></ul><p>åœ¨å¢åŠ å…ƒç´ æ—¶ï¼Œé¦–å…ˆä¼šåˆ¤æ–­å½“å‰æ•°ç»„çš„ç©ºé—´æ˜¯å¦è¶³å¤Ÿï¼Œå¦‚æœä¸å¤Ÿï¼Œè°ƒç”¨ grow æ–¹æ³•éœ€è¦æ‰©å®¹ä¸ºåŸå¤§å°çš„ 1.5 å€ï¼Œç„¶åå†å°†å…ƒç´ å­˜å‚¨åˆ°æ•°ç»„ä¸­ size çš„ä½ç½®ä¸­</p><h4 id="å¦‚ä½•å®ç°æ•°ç»„å’Œ-List-ä¹‹é—´çš„è½¬æ¢"><a href="#å¦‚ä½•å®ç°æ•°ç»„å’Œ-List-ä¹‹é—´çš„è½¬æ¢" class="headerlink" title="å¦‚ä½•å®ç°æ•°ç»„å’Œ List ä¹‹é—´çš„è½¬æ¢"></a>å¦‚ä½•å®ç°æ•°ç»„å’Œ List ä¹‹é—´çš„è½¬æ¢</h4><p>List è½¬æ•°ç»„ï¼Œè°ƒç”¨ List çš„ toArray æ–¹æ³•ï¼Œæ›´æ”¹æ•°ç»„ï¼Œlist ä¸ä¼šå˜ï¼Œå› ä¸ºæ˜¯å°†æ•°æ®æ‹·è´åˆ°æ•°ç»„<br>æ•°ç»„è½¬ Listï¼Œå·¥å…·ç±» Arrays çš„ asList æ–¹æ³•ï¼ˆæ³¨æ„ï¼šè¿”å›çš„ ArrayList ä¸èƒ½æ“ä½œï¼Œå› ä¸ºè¿”å›çš„æ˜¯ Arrays å†…éƒ¨çš„ç±»ï¼Œä¸æ˜¯å¸¸è§çš„é‚£ä¸ªï¼‰ï¼Œæ›´æ”¹æ•°ç»„ï¼Œlist ä¼šå˜ï¼Œå› ä¸ºåº•å±‚åªæ˜¯å°†æ•°ç»„çš„åœ°å€èµ‹ç»™äº† ArrayList ä¸­çš„æ•°ç»„</p><h4 id="ArrayList-å’Œ-LinkedList-çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#ArrayList-å’Œ-LinkedList-çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="ArrayList å’Œ LinkedList çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ"></a>ArrayList å’Œ LinkedList çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</h4><p>ArrayList åº•å±‚ä¸ºæ•°ç»„ï¼ŒLinkedList åº•å±‚ä¸ºé“¾è¡¨<br>è®¿é—®å…ƒç´ æ—¶ï¼ŒArrayList çš„æ—¶é—´å¤æ‚åº¦ä¸º O(1)ï¼Œé“¾è¡¨ä¸º O(n)<br>LinkedList åœ¨å¤´å°¾å¢åŠ æˆ–åˆ é™¤æ—¶é—´å¤æ‚åº¦ä¸º O(1)ï¼Œå…¶ä»–éƒ¨åˆ†éœ€è¦éå†é“¾è¡¨æ—¶é—´å¤æ‚åº¦ä¸º O(n)<br>ArrayList åœ¨åé¢å¢åŠ å…ƒç´ æ—¶é—´å¤æ‚åº¦ä¸º O(1)ï¼Œå…¶ä»–éƒ¨åˆ†éœ€è¦æ—¶é—´å¤æ‚åº¦ä¸º O(n)</p><p>é“¾è¡¨å ç”¨çš„ç©ºé—´ä¼šå¤§ä¸€äº›ï¼Œå› ä¸ºè¿˜éœ€è¦å­˜å‚¨ä¸¤ä¸ªæŒ‡é’ˆ</p><h2 id="HashMap"><a href="#HashMap" class="headerlink" title="HashMap"></a>HashMap</h2><h4 id="HashMap-çš„å®ç°åŸç†"><a href="#HashMap-çš„å®ç°åŸç†" class="headerlink" title="HashMap çš„å®ç°åŸç†"></a>HashMap çš„å®ç°åŸç†</h4><p>æ ¹æ® key è®¡ç®—å‡º hash å€¼å¾—åˆ°ä¸€ä¸ªç´¢å¼•çš„ä½ç½®ï¼Œç„¶åå°†å…ƒç´ æ”¾ç½®åˆ°å¯¹åº”çš„ä½ç½®ï¼Œå¦‚æœå­˜åœ¨å…ƒç´ å°±å°†å…ƒç´ æŒ‚è½½åˆ°å·²æœ‰å…ƒç´ çš„ä¸‹æ–¹ï¼Œå˜æˆä¸€ä¸ªåŒå‘é“¾è¡¨ï¼Œå½“é“¾è¡¨é•¿åº¦å¤§äº 8ï¼Œæ•°ç»„é•¿åº¦å¤§äº 64 æ—¶ï¼Œä¼šå°†å¯¹åº”ç´¢å¼•ä½ç½®çš„é“¾è¡¨è½¬æ¢æˆçº¢é»‘æ ‘</p><h4 id="put-æ–¹æ³•çš„å…·ä½“æµç¨‹"><a href="#put-æ–¹æ³•çš„å…·ä½“æµç¨‹" class="headerlink" title="put æ–¹æ³•çš„å…·ä½“æµç¨‹"></a>put æ–¹æ³•çš„å…·ä½“æµç¨‹</h4><p>é¦–å…ˆåˆ¤æ–­å½“å‰çš„æ•°ç»„æ˜¯å¦ä¸ºç©ºï¼Œä¸å……è¶³åˆ™å…ˆæ‰©å®¹ï¼Œç„¶åå†è®¡ç®— key çš„ç´¢å¼•å€¼ï¼Œå†æŸ¥çœ‹ç´¢å¼•ä½ç½®æ˜¯å¦æœ‰å…ƒç´ ï¼Œå·²ç»å­˜åœ¨å…ƒç´ åˆ™æ¯”è¾ƒç´¢å¼•ä½ç½®å€¼çš„ key å’Œæ’å…¥æ•°æ®çš„ key æ˜¯å¦ç›¸åŒï¼Œç›¸åŒå°±ç›´æ¥æ›´æ–°ï¼Œä¸ç›¸åŒåˆ¤æ–­æ˜¯å¦ä¸ºçº¢é»‘æ ‘ï¼Œä¸æ˜¯çº¢é»‘æ ‘é‚£å°±æ˜¯é“¾è¡¨ï¼Œéšåéå†é“¾è¡¨ï¼Œå¦‚æœå­˜åœ¨ç›¸åŒçš„ key åˆ™æ›´æ–°ï¼Œéå†å®Œè¿˜æ²¡æœ‰ç›¸åŒçš„ï¼Œç›´æ¥åœ¨å°¾éƒ¨æ’å…¥ï¼Œåˆ¤æ–­é•¿åº¦æ˜¯å¦å¤§äº 8ï¼Œè€ƒè™‘æ˜¯å¦éœ€è¦è½¬åŒ–æˆçº¢é»‘æ ‘ï¼Œå¦‚æœæ˜¯çº¢é»‘æ ‘ï¼Œåˆ™ç›´æ¥æ‰§è¡Œçº¢é»‘æ ‘çš„æ’å…¥æ–¹æ³•ï¼Œæ’å…¥å®Œæˆååˆ¤æ–­++size å’Œå››åˆ†ä¹‹ä¸‰æ•°ç»„é•¿åº¦çš„å¤§å°ï¼Œå¤§äºåˆ™éœ€è¦æ‰©å®¹</p><h4 id="HashMap-çš„æ‰©å®¹æœºåˆ¶"><a href="#HashMap-çš„æ‰©å®¹æœºåˆ¶" class="headerlink" title="HashMap çš„æ‰©å®¹æœºåˆ¶"></a>HashMap çš„æ‰©å®¹æœºåˆ¶</h4><p>é¦–å…ˆåˆ¤æ–­æ˜¯å¦å¤§äº 0ï¼Œå¦åˆ™ç›´æ¥è®¾ç½®æ•°ç»„å®¹é‡ä¸º 16ï¼Œé˜ˆå€¼ä¸º 12 å¹¶ä¸”æ–°å»ºæ•°ç»„ï¼Œå¦‚æœå¤§äº 0ï¼Œåˆ™åˆ›å»ºå€¼ä¸ºç°åœ¨é•¿åº¦çš„ä¸¤å€çš„å˜é‡ä½œä¸ºæ–°æ•°ç»„çš„é•¿åº¦ï¼Œå¹¶ä¸”åˆ›å»ºä¸€ä¸ªæ–°æ•°ç»„ï¼Œä¹‹åéœ€è¦éå†æ•°ç»„ï¼Œå¦‚æœåªæœ‰ä¸‹æ ‡ä½ç½®ä¸€ä¸ªå…ƒç´ å°±ç›´æ¥æ”¾å…¥æ–°æ•°ç»„çš„å¯¹åº”ä½ç½®ï¼Œå¯¹åº”ä½ç½®ç”±ç´¢å¼•æ¨¡æ–°æ•°ç»„é•¿åº¦è®¡ç®—å¾—åˆ°ï¼Œå¦‚æœä¸‹æ ‡ä½ç½®ä¹‹åè¿˜æœ‰å…ƒç´ å†åˆ¤æ–­æ˜¯å¦ä¸ºçº¢é»‘æ ‘ï¼Œæ˜¯çº¢é»‘æ ‘åˆ™ç›´æ¥æ·»åŠ çº¢é»‘æ ‘ï¼Œä¸æ˜¯çº¢é»‘æ ‘ï¼Œé‚£ä¹ˆè¯´æ˜æ˜¯é“¾è¡¨ï¼Œéœ€è¦éå†é“¾è¡¨ï¼Œå¯¹é“¾è¡¨çš„å…ƒç´ åšæ‹†åˆ†çš„æ“ä½œï¼Œé“¾è¡¨å…ƒç´ çš„ hash å€¼æ¨¡è€æ•°ç»„çš„é•¿åº¦ï¼Œç­‰äº 0 åˆ™ç›´æ¥æ·»åŠ åˆ°æ–°æ•°ç»„ç›¸åŒä¸‹æ ‡ï¼Œå…¶ä»–æƒ…å†µæ·»åŠ åˆ°æ–°æ•°ç»„ä¸­ä¸‹æ ‡ä¸ºä¸‹æ ‡å€¼åŠ ä¸Šè€æ•°ç»„çš„é•¿åº¦</p><h4 id="HashMap-çš„å¯»å€ç®—æ³•å’Œæ•°ç»„é•¿åº¦ä¸ºä»€ä¹ˆæ˜¯-2-çš„-n-æ¬¡å¹‚"><a href="#HashMap-çš„å¯»å€ç®—æ³•å’Œæ•°ç»„é•¿åº¦ä¸ºä»€ä¹ˆæ˜¯-2-çš„-n-æ¬¡å¹‚" class="headerlink" title="HashMap çš„å¯»å€ç®—æ³•å’Œæ•°ç»„é•¿åº¦ä¸ºä»€ä¹ˆæ˜¯ 2 çš„ n æ¬¡å¹‚"></a>HashMap çš„å¯»å€ç®—æ³•å’Œæ•°ç»„é•¿åº¦ä¸ºä»€ä¹ˆæ˜¯ 2 çš„ n æ¬¡å¹‚</h4><p>å› ä¸ºä¸€ä¸ªå€¼æ¨¡ 2 çš„ n æ¬¡å¹‚å¯ä»¥è½¬æ¢æˆï¼ˆå€¼-1ï¼‰&amp;2 çš„ n æ¬¡å¹‚<br>ä¾¿äºæ‰©å®¹æ—¶å¯¹ hash å€¼è¿›è¡Œè®¡ç®—</p><h1 id="äºŒã€é¢è¯•é¢˜"><a href="#äºŒã€é¢è¯•é¢˜" class="headerlink" title="äºŒã€é¢è¯•é¢˜"></a>äºŒã€é¢è¯•é¢˜</h1>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>æ¡†æ¶</title>
      <link href="/2023/12/08/framework/"/>
      <url>/2023/12/08/framework/</url>
      
        <content type="html"><![CDATA[<p>[Toc]</p><hr><h1 id="ä¸€ã€å†…å®¹æ•´ç†"><a href="#ä¸€ã€å†…å®¹æ•´ç†" class="headerlink" title="ä¸€ã€å†…å®¹æ•´ç†"></a>ä¸€ã€å†…å®¹æ•´ç†</h1><h2 id="Spring"><a href="#Spring" class="headerlink" title="Spring"></a>Spring</h2><h4 id="1-å•ä¾‹-bean-çº¿ç¨‹å®‰å…¨"><a href="#1-å•ä¾‹-bean-çº¿ç¨‹å®‰å…¨" class="headerlink" title="1. å•ä¾‹ bean çº¿ç¨‹å®‰å…¨"></a>1. å•ä¾‹ bean çº¿ç¨‹å®‰å…¨</h4><p>å•ä¾‹ bean ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„</p><h4 id="2-Spring-AOP"><a href="#2-Spring-AOP" class="headerlink" title="2. Spring-AOP"></a>2. Spring-AOP</h4><p>é¢å‘åˆ‡é¢ç¼–ç¨‹ï¼Œå¯ä»¥å¢å¼ºæŸäº›ç±»çš„åŠŸèƒ½ï¼Œå…¶ä¸­éœ€è¦è®¾ç½®åˆ‡é¢ï¼Œæ¯”å¦‚è®¾ç½®åŠ äº†æ³¨è§£çš„ç±»æ–¹æ³•ã€æŸä¸ªåŒ…ä¸‹çš„ç±»ï¼ŒæŠ›å‡ºæŸäº›å¼‚å¸¸çš„ç±»ç­‰ï¼Œå¦å¤–å¯ä»¥è®¾ç½®ç¯ç»•æˆ–è€…å‰ç½®åç½®ç­‰æ–¹æ³•</p><h4 id="3-äº‹åŠ¡å¤±æ•ˆçš„åœºæ™¯"><a href="#3-äº‹åŠ¡å¤±æ•ˆçš„åœºæ™¯" class="headerlink" title="3. äº‹åŠ¡å¤±æ•ˆçš„åœºæ™¯"></a>3. äº‹åŠ¡å¤±æ•ˆçš„åœºæ™¯</h4><ul><li>æ–¹æ³•ä¸­å­˜åœ¨ trycatchï¼Œå¼‚å¸¸å·²ç»è¢«å†…éƒ¨æ•è·å¤„ç†ï¼Œå¯ä»¥åœ¨å¤„ç†å¼‚å¸¸æ—¶å†å‘å¤–æŠ›å‡º</li><li>æ–¹æ³•æŠ›å‡ºäº†æ£€æŸ¥å¼‚å¸¸ï¼Œå†æ³¨è§£ä¸­åŠ å…¥ <code>rollbackFor = Exception.class</code> è®©äº‹åŠ¡æ ¹æ®æ‰€æœ‰çš„å¼‚å¸¸å›æ»š</li><li>æ–¹æ³•ä¸æ˜¯ public</li></ul><h4 id="4-bean-çš„ç”Ÿå‘½å‘¨æœŸ"><a href="#4-bean-çš„ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="4. bean çš„ç”Ÿå‘½å‘¨æœŸ"></a>4. bean çš„ç”Ÿå‘½å‘¨æœŸ</h4><ul><li>æ„é€ å‡½æ•°åˆ›å»º bean</li><li>æ³¨å…¥ç›¸å…³ä¾èµ–</li><li>å¤„ç† Aware æ¥å£ï¼Œbean å®ç°äº† Aware æ¥å£å°±ä¼šé‡å†™æ–¹æ³•æ‰§è¡Œ</li><li>æ‰§è¡Œåç½®å¤„ç†å™¨ BeanPostProcessor çš„å‰ç½®</li><li>æ‰§è¡Œåˆå§‹åŒ–æ–¹æ³•ï¼Œæ¯”å¦‚åŠ äº† PostContruct æ³¨è§£çš„æ–¹æ³•</li><li>æ‰§è¡Œåç½®å¤„ç†å™¨ BeanPostProcessor çš„åç½®ï¼Œé€šå¸¸ä¼šå¯¹ç±»è¿›è¡Œå¢å¼º</li><li>é”€æ¯</li></ul><h4 id="5-bean-çš„å¾ªç¯ä¾èµ–"><a href="#5-bean-çš„å¾ªç¯ä¾èµ–" class="headerlink" title="5. bean çš„å¾ªç¯ä¾èµ–"></a>5. bean çš„å¾ªç¯ä¾èµ–</h4><p>æ¯”å¦‚ A ä¸­æ³¨å…¥äº† Bï¼ŒB ä¸­æ³¨å…¥äº† A<br>spring èƒ½ä¸ºæˆ‘ä»¬è§£å†³å¤§å¤šæ•°çš„å¾ªç¯ä¾èµ–é—®é¢˜ï¼Œå› ä¸º spring ä¸­å­˜åœ¨ä¸‰ä¸ªä¿å­˜ bean çš„åŒºåŸŸï¼Œç¬¬ä¸€ä¸ªæ˜¯å•ä¾‹æ± ï¼Œæ˜¯å·²ç»åˆå§‹åŒ–å®Œæˆçš„ç±»ï¼Œç¬¬äºŒä¸ªä¿å­˜çš„æ˜¯æ—©æœŸçš„ beanï¼Œç¬¬ä¸‰ä¸ªæ˜¯ä¿å­˜ç±»å·¥å‚</p><ul><li><p>å…ˆå®ä¾‹ A å¯¹è±¡ï¼ŒåŒæ—¶ä¼šåˆ›å»º ObjectFactory å¯¹è±¡å­˜å…¥ä¸‰çº§ç¼“å­˜ singletonFactories</p></li><li><p>A åœ¨åˆå§‹åŒ–çš„æ—¶å€™éœ€è¦ B å¯¹è±¡ï¼Œè¿™ä¸ªèµ° B çš„åˆ›å»ºçš„é€»è¾‘</p></li><li><p>B å®ä¾‹åŒ–å®Œæˆï¼Œä¹Ÿä¼šåˆ›å»º ObjectFactory å¯¹è±¡å­˜å…¥ä¸‰çº§ç¼“å­˜ singletonFactories</p></li><li><p>B éœ€è¦æ³¨å…¥ Aï¼Œé€šè¿‡ä¸‰çº§ç¼“å­˜ä¸­è·å– ObjectFactory æ¥ç”Ÿæˆä¸€ä¸ª A çš„å¯¹è±¡åŒæ—¶å­˜å…¥äºŒçº§ç¼“å­˜ï¼Œè¿™ä¸ªæ˜¯æœ‰ä¸¤ç§æƒ…å†µï¼Œä¸€ä¸ªæ˜¯å¯èƒ½æ˜¯ A çš„æ™®é€šå¯¹è±¡ï¼Œå¦å¤–ä¸€ä¸ªæ˜¯ A çš„ä»£ç†å¯¹è±¡ï¼Œéƒ½å¯ä»¥è®© ObjectFactory æ¥ç”Ÿäº§å¯¹åº”çš„å¯¹è±¡ï¼Œè¿™ä¹Ÿæ˜¯ä¸‰çº§ç¼“å­˜çš„å…³é”®</p></li><li><p>B é€šè¿‡ä»é€šè¿‡äºŒçº§ç¼“å­˜ earlySingletonObjects è·å¾—åˆ° A çš„å¯¹è±¡åå¯ä»¥æ­£å¸¸æ³¨å…¥ï¼ŒB åˆ›å»ºæˆåŠŸï¼Œå­˜å…¥ä¸€çº§ç¼“å­˜ singletonObjects</p></li><li><p>å›åˆ° A å¯¹è±¡åˆå§‹åŒ–ï¼Œå› ä¸º B å¯¹è±¡å·²ç»åˆ›å»ºå®Œæˆï¼Œåˆ™å¯ä»¥ç›´æ¥æ³¨å…¥ Bï¼ŒA åˆ›å»ºæˆåŠŸå­˜å…¥ä¸€æ¬¡ç¼“å­˜ singletonObjects</p></li><li><p>äºŒçº§ç¼“å­˜ä¸­çš„ä¸´æ—¶å¯¹è±¡ A æ¸…é™¤</p></li></ul><p>spring æ— æ³•è§£å†³æ„é€ æ–¹æ³•ä¸­çš„å¾ªç¯å¼•ç”¨ï¼Œå¯ä»¥å†æ„é€ æ–¹æ³•ä¸­åŠ å…¥@Lazy æ³¨è§£ç­‰åˆ°éœ€è¦ç”¨åˆ°ä¾èµ–ç±»çš„æ—¶å€™å†åˆ›å»ºä¾èµ–ç±»</p><h2 id="Springmvc-æ‰§è¡Œæµç¨‹"><a href="#Springmvc-æ‰§è¡Œæµç¨‹" class="headerlink" title="Springmvc-æ‰§è¡Œæµç¨‹"></a>Springmvc-æ‰§è¡Œæµç¨‹</h2><ul><li>è¯·æ±‚è¿›æ¥åè¿›å…¥ DispatcherServlet</li><li>DispatcherServlet è°ƒç”¨ HandlerMapperï¼ŒHandler æ ¹æ®è·¯å¾„æ‰¾åˆ°å¯¹åº”çš„å¤„ç†å™¨ï¼Œå¦‚æœæœ‰è¿‡æ»¤å™¨ä¹Ÿä¸€èµ·æ‰“åŒ…è¿”å›ç»™ DispatcherServlet</li><li>DispatcherServlet å†è°ƒç”¨ HandlerHandlerAdapterï¼ŒHandlerHandlerAdapter è´Ÿè´£å¤„ç†å‚æ•°å’Œè¿”å›å€¼ï¼Œå¦‚æœæ˜¯çº¯æ¥å£å°†æ‰§è¡Œçš„ç»“æœè½¬æ¢å¹¶ä¸”è¿”å›ï¼Œå¦‚æœæ˜¯æ¨¡æ¿ï¼Œåˆ™å°†ç»“æœè¿”å›ç»™ DispatcherServletï¼Œä¹‹åå†ç”±è§†å›¾è§£æå™¨è§£ææˆ html è¿”å›</li></ul><h2 id="Springboot-è‡ªåŠ¨é…ç½®åŸç†"><a href="#Springboot-è‡ªåŠ¨é…ç½®åŸç†" class="headerlink" title="Springboot-è‡ªåŠ¨é…ç½®åŸç†"></a>Springboot-è‡ªåŠ¨é…ç½®åŸç†</h2><p><code>@SpringBootApplication</code> æ³¨è§£ä¸­åŒ…å«<code>@EnableAutoConfiguration</code> ã€<code>@SpringBootConfigration</code> å’Œ<code>@ComponentScan</code>ï¼Œå…³é”®åœ¨äº<code>@EnableAutoConfiguration</code>ï¼Œè¯¥æ³¨è§£é€šè¿‡<code>@Import</code>æ³¨è§£å¯¼å…¥å¯¹åº”çš„é…ç½®é€‰æ‹©å™¨ã€‚å…³é”®çš„æ˜¯å†…éƒ¨å°±æ˜¯è¯»å–äº†è¯¥é¡¹ç›®å’Œè¯¥é¡¹ç›®å¼•ç”¨çš„ Jar åŒ…çš„çš„ classpath è·¯å¾„ä¸‹<strong>META-INF&#x2F;spring.factories</strong>æ–‡ä»¶ä¸­çš„æ‰€é…ç½®çš„ç±»çš„å…¨ç±»åã€‚</p><p>åœ¨è¿™äº›é…ç½®ç±»ä¸­æ‰€å®šä¹‰çš„ Bean ä¼šæ ¹æ®æ¡ä»¶æ³¨è§£æ‰€<strong>æŒ‡å®šçš„æ¡ä»¶æ¥å†³å®š</strong>æ˜¯å¦éœ€è¦å°†å…¶å¯¼å…¥åˆ° Spring å®¹å™¨ä¸­ã€‚</p><p>ä¸€èˆ¬æ¡ä»¶åˆ¤æ–­ä¼šæœ‰åƒ<code>@ConditionalOnClass</code>è¿™æ ·çš„æ³¨è§£ï¼Œåˆ¤æ–­æ˜¯å¦æœ‰å¯¹åº”çš„ class æ–‡ä»¶ï¼Œå¦‚æœæœ‰åˆ™åŠ è½½è¯¥ç±»ï¼ŒæŠŠè¿™ä¸ªé…ç½®ç±»çš„æ‰€æœ‰çš„ Bean æ”¾å…¥ spring å®¹å™¨ä¸­ä½¿ç”¨ã€‚</p><h2 id="spring-æ¡†æ¶å¸¸è§çš„æ³¨è§£ï¼ˆspringã€springmvcã€springbootï¼‰"><a href="#spring-æ¡†æ¶å¸¸è§çš„æ³¨è§£ï¼ˆspringã€springmvcã€springbootï¼‰" class="headerlink" title="spring æ¡†æ¶å¸¸è§çš„æ³¨è§£ï¼ˆspringã€springmvcã€springbootï¼‰"></a>spring æ¡†æ¶å¸¸è§çš„æ³¨è§£ï¼ˆspringã€springmvcã€springbootï¼‰</h2><ul><li>Spring<ul><li>é…ç½®ï¼š@Configurationã€@ComponentScanã€@Bean</li><li>ä¾èµ–æ³¨å…¥ï¼š@Autowiredã€@Qualifierã€@Resourse</li><li>å£°æ˜ beanï¼š@Componentã€@Serviceã€@Repositoryã€@Controller</li><li>aopï¼š@Aspectã€@Beforeã€@Afterã€@Aroundã€@Pointcut</li></ul></li><li>SpringMVCï¼š@RequestMappingã€@RequestBodyã€@RequestParamã€@PathViriable</li><li>SpringBootï¼š@SpringBootApplication</li></ul><h2 id="MyBatis"><a href="#MyBatis" class="headerlink" title="MyBatis"></a>MyBatis</h2><h4 id="1-æ‰§è¡Œæµç¨‹"><a href="#1-æ‰§è¡Œæµç¨‹" class="headerlink" title="1. æ‰§è¡Œæµç¨‹"></a>1. æ‰§è¡Œæµç¨‹</h4><ul><li>è¯»å–é…ç½®æ–‡ä»¶</li><li>åˆ›å»º <code>SqlSessionFactory</code></li><li>ä½¿ç”¨ <code>SqlSessionFactory</code> åˆ›å»º <code>SqlSession</code></li><li>åˆ›å»º <code>Excutor</code></li><li>åœ¨ <code>Excutor</code> ä¸­æ‰§è¡Œï¼Œå…¶ä¸­åŒ…å« <code>MappedStatement</code> ä¿å­˜äº†æ˜ å°„ä¿¡æ¯</li><li>å°† java å¯¹è±¡è½¬åŒ–æˆæ•°æ®åº“ç±»å‹</li><li>ä¹‹åæ‰§è¡Œ</li><li>å°†ç±»å‹è½¬åŒ–æˆ java å¯¹è±¡å¹¶è¿”å›</li></ul><h4 id="2-å»¶è¿ŸåŠ è½½ä½¿ç”¨åŠåŸç†"><a href="#2-å»¶è¿ŸåŠ è½½ä½¿ç”¨åŠåŸç†" class="headerlink" title="2. å»¶è¿ŸåŠ è½½ä½¿ç”¨åŠåŸç†"></a>2. å»¶è¿ŸåŠ è½½ä½¿ç”¨åŠåŸç†</h4><p>åœ¨ä¸€ä¸ªå¯¹è±¡ä¸­å­˜åœ¨å…¶ä»–çš„å¯¹è±¡ï¼Œæ¯”å¦‚ç”¨æˆ·å®ä½“ä¸­å­˜åœ¨è®¢å•å®ä½“ï¼Œxml æ–‡ä»¶ä¸­æŸ¥æ‰¾ç”¨æˆ·çš„è®¢å•ä¹Ÿæ˜¯å•ç‹¬çš„ sql è¯­å¥ï¼Œæ­¤æ—¶å¯ä»¥è®¾ç½®æŸ¥æ‰¾è®¢å•çš„è¯­å¥ä¸ºå»¶è¿ŸåŠ è½½ï¼Œåªæœ‰è®¿é—®ç”¨æˆ·å®ä½“ä¸­çš„è®¢å•æ—¶æ‰ä¼šä»æ•°æ®åº“ä¸­æŸ¥æ‰¾ï¼Œå»¶è¿ŸåŠ è½½åœ¨åº•å±‚ä¸»è¦ä½¿ç”¨çš„ CGLIB åŠ¨æ€ä»£ç†å®Œæˆçš„</p><ul><li>ä½¿ç”¨ CGLIB åˆ›å»ºç›®æ ‡å¯¹è±¡çš„ä»£ç†å¯¹è±¡ï¼Œè¿™é‡Œçš„ç›®æ ‡å¯¹è±¡å°±æ˜¯å¼€å¯äº†å»¶è¿ŸåŠ è½½çš„ mapper</li><li>å½“è°ƒç”¨ç›®æ ‡æ–¹æ³•æ—¶ï¼Œè¿›å…¥æ‹¦æˆªå™¨ invoke æ–¹æ³•ï¼Œå‘ç°ç›®æ ‡æ–¹æ³•æ˜¯ null å€¼ï¼Œå†æ‰§è¡Œ sql æŸ¥è¯¢</li><li>è·å–æ•°æ®ä»¥åï¼Œè°ƒç”¨ set æ–¹æ³•è®¾ç½®å±æ€§å€¼ï¼Œå†ç»§ç»­æŸ¥è¯¢ç›®æ ‡æ–¹æ³•ï¼Œå°±æœ‰å€¼äº†</li></ul><h4 id="3-ä¸€çº§ã€äºŒçº§ç¼“å­˜"><a href="#3-ä¸€çº§ã€äºŒçº§ç¼“å­˜" class="headerlink" title="3. ä¸€çº§ã€äºŒçº§ç¼“å­˜"></a>3. ä¸€çº§ã€äºŒçº§ç¼“å­˜</h4><h1 id="äºŒã€é¢è¯•é¢˜"><a href="#äºŒã€é¢è¯•é¢˜" class="headerlink" title="äºŒã€é¢è¯•é¢˜"></a>äºŒã€é¢è¯•é¢˜</h1>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>mysql</title>
      <link href="/2023/12/08/mysql/"/>
      <url>/2023/12/08/mysql/</url>
      
        <content type="html"><![CDATA[<p>[Toc]</p><hr><h1 id="ä¸€ã€å†…å®¹æ•´ç†"><a href="#ä¸€ã€å†…å®¹æ•´ç†" class="headerlink" title="ä¸€ã€å†…å®¹æ•´ç†"></a>ä¸€ã€å†…å®¹æ•´ç†</h1><h2 id="ä¼˜åŒ–"><a href="#ä¼˜åŒ–" class="headerlink" title="ä¼˜åŒ–"></a>ä¼˜åŒ–</h2><h4 id="1-å¦‚ä½•å®šä½æ…¢æŸ¥è¯¢"><a href="#1-å¦‚ä½•å®šä½æ…¢æŸ¥è¯¢" class="headerlink" title="1. å¦‚ä½•å®šä½æ…¢æŸ¥è¯¢"></a>1. å¦‚ä½•å®šä½æ…¢æŸ¥è¯¢</h4><p>ä½¿ç”¨ skywalking ç­‰å·¥å…·ï¼Œè¿½è¸ªåˆ†ææ¥å£çš„æ‰§è¡Œæ—¶é•¿ï¼Œä½¿ç”¨ mysql çš„æ…¢æŸ¥è¯¢æ—¥å¿—</p><h4 id="2-sql-è¯­å¥æ‰§è¡Œçš„å¾ˆæ…¢ï¼Œå¦‚ä½•åˆ†æ"><a href="#2-sql-è¯­å¥æ‰§è¡Œçš„å¾ˆæ…¢ï¼Œå¦‚ä½•åˆ†æ" class="headerlink" title="2. sql è¯­å¥æ‰§è¡Œçš„å¾ˆæ…¢ï¼Œå¦‚ä½•åˆ†æ"></a>2. sql è¯­å¥æ‰§è¡Œçš„å¾ˆæ…¢ï¼Œå¦‚ä½•åˆ†æ</h4><p>ä½¿ç”¨ explan è¯­å¥åˆ†æ sql çš„æ‰§è¡Œè®¡åˆ’ï¼Œç»“æœä¼šå±•ç¤ºèµ°äº†å“ªä¸ªç´¢å¼•ï¼Œç´¢å¼•é•¿åº¦èµ°äº†å¤šå°‘ï¼Œè¯­å¥çš„ä¼˜åŒ–å»ºè®®ç­‰ä¿¡æ¯ã€‚</p><h4 id="3-ç´¢å¼•æ¦‚å¿µåŠç´¢å¼•åº•å±‚æ•°æ®ç»“æ„"><a href="#3-ç´¢å¼•æ¦‚å¿µåŠç´¢å¼•åº•å±‚æ•°æ®ç»“æ„" class="headerlink" title="3. ç´¢å¼•æ¦‚å¿µåŠç´¢å¼•åº•å±‚æ•°æ®ç»“æ„"></a>3. ç´¢å¼•æ¦‚å¿µåŠç´¢å¼•åº•å±‚æ•°æ®ç»“æ„</h4><p>ç´¢å¼•æ˜¯ mysql é¢å¤–ç»´æŠ¤çš„ä¸€äº›æ•°æ®ï¼Œç”¨äºå¿«é€ŸæŸ¥æ‰¾åˆ°æ•°æ®ï¼Œå’Œæ’åºæ•°æ®ï¼Œåº•å±‚æ˜¯ B+æ ‘ï¼Œå’Œ B-æ ‘ç›¸æ¯”ï¼ŒB+æ ‘æ¯ä¸ªæ•°æ®éƒ½å‚¨å­˜åœ¨å¶å­èŠ‚ç‚¹ï¼Œå¹¶ä¸”æ•°æ®ä¹‹é—´ä½¿ç”¨å‰åæŒ‡é’ˆç›¸è¿ï¼Œå½¢æˆä¸€ä¸ªåŒå‘é“¾è¡¨ï¼Œä¾¿äºå¯¹æ•°æ®è¿›è¡ŒèŒƒå›´æŸ¥è¯¢ï¼ŒæŸ¥æ‰¾æ•ˆç‡ä¹Ÿæ›´ç¨³å®šã€‚</p><h4 id="4-èšç°‡ç´¢å¼•å’Œéèšç°‡ç´¢å¼•ã€å›è¡¨æŸ¥è¯¢"><a href="#4-èšç°‡ç´¢å¼•å’Œéèšç°‡ç´¢å¼•ã€å›è¡¨æŸ¥è¯¢" class="headerlink" title="4. èšç°‡ç´¢å¼•å’Œéèšç°‡ç´¢å¼•ã€å›è¡¨æŸ¥è¯¢"></a>4. èšç°‡ç´¢å¼•å’Œéèšç°‡ç´¢å¼•ã€å›è¡¨æŸ¥è¯¢</h4><p>èšç°‡ç´¢å¼•æ˜¯æŒ‡ç´¢å¼•ä¸‹çš„æ˜¯ä¸€è¡Œçš„æ•°æ®ï¼Œéèšç°‡ç´¢å¼•æ˜¯æŒ‡ç´¢å¼•ä¸‹çš„æ•°æ®ä¸æ˜¯å®Œæ•´çš„ä¸€è¡Œï¼Œå›è¡¨æŸ¥è¯¢æ˜¯æŒ‡èµ°äº†éèšé›†ç´¢å¼•ï¼Œä½†éèšé›†ç´¢å¼•ä¸‹çš„æ•°æ®ä¸å®Œæ•´ï¼Œéœ€è¦æ ¹æ®éèšé›†ç´¢å¼•ä¸­çš„èšé›†ç´¢å¼•å†å»èšé›†ç´¢å¼•ä¸­æ‰¾åˆ°å®Œæ•´çš„æ•°æ®</p><h4 id="5-è¦†ç›–ç´¢å¼•ã€è¶…å¤§åˆ†é¡µä¼˜åŒ–"><a href="#5-è¦†ç›–ç´¢å¼•ã€è¶…å¤§åˆ†é¡µä¼˜åŒ–" class="headerlink" title="5. è¦†ç›–ç´¢å¼•ã€è¶…å¤§åˆ†é¡µä¼˜åŒ–"></a>5. è¦†ç›–ç´¢å¼•ã€è¶…å¤§åˆ†é¡µä¼˜åŒ–</h4><p>ç´¢å¼•è¦†ç›–æ˜¯æŒ‡ï¼Œèµ°éèšé›†ç´¢å¼•ï¼Œéèšé›†ç´¢å¼•ä¸­åŒ…å«äº†è¦æŸ¥æ‰¾çš„æ‰€æœ‰å­—æ®µï¼Œå› æ­¤ä¸éœ€è¦å†å›è¡¨æŸ¥è¯¢ï¼Œå› æ­¤æˆ‘ä»¬å¸¸å¸¸å°†ç»å¸¸æŸ¥æ‰¾çš„å­—æ®µè®¾ä¸ºè”åˆç´¢å¼•ï¼Œè¶…å¤§åˆ†é¡µä¼˜åŒ–æ˜¯ä½¿ç”¨å­æŸ¥è¯¢ï¼Œåœ¨å­æŸ¥è¯¢ä¸­æŸ¥æ‰¾åˆ°ä¸»é”®çš„èŒƒå›´ï¼Œç„¶åå†å»èšç°‡ç´¢å¼•ä¸­æŸ¥æ‰¾å¯¹åº”çš„è¡Œï¼Œæé«˜æ€§èƒ½ã€‚</p><h4 id="6-ç´¢å¼•åˆ›å»ºçš„åŸåˆ™"><a href="#6-ç´¢å¼•åˆ›å»ºçš„åŸåˆ™" class="headerlink" title="6. ç´¢å¼•åˆ›å»ºçš„åŸåˆ™"></a>6. ç´¢å¼•åˆ›å»ºçš„åŸåˆ™</h4><ul><li>å¾ˆé•¿çš„å­—æ®µä½œä¸ºç´¢å¼•æ—¶ä½¿ç”¨å‰ç¼€ç´¢å¼•</li><li>å¯¹éœ€è¦ç»å¸¸ä¸€èµ·æŸ¥è¯¢çš„æ•°æ®åˆ›å»ºè”åˆç´¢å¼•</li></ul><h4 id="7-ä»€ä¹ˆæƒ…å†µä¸‹ç´¢å¼•ä¼šå¤±æ•ˆ"><a href="#7-ä»€ä¹ˆæƒ…å†µä¸‹ç´¢å¼•ä¼šå¤±æ•ˆ" class="headerlink" title="7. ä»€ä¹ˆæƒ…å†µä¸‹ç´¢å¼•ä¼šå¤±æ•ˆ"></a>7. ä»€ä¹ˆæƒ…å†µä¸‹ç´¢å¼•ä¼šå¤±æ•ˆ</h4><ul><li>è¿åæœ€å·¦å‰ç¼€æ³•åˆ™</li><li>ç´¢å¼•å­—æ®µå‡ºç°æ¡ä»¶å³è¾¹çš„ç´¢å¼•ä¼šå¤±æ•ˆ</li><li>å‡ºç°å­—ç¬¦ä¸²å·¦è¾¹çš„æ¨¡ç³ŠåŒ¹é…</li><li>åœ¨ç´¢å¼•çš„å­—æ®µä¸Šè¿›è¡Œè®¡ç®—</li><li>å­—ç¬¦ä¸²æ²¡æœ‰åŠ å¼•å·</li></ul><h4 id="8-è°ˆä¸€è°ˆä½ å¯¹-sql-ä¼˜åŒ–çš„ç»éªŒ"><a href="#8-è°ˆä¸€è°ˆä½ å¯¹-sql-ä¼˜åŒ–çš„ç»éªŒ" class="headerlink" title="8. è°ˆä¸€è°ˆä½ å¯¹ sql ä¼˜åŒ–çš„ç»éªŒ"></a>8. è°ˆä¸€è°ˆä½ å¯¹ sql ä¼˜åŒ–çš„ç»éªŒ</h4><ul><li>å»ºè¡¨æ—¶æ ¹æ®æ•°æ®çš„å®é™…æƒ…å†µä½¿ç”¨é€‚åˆçš„æ•°æ®ç±»å‹</li><li>å¦‚æœå­—æ®µå®šé•¿ï¼Œä½¿ç”¨å›ºå®šé•¿åº¦ char ç±»å‹ï¼Œç›¸æ¯”äºä¸å®šé•¿æ•ˆç‡ä¼šæ›´é«˜</li><li>ä¸ºç»å¸¸ä¸€èµ·æŸ¥è¯¢çš„å­—æ®µå»ºç«‹ç´¢å¼•</li><li>åˆ†åº“åˆ†è¡¨</li></ul><h2 id="äº‹åŠ¡"><a href="#äº‹åŠ¡" class="headerlink" title="äº‹åŠ¡"></a>äº‹åŠ¡</h2><h4 id="1-äº‹åŠ¡çš„ç‰¹æ€§"><a href="#1-äº‹åŠ¡çš„ç‰¹æ€§" class="headerlink" title="1. äº‹åŠ¡çš„ç‰¹æ€§"></a>1. äº‹åŠ¡çš„ç‰¹æ€§</h4><ul><li>Aï¼šåŸå­æ€§ï¼Œä¸€ä¸ªäº‹åŠ¡æ˜¯æ‰§è¡Œçš„æœ€å°å•å…ƒ</li><li>Cï¼šä¸€è‡´æ€§ï¼Œè¦ä¹ˆå…¨éƒ½æ‰§è¡ŒæˆåŠŸï¼Œè¦ä¹ˆå…¨éƒ¨æ‰§è¡Œå¤±è´¥</li><li>Iï¼šéš”ç¦»æ€§ï¼Œåˆ«çš„äº‹åŠ¡çš„æ“ä½œä¸ä¼šå½±å“å½“å‰äº‹åŠ¡</li><li>Dï¼šæŒä¹…æ€§ï¼Œäº‹åŠ¡æäº¤åå¯¹æ•°æ®çš„æ›´æ”¹æ˜¯æ°¸ä¹…çš„</li></ul><h4 id="2-å¹¶å‘äº‹åŠ¡é—®é¢˜ã€éš”ç¦»çº§åˆ«"><a href="#2-å¹¶å‘äº‹åŠ¡é—®é¢˜ã€éš”ç¦»çº§åˆ«" class="headerlink" title="2. å¹¶å‘äº‹åŠ¡é—®é¢˜ã€éš”ç¦»çº§åˆ«"></a>2. å¹¶å‘äº‹åŠ¡é—®é¢˜ã€éš”ç¦»çº§åˆ«</h4><p>åœ¨å¹¶å‘äº‹åŠ¡ä¸­å­˜åœ¨ä¸‰ä¸ªé—®é¢˜</p><ul><li>è„è¯»ï¼Œè¯»å–åˆ°äº†åˆ«çš„äº‹åŠ¡è¿˜æ²¡æœ‰æäº¤çš„äº‹åŠ¡</li><li>ä¸å¯é‡å¤è¯»ï¼Œä¸€ä¸ªäº‹åŠ¡ä¸­ä¸¤æ¬¡è¯»å–åˆ°çš„åŒä¸€æ¡è®°å½•ä¸­æœ‰å­—æ®µå€¼ä¸åŒ</li><li>å¹»è¯»ï¼ŒæŸ¥æ‰¾æ—¶ä¸å­˜åœ¨è¿™æ¡è®°å½•ï¼Œæ’å…¥æ—¶å´å‘ç°å·²ç»å­˜åœ¨äº†è¿™æ¡è®°å½•</li></ul><p>ä¸ºäº†è§£å†³è¿™ä¸‰ä¸ªé—®é¢˜ï¼Œäº‹åŠ¡åˆæœ‰å››ä¸ªä¸åŒçš„éš”ç¦»çº§åˆ«</p><ul><li>è¯»æœªæäº¤ï¼Œè„è¯»ã€ä¸å¯é‡å¤è¯»å’Œå¹»è¯»éƒ½å¯èƒ½å‡ºç°</li><li>è¯»å·²æäº¤ï¼šåªèƒ½é¿å…è„è¯»</li><li>å¯é‡å¤è¯»ï¼šå¯ä»¥é¿å…è„è¯»å’Œä¸å¯é‡å¤è¯»</li><li>ä¸²è¡ŒåŒ–ï¼šå¯ä»¥é¿å…æ‰€æœ‰é—®é¢˜<br>mysql é»˜è®¤çš„éš”ç¦»çº§åˆ«æ—¶å¯é‡å¤è¯»ï¼Œè¿™å››ä¸ªéš”ç¦»çº§åˆ«ä¸­è¶Šå¾€ä¸‹æ•°æ®å®‰å…¨æ€§è¶Šé«˜ï¼Œä½†æ˜¯æ€§èƒ½è¶Šå·®</li></ul><h4 id="3-äº‹åŠ¡-undo-log-å’Œ-redo-log-çš„åŒºåˆ«"><a href="#3-äº‹åŠ¡-undo-log-å’Œ-redo-log-çš„åŒºåˆ«" class="headerlink" title="3. äº‹åŠ¡-undo log å’Œ redo log çš„åŒºåˆ«"></a>3. äº‹åŠ¡-undo log å’Œ redo log çš„åŒºåˆ«</h4><p>undo log å‚¨å­˜çš„æ˜¯äº‹åŠ¡çš„å›æ»šè¯­å¥ï¼Œæ¯”å¦‚äº‹åŠ¡ä¸­æ‰§è¡Œ deleteï¼Œredo log ä¼šç”Ÿæˆ insert è¯­å¥ã€‚</p><p>redo log å‚¨å­˜çš„æ˜¯æ•°æ®é¡µçš„ç‰©ç†å˜åŒ–ï¼Œmysql ç›´æ¥æ“ä½œçš„æ˜¯å†…å­˜ä¸­çš„ç¼“å†²æ± ä¸­çš„ç‰‡ï¼ŒæŒ‰ç…§ä¸€å®šçš„é¢‘ç‡åŒæ­¥åˆ°ç£ç›˜ä¸­ï¼Œä½†æœ‰å¯èƒ½å‡ºç°å®•æœºï¼Œæ•°æ®æœªåŒæ­¥åˆ°ç£ç›˜ï¼Œé€ æˆæ•°æ®ä¸¢å¤±çš„æƒ…å†µï¼Œundo log å°±æ˜¯è®°å½•è¿™ç§æƒ…å†µä¸‹çš„æ“ä½œï¼Œæ•°æ®åº“æ¢å¤æ—¶ï¼Œè¯»å– undo log æ¢å¤æœªåŒæ­¥çš„æ•°æ®</p><h2 id="è§£é‡Šä¸€ä¸‹-mvcc"><a href="#è§£é‡Šä¸€ä¸‹-mvcc" class="headerlink" title="è§£é‡Šä¸€ä¸‹ mvcc"></a>è§£é‡Šä¸€ä¸‹ mvcc</h2><p>mvcc æ˜¯å¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶ï¼Œç”¨äºè®°å½•å¤šä¸ªäº‹åŠ¡å¯¹æ•°æ®çš„æ“ä½œçš„ç‰ˆæœ¬ï¼Œæ˜¯çš„è¯»æ“ä½œå’Œå†™æ“ä½œæ²¡æœ‰å†²çªï¼Œä¸»è¦ç”±éšè—å­—æ®µã€undo log å’Œè¯»è§†å›¾ç»„æˆ ã€‚</p><ul><li><p>éšè—å­—æ®µï¼šåœ¨æ¯ä¸ªè¡¨ä¸­mysql ä¼šé»˜è®¤ç”Ÿæˆå‡ ä¸ªå­—æ®µï¼ŒåŒ…æ‹¬äº†å½“å‰äº‹åŠ¡çš„ idï¼Œä¸Šä¸€ä¸ªç‰ˆæœ¬çš„æŒ‡é’ˆç­‰ä¿¡æ¯ã€‚</p></li><li><p>undo logï¼šå­˜å‚¨ç‰ˆæœ¬æ•°æ®ï¼Œåœ¨å†…éƒ¨ä¼šå½¢æˆä¸€ä¸ªç‰ˆæœ¬é“¾ï¼Œåœ¨å¤šä¸ªäº‹åŠ¡å¹¶è¡Œæ“ä½œæŸä¸€è¡Œè®°å½•ï¼Œè®°å½•ä¸åŒäº‹åŠ¡ä¿®æ”¹æ•°æ®çš„ç‰ˆæœ¬</p></li></ul><p> readView è§£å†³çš„æ˜¯ä¸€ä¸ªäº‹åŠ¡æŸ¥è¯¢é€‰æ‹©ç‰ˆæœ¬çš„é—®é¢˜ï¼Œåœ¨å†…éƒ¨å®šä¹‰äº†ä¸€äº›åŒ¹é…è§„åˆ™å’Œå½“å‰çš„ä¸€äº›äº‹åŠ¡ id åˆ¤æ–­è¯¥è®¿é—®é‚£ä¸ªç‰ˆæœ¬çš„æ•°æ®ï¼Œä¸åŒçš„éš”ç¦»çº§åˆ«å¿«ç…§è¯»æ˜¯ä¸ä¸€æ ·çš„ï¼Œæœ€ç»ˆçš„è®¿é—®çš„ç»“æœä¸ä¸€æ ·ã€‚å¦‚æœæ˜¯ rc éš”ç¦»çº§åˆ«ï¼Œæ¯ä¸€æ¬¡æ‰§è¡Œå¿«ç…§è¯»æ—¶ç”Ÿæˆ ReadViewï¼Œå¦‚æœæ˜¯ rr éš”ç¦»çº§åˆ«ä»…åœ¨äº‹åŠ¡ä¸­ç¬¬ä¸€æ¬¡æ‰§è¡Œå¿«ç…§è¯»æ—¶ç”Ÿæˆ ReadViewï¼Œåç»­å¤ç”¨</p><h4 id="ä¸»ä»åŒæ­¥"><a href="#ä¸»ä»åŒæ­¥" class="headerlink" title="ä¸»ä»åŒæ­¥"></a>ä¸»ä»åŒæ­¥</h4><p>ä¸»åº“å°† DML å’Œ DDL ç”Ÿæˆ binlog äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œä½†ä¸åŒ…æ‹¬ selet å’Œ show å‘½ä»¤ï¼Œç„¶åä»æœºè·å–ä¸»æœºä¸­çš„ binlogï¼ŒåŠ è½½åˆ°ä»æœºçš„ä¸­é—´æ—¥å¿—ï¼Œä»æœºè¯»å–ä¸­é—´æ—¥å¿—ï¼Œæ‰§è¡Œå‘½ä»¤ï¼Œå®ŒæˆåŒæ­¥</p><h4 id="åˆ†åº“åˆ†è¡¨"><a href="#åˆ†åº“åˆ†è¡¨" class="headerlink" title="åˆ†åº“åˆ†è¡¨"></a>åˆ†åº“åˆ†è¡¨</h4><h1 id="äºŒã€é¢è¯•é¢˜"><a href="#äºŒã€é¢è¯•é¢˜" class="headerlink" title="äºŒã€é¢è¯•é¢˜"></a>äºŒã€é¢è¯•é¢˜</h1><ol><li></li><li></li></ol>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>redis</title>
      <link href="/2023/12/08/redis/"/>
      <url>/2023/12/08/redis/</url>
      
        <content type="html"><![CDATA[<p>[Toc]</p><hr><h1 id="ä¸€ã€å†…å®¹æ•´ç†"><a href="#ä¸€ã€å†…å®¹æ•´ç†" class="headerlink" title="ä¸€ã€å†…å®¹æ•´ç†"></a>ä¸€ã€å†…å®¹æ•´ç†</h1><h2 id="ç¼“å­˜"><a href="#ç¼“å­˜" class="headerlink" title="ç¼“å­˜"></a>ç¼“å­˜</h2><h4 id="1-ç¼“å­˜ç©¿é€"><a href="#1-ç¼“å­˜ç©¿é€" class="headerlink" title="1. ç¼“å­˜ç©¿é€"></a>1. ç¼“å­˜ç©¿é€</h4><p>æœ‰å¤§é‡çš„è¯·æ±‚è®¿é—®ä¸å­˜åœ¨çš„ keyï¼Œé¦–å…ˆè®¿é—® redisï¼Œå‘ç°ä¸å­˜åœ¨å½“å‰ key å åå†è®¿é—®æ•°æ®åº“ï¼Œå› ä¸ºå¹¶ä¸å­˜åœ¨è¿™æ¡æ•°æ®ï¼Œå½“å‰æŸ¥è¯¢çš„ç»“æœä¸º<code>null</code>ï¼Œä¹Ÿä¸ä¼šåœ¨ redis ä¸­å»ºç«‹ç¼“å­˜ï¼Œå¯¼è‡´æ‰€æœ‰çš„è¯·æ±‚å…¨éƒ½æ‰“åœ¨æ•°æ®åº“ä¸Šï¼Œå¯¼è‡´æ•°æ®åº“å´©æºƒ</p><ul><li>ç¼“å­˜ä¸­æ·»åŠ ç©ºå€¼<br>ä¼˜ç‚¹ï¼šå®ç°ç®€å•<br>ç¼ºç‚¹ï¼šé€ æˆå†…å­˜èµ„æºçš„æµªè´¹</li><li>å¸ƒéš†è¿‡æ»¤å™¨ï¼šåˆ›å»ºä¸€ä¸ªæ¯”è¾ƒå¤§çš„æ•°ç»„ï¼Œåˆ©ç”¨æ¯”ç‰¹ä½ï¼Œé€šè¿‡è®¡ç®— key çš„å¤šä¸ª hash å€¼ï¼Œå°†å¯¹åº”ä½çš„å€¼å˜ä¸º 1ï¼Œè¯·æ±‚æ—¶å…ˆç»è¿‡å¸ƒéš†è¿‡æ»¤å™¨ï¼Œé€šè¿‡è®¡ç®—ç›®æ ‡ key çš„ hash åˆ¤æ–­å¯¹åº”ä½ç½®çš„å€¼æ˜¯å¦å…¨ä¸º 1 åˆ¤æ–­æ˜¯å¦å­˜åœ¨ï¼Œä½†æœ‰è¯¯åˆ¤çš„å¯èƒ½ï¼šä¸€ä¸ª key çš„ hash å¯¹åº”åˆ°ä¸¤ä¸ªä¸åŒ key çš„ hash çš„æ¯”ç‰¹ä½ã€‚<br>ä¼˜ç‚¹ï¼šä¸ä¼šé€ æˆå†…å­˜èµ„æºçš„æµªè´¹<br>ç¼ºç‚¹ï¼šå¢åŠ è¿‡æ»¤å™¨ï¼Œä¼šé™ä½ä¸€äº›æ€§èƒ½ï¼Œå®ç°è¾ƒä¸ºå¤æ‚ï¼Œæœ‰ä¸€å®šæ¦‚ç‡ä¼šè¯¯åˆ¤ã€‚</li></ul><h4 id="1-ç¼“å­˜å‡»ç©¿"><a href="#1-ç¼“å­˜å‡»ç©¿" class="headerlink" title="1. ç¼“å­˜å‡»ç©¿"></a>1. ç¼“å­˜å‡»ç©¿</h4><p>æŸä¸ªçƒ­ç‚¹ key çªç„¶å¤±æ•ˆï¼Œæ‰€æœ‰çš„è¯·æ±‚éƒ½æ‰“åˆ°æ•°æ®åº“ï¼Œå¯¼è‡´æ•°æ®åº“çš„å´©æºƒ</p><ul><li>è®¾ç½®äº’æ–¥é”ï¼šå½“ç¼“å­˜å¤±æ•ˆåï¼Œé€šè¿‡ setnx è®¾ç½®ä¸€ä¸ªäº’æ–¥é”ï¼Œæ‹¿åˆ°è¿™æŠŠé”çš„çº¿ç¨‹å»è¿›è¡Œç¼“å­˜é‡å»º<br>ä¼˜ç‚¹ï¼šæ•°æ®ä¸€è‡´æ€§è¾ƒå¼º<br>ç¼ºç‚¹ï¼šæ€§èƒ½è¾ƒä½ï¼Œå¯èƒ½äº§ç”Ÿæ­»é”é—®é¢˜</li><li>è®¾ç½®é€»è¾‘è¿‡æœŸæ—¶é—´ï¼šåœ¨å»ºç«‹ç¼“å­˜æ—¶å½“å‰ç¼“å­˜ä¸è®¾ç½®è¿‡æœŸæ—¶é—´ï¼Œè€Œæ˜¯åŠ å…¥ä¸€ä¸ªé€»è¾‘è¿‡æœŸæ—¶é—´ï¼ŒæŸ¥è¯¢åç›´æ¥è¿”å›å€¼å¹¶åˆ¤æ–­æ¯”è¾ƒå½“å‰æ—¶é—´å’Œé€»è¾‘è¿‡æœŸæ—¶é—´ï¼Œå¦‚æœè¿‡æœŸï¼Œå¼€å¯å¦ä¸€ä¸ªçº¿ç¨‹è¿›è¡Œæ•°æ®çš„åŒæ­¥ã€‚<br>ä¼˜ç‚¹ï¼šæ•ˆç‡è¾ƒé«˜ï¼Œæ€§èƒ½ä¸ä¼šæœ‰æ˜æ˜¾ä¸‹é™<br>ç¼ºç‚¹ï¼šè¿‡æœŸåï¼Œè¿”å›çš„ä»æ—§æ˜¯æ—§æ•°æ®ï¼Œæ•°æ®ä¸€è‡´æ€§è¾ƒå·®</li></ul><h4 id="2-ç¼“å­˜é›ªå´©"><a href="#2-ç¼“å­˜é›ªå´©" class="headerlink" title="2. ç¼“å­˜é›ªå´©"></a>2. ç¼“å­˜é›ªå´©</h4><p>åœ¨æŸä¸ªæ—¶é—´ï¼Œå¤§é‡çš„ key åŒæ—¶å¤±æ•ˆ</p><ul><li>åœ¨åˆ›å»ºç¼“å­˜æ—¶ï¼Œåœ¨è®¾ç½®çš„è¿‡æœŸæ—¶é—´åæ·»åŠ ä¸€ä¸ªéšæœºæ•°</li></ul><h4 id="3-åŒå†™ä¸€è‡´æ€§"><a href="#3-åŒå†™ä¸€è‡´æ€§" class="headerlink" title="3. åŒå†™ä¸€è‡´æ€§"></a>3. åŒå†™ä¸€è‡´æ€§</h4><p>æ•°æ®åº“å’Œç¼“å­˜æ•°æ®çš„ä¸€è‡´æ€§</p><ul><li>å¯ä»¥æ¥å—ä¸€å®šå»¶æ—¶ï¼šåŒåˆ ï¼Œåˆ é™¤ç¼“å­˜ï¼Œæ›´æ–°æ•°æ®åº“ï¼Œå†åˆ é™¤ä¸€æ¬¡ç¼“å­˜<br>æ›´æ–°æ•°æ®æ—¶åˆ†ä¸ºå…ˆæ›´æ–°æ•°æ®åº“å’Œå…ˆåˆ é™¤ç¼“å­˜ï¼Œä¸¤è€…éƒ½æœ‰å¯èƒ½äº§ç”Ÿæ•°æ®çš„ä¸ä¸€è‡´<br><img src="/image/redis/1689438549264.png" alt="1689438549264"><br><img src="/image/redis/1689438479837.png" alt="1689438479837"><br>å…¶ä¸­å…ˆåˆ æ•°æ®åº“çš„æ–¹å¼å‘ç”Ÿçš„æ¦‚ç‡è¦è¿œè¿œå°äºå…ˆåˆ é™¤ç¼“å­˜<br>ä¼˜ç‚¹ï¼šå®ç°è¾ƒä¸ºç®€å•<br>ç¼ºç‚¹ï¼šå»¶æ—¶çš„æ—¶é•¿ä¸å¥½æ§åˆ¶ï¼Œæœ‰ä¸€å®šçš„æ¦‚ç‡äº§ç”Ÿè„æ•°æ®ï¼Œå¯ä»¥ä½¿ç”¨æ¶ˆæ¯é˜Ÿåˆ—ï¼Œå¯¹ç¼“å­˜è¿›è¡Œæ›´æ”¹ï¼Œé¿å…è„æ•°æ®çš„äº§ç”Ÿï¼ˆcanalï¼‰</li><li>å¼ºä¸€è‡´æ€§ï¼šé‡‡ç”¨çš„æ˜¯ redisson å®ç°çš„è¯»å†™é”ï¼Œåœ¨è¯»çš„æ—¶å€™æ·»åŠ å…±äº«é”ï¼Œå¯ä»¥ä¿è¯è¯»è¯»ä¸äº’æ–¥ï¼Œè¯»å†™äº’æ–¥ã€‚å½“æˆ‘ä»¬æ›´æ–°æ•°æ®çš„æ—¶å€™ï¼Œæ·»åŠ æ’ä»–é”ï¼Œå®ƒæ˜¯è¯»å†™ï¼Œè¯»è¯»éƒ½äº’æ–¥ï¼Œè¿™æ ·å°±èƒ½ä¿è¯åœ¨å†™æ•°æ®çš„åŒæ—¶æ˜¯ä¸ä¼šè®©å…¶ä»–çº¿ç¨‹è¯»æ•°æ®çš„ï¼Œé¿å…äº†è„æ•°æ®</li></ul><h4 id="4-æŒä¹…åŒ–"><a href="#4-æŒä¹…åŒ–" class="headerlink" title="4. æŒä¹…åŒ–"></a>4. æŒä¹…åŒ–</h4><ul><li>RDBï¼ˆå†…å­˜å¿«ç…§ï¼‰ä¿å­˜çš„æ˜¯ redis æŸä¸€æ—¶åˆ»çš„æ•°æ®å¿«ç…§ï¼Œä¸»çº¿ç¨‹ fork ä¸€ä¸ªå­çº¿ç¨‹ï¼Œåœ¨å†…å­˜ç©ºé—´ä¸­å…±äº«ä¸€ä¸ªé¡µè¡¨ï¼Œèƒ½å¤Ÿè®¿é—®åˆ°ç›¸åŒçš„å†…å­˜ï¼Œå­çº¿ç¨‹å®Œæˆå†…å­˜å¿«ç…§çš„ä¿å­˜ï¼Œå¯ä»¥é€šè¿‡é…ç½® save è®¾ç½®å¤šå°‘æ—¶é—´å†…ä¿®æ”¹å¤šå°‘ä¸ª key ä¿å­˜å¿«ç…§<br>ä¼˜ç‚¹ï¼šæ•°æ®é‡è¾ƒå°<br>ç¼ºç‚¹ï¼šå‘ç”Ÿå®•æœºæ—¶ï¼Œä¸¢å¤±çš„æ•°æ®ç›¸å¯¹è¾ƒå¤š</li><li>AOFï¼ˆå‘½ä»¤ï¼‰ä¿å­˜çš„æ˜¯ä¸€æ¡ä¸€æ¡çš„ redis å‘½ä»¤ï¼Œå¯ä»¥é€šè¿‡æ›´æ”¹ appendfsync é…ç½®ä¿å­˜å¢åŠ å‘½ä»¤çš„æ—¶é—´é—´éš”ï¼Œé€šè¿‡ï¼ï¼ï¼é…ç½®å°†æŒ‡ä»¤é‡æ’ï¼Œå°†å¯¹åŒä¸€ä¸ª key çš„å¤šæ¬¡æ“ä½œåˆå¹¶æˆä¸€ä¸ªï¼Œä»¥å‡å°‘æ•°æ®é‡<br>ä¼˜ç‚¹ï¼šå‘ç”Ÿå®•æœºæ—¶ä¸¢å¤±æ•°æ®ç›¸å¯¹è¾ƒå°‘<br>ç¼ºç‚¹ï¼šæ•°æ®é‡è¾ƒå¤§</li></ul><h4 id="5-æ•°æ®è¿‡æœŸç­–ç•¥"><a href="#5-æ•°æ®è¿‡æœŸç­–ç•¥" class="headerlink" title="5. æ•°æ®è¿‡æœŸç­–ç•¥"></a>5. æ•°æ®è¿‡æœŸç­–ç•¥</h4><p>å½“åˆ°äº† key è®¾ç½®çš„è¿‡æœŸæ—¶é—´åï¼Œä»å†…å­˜ä¸­åˆ é™¤ key çš„ç­–ç•¥</p><ul><li>æƒ°æ€§åˆ é™¤ï¼šåˆ°äº†è¿‡æœŸæ—¶é—´åï¼Œä¸ä¼šç«‹å³åˆ é™¤å†…å­˜ä¸­çš„ key è€Œæ˜¯ç­‰åˆ°å†æ¬¡è®¿é—®è¿™ä¸ª key çš„æ—¶å€™è¿”å›<code>null</code>å¹¶ä»å†…å­˜ä¸­åˆ é™¤</li><li>å®šæœŸåˆ é™¤ï¼šæŒ‰ç…§ä¸€å®šçš„æ—¶é—´é—´éš”æ‰«ææ‰€æœ‰çš„ keyï¼Œå‘ç°åˆ°äº†è¿‡æœŸæ—¶é—´äº†å†åˆ é™¤ï¼Œè¯¥æ“ä½œçš„æ—¶é—´ä¸èƒ½è¶…è¿‡è®¾ç½®çš„æ—¶é•¿ï¼Œè¶…è¿‡è®¾ç½®æ—¶é•¿ä¼šç›´æ¥ç»“æŸï¼Œç­‰å¾…ä¸‹ä¸€è½®</li></ul><h4 id="6-æ•°æ®æ·˜æ±°ç­–ç•¥"><a href="#6-æ•°æ®æ·˜æ±°ç­–ç•¥" class="headerlink" title="6. æ•°æ®æ·˜æ±°ç­–ç•¥"></a>6. æ•°æ®æ·˜æ±°ç­–ç•¥</h4><p>å½“ç³»ç»Ÿæ— å¯ç”¨å†…å­˜æ—¶ redis çš„è¡Œä¸ºï¼Œé»˜è®¤è®¾ç½®çš„æ˜¯ç›´æ¥æ‹’ç»è®¾ç½® key çš„è¯·æ±‚ï¼Œå¦å¤–è¿˜å¯ä»¥è®¾ç½®æ·˜æ±°ç­–ç•¥ï¼Œä¾‹å¦‚éšæœºï¼ŒæŒ‰ç…§è®¿é—®é¢‘ç‡ç­‰ï¼Œå…¶ä¸­æœ‰ä¸¤ä¸ªé‡è¦æ¦‚å¿µ LRU å’Œ LFUï¼ŒLRUï¼ˆæœ€è¿‘æœ€å°‘ä½¿ç”¨ï¼‰å½“å‰æ—¶é—´å‡å»æ¯ä¸ª key æœ€åä¸€æ¬¡è®¿é—®çš„æ—¶é—´ï¼Œå¾—åˆ°æ¯ä¸ª key æ²¡æœ‰è¢«è®¿é—®çš„æ—¶é•¿ï¼ŒLFUï¼ˆæœ€å°‘é¢‘ç‡ä½¿ç”¨ï¼‰ä¸€æ®µæ—¶é—´å†…æ¯ä¸ª key çš„è®¿é—®æ¬¡æ•°</p><h2 id="åˆ†å¸ƒå¼é”"><a href="#åˆ†å¸ƒå¼é”" class="headerlink" title="åˆ†å¸ƒå¼é”"></a>åˆ†å¸ƒå¼é”</h2><ol><li>ä½¿ç”¨åœºæ™¯<br>åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ä¸€ä¸ªåº”ç”¨éƒ¨ç½²åœ¨å¤šå°æœåŠ¡å™¨ä¸Šï¼Œå†…å­˜ä¸åœ¨åŒä¸€ä¸ªç©ºé—´</li><li>åˆ†å¸ƒå¼é”-å®ç°åŸç†ï¼ˆsetnxã€redissonï¼‰<br>ä½¿ç”¨ setnx å‘½ä»¤ï¼ˆå®é™…ä½¿ç”¨ set lock 1 nx ex 10 çš„å½¢å¼ï¼Œç›¸æ¯” setnx ä¿è¯é”å’Œè¿‡æœŸæ—¶é—´å‘½ä»¤çš„åŸå­æ€§ï¼‰ï¼Œå¦‚æœè¿”å› true è¯´æ˜æ‹¿åˆ°äº†é”ï¼Œfalse åˆ™è¡¨ç¤ºæ²¡æœ‰æ‹¿åˆ°é”ã€‚<br>ä½¿ç”¨ redissonï¼Œredisson å¯ä»¥æ§åˆ¶é”çš„å¤±æ•ˆæ—¶é—´å’Œç­‰å¾…æ—¶é—´ï¼Œæ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œä¼šå¼•å…¥ä¸€ä¸ªçœ‹é—¨ç‹—æœºåˆ¶ï¼Œæ¯ä¸ªä¸€æ®µæ—¶é—´ä¼šæ£€æŸ¥ä¸šåŠ¡æ˜¯å¦è¿˜æŒæœ‰é”ï¼Œè¿˜æœ‰é”å°±ç»™è¿™æŠŠé”å»¶é•¿å¤±æ•ˆæ—¶é—´ï¼Œæ²¡æœ‰é”å°±é‡Šæ”¾é”ã€‚ä¸€ä¸ªå®¢æˆ·æŒæœ‰é”çš„æ—¶å€™ï¼Œå¦å¤–çš„å®¢æˆ·è¿›æ¥ä¸ä¼šç«‹åˆ»æ‹’ç»è€Œæ˜¯ä¼šè‡ªæ—‹ç­‰å¾…ï¼Œæé«˜æ€§èƒ½ï¼Œé”å¯ä»¥é‡å…¥</li></ol><h2 id="ä¸»ä»å¤åˆ¶"><a href="#ä¸»ä»å¤åˆ¶" class="headerlink" title="ä¸»ä»å¤åˆ¶"></a>ä¸»ä»å¤åˆ¶</h2><ol><li>ä¸»ä»å¤åˆ¶ã€ä¸»ä»åŒæ­¥æµç¨‹<br>ä»æœºå‘èµ· replication è¯·æ±‚ï¼Œæºå¸¦ repidï¼ˆæ•°æ®é›† Idï¼‰å’Œ offsideï¼Œä¸»æœºæ ¹æ®ä»æœº repid å’Œè‡ªå·±çš„ repid æ˜¯å¦ä¸€è‡´é€‰æ‹©å…¨é‡åŒæ­¥è¿˜æ˜¯å¢é‡åŒæ­¥ï¼Œå…¨é‡åŒæ­¥æ—¶ï¼Œfork å­çº¿ç¨‹æ‰§è¡Œ bgsave ç”Ÿæˆ RDB æ–‡ä»¶ï¼Œä¼ è¾“åˆ°ä»æœºï¼Œä»æœºæ¸…ç©ºæ•°æ®ï¼ŒåŠ è½½ RDBï¼Œä¸»æœºç”Ÿæˆ RDB æ–‡ä»¶æ—¶è‹¥æœ‰æ–°çš„æ“ä½œï¼Œä¼šå°†æ“ä½œåŠ è½½åˆ°ä¸€ä¸ªæ—¥å¿—æ–‡ä»¶ï¼Œå‘é€ RDB åå†å‘é€æ—¥å¿—æ–‡ä»¶ï¼Œä¿è¯æ•°æ®çš„ä¸€è‡´æ€§ï¼Œå¢é‡åŒæ­¥æ—¶ï¼Œ</li><li>å“¨å…µæ¨¡å¼ã€é›†ç¾¤è„‘è£‚<br>ä½¿ç”¨å“¨å…µé›†ç¾¤å¯¹é›†ç¾¤è¿›è¡Œç›‘æ§ï¼Œå‘ç°ä¸»èŠ‚ç‚¹ä¸‹çº¿ååï¼Œä»ä»èŠ‚ç‚¹ä¸­é€‰ä¸¾æ–°çš„ä¸»èŠ‚ç‚¹ï¼Œå¹¶é€šçŸ¥å®¢æˆ·ç«¯è¦å¾€æ–°çš„ä¸»èŠ‚ç‚¹å†™ã€‚<br>é›†ç¾¤è„‘è£‚æ˜¯æŒ‡å› ä¸ºç½‘ç»œç­‰åŸå› å“¨å…µå‘ç°ä¸»èŠ‚ç‚¹ä¸‹çº¿ï¼Œä»ä»æœºä¸­é€‰ä¸¾æ–°ä¸»èŠ‚ç‚¹ï¼Œä½†å®é™…ä¸»èŠ‚ç‚¹å¹¶æ²¡æœ‰ä¸‹çº¿ï¼Œå®¢æˆ·ç«¯ä»æ—§åœ¨ä¸»èŠ‚ç‚¹å†™å…¥æ•°æ®ï¼Œåç»­ç½‘ç»œæ¢å¤æ­£å¸¸åï¼Œæ—§çš„ä¸»èŠ‚ç‚¹åŠ å…¥é›†ç¾¤ä¼šå˜æˆä»èŠ‚ç‚¹ï¼Œä¼šåˆ é™¤å·²æœ‰çš„æ‰€æœ‰æ•°æ®ï¼Œå¯¼è‡´å®¢æˆ·ç«¯åç»­å†™å…¥å†…å®¹çš„ä¸¢å¤±ã€‚</li><li>åˆ†ç‰‡é›†ç¾¤ã€æ•°æ®è¯»å†™è§„åˆ™<br>Redis æœ‰æ•°æ®åˆ†ç‰‡ï¼ï¼ï¼<br>åœ¨è¯¥æ¨¡å¼ä¸‹ï¼Œæ¯ä¸ªæ•°æ®èŠ‚ç‚¹éƒ½æ˜¯å«æœ‰ä¸»ä»èŠ‚ç‚¹çš„é›†ç¾¤ï¼Œå“ˆå¸Œæ§½ï¼Œè®¾ç½® key æ—¶ï¼Œæ›´å…· key çš„ hash å€¼è®¡ç®—å‡ºå¯¹åº”çš„æ•°æ®èŠ‚ç‚¹ä½ç½®ï¼Œå¹¶ä¸”è‡ªåŠ¨è·¯ç”±åˆ°å¯¹åº”çš„æ•°æ®èŠ‚ç‚¹ä¸»èŠ‚ç‚¹</li></ol><h1 id="äºŒã€é¢è¯•é¢˜"><a href="#äºŒã€é¢è¯•é¢˜" class="headerlink" title="äºŒã€é¢è¯•é¢˜"></a>äºŒã€é¢è¯•é¢˜</h1><ol><li></li><li>docker run â€“name redis -p 6379:6379 -v &#x2F;f&#x2F;docker&#x2F;redis&#x2F;conf&#x2F;redis.conf:&#x2F;etc&#x2F;redis&#x2F;redis.conf -v &#x2F;f&#x2F;docker&#x2F;redis&#x2F;data&#x2F;:&#x2F;data&#x2F; -v &#x2F;f&#x2F;docker&#x2F;redis&#x2F;log&#x2F;redis-server.log:&#x2F;log&#x2F;redis-server.log -d redis:7.2.2 redis-server &#x2F;etc&#x2F;redis&#x2F;redis.conf</li><li>docker run â€“name redis -p 6379:6379 -d redis:7.2.2</li></ol>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>å¹¶å‘ç¼–ç¨‹</title>
      <link href="/2023/12/08/%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/"/>
      <url>/2023/12/08/%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/</url>
      
        <content type="html"><![CDATA[<p>[Toc]</p><hr><h1 id="ä¸€ã€å†…å®¹æ•´ç†"><a href="#ä¸€ã€å†…å®¹æ•´ç†" class="headerlink" title="ä¸€ã€å†…å®¹æ•´ç†"></a>ä¸€ã€å†…å®¹æ•´ç†</h1><h2 id="å¤šçº¿ç¨‹åŸºç¡€"><a href="#å¤šçº¿ç¨‹åŸºç¡€" class="headerlink" title="å¤šçº¿ç¨‹åŸºç¡€"></a>å¤šçº¿ç¨‹åŸºç¡€</h2><h4 id="çº¿ç¨‹å’Œè¿›ç¨‹çš„åŒºåˆ«ï¼Ÿ"><a href="#çº¿ç¨‹å’Œè¿›ç¨‹çš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="çº¿ç¨‹å’Œè¿›ç¨‹çš„åŒºåˆ«ï¼Ÿ"></a>çº¿ç¨‹å’Œè¿›ç¨‹çš„åŒºåˆ«ï¼Ÿ</h4><p>å½“ç³»ç»Ÿä»ç£ç›˜ä¸­å°†ç¡¬ç›˜ä¸­çš„æŸä¸ªç¨‹åºä»£ç åˆ°å†…å­˜ï¼Œå°±å¼€å¯äº†ä¸€ä¸ªè¿›ç¨‹ï¼Œä¸€ä¸ªè¿›ç¨‹å¯ä»¥æœ‰å¤šä¸ªçº¿ç¨‹ï¼Œçº¿ç¨‹ç”±ä¸€æ¡ä¸€æ¡çš„æŒ‡ä»¤ç»„æˆ</p><p>è¿›ç¨‹æ˜¯è¿è¡Œä¸­ç¨‹åºçš„å®ä¾‹ï¼ŒåŒ…å«äº†çº¿ç¨‹ï¼Œä»¥ä¾¿åŒæ—¶æ‰§è¡Œå¤šä¸ªä»»åŠ¡<br>è¿›ç¨‹é—´çš„å†…å­˜ç©ºé—´ä¸æ˜¯å…±äº«çš„ï¼Œä½†çº¿ç¨‹ä¸­çš„ç©ºé—´å¯¹è¿›ç¨‹ä¸­çš„çº¿ç¨‹æ˜¯å…±äº«çš„<br>çº¿ç¨‹æ›´è½»é‡ï¼Œä¸Šä¸‹æ–‡åˆ‡æ¢çš„æˆæœ¬æ¯”è¿›ç¨‹æ›´ä½</p><h4 id="å¹¶è¡Œå’Œå¹¶å‘æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"><a href="#å¹¶è¡Œå’Œå¹¶å‘æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ" class="headerlink" title="å¹¶è¡Œå’Œå¹¶å‘æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"></a>å¹¶è¡Œå’Œå¹¶å‘æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h4><p>å¹¶å‘æ˜¯ä¸åŒçš„çº¿ç¨‹ä»¥æçŸ­çš„æ—¶é—´åœ¨ cpu ä¸­äº¤æ›¿æ‰§è¡Œ<br>å¹¶è¡Œæ˜¯å¤šä¸ªçº¿ç¨‹åœ¨ä¸åŒçš„ cpu æ ¸å¿ƒä¸­æ‰§è¡Œ<br>å¹¶è¡Œæ˜¯åŒæ—¶æ‰§è¡Œå¤šä¸ªä»»åŠ¡çš„èƒ½åŠ›ï¼Œå¹¶å‘æ˜¯å¯ä»¥åº”å¯¹å¤šä¸ªä»»åŠ¡çš„èƒ½åŠ›</p><h4 id="åˆ›å»ºçº¿ç¨‹çš„æ–¹å¼"><a href="#åˆ›å»ºçº¿ç¨‹çš„æ–¹å¼" class="headerlink" title="åˆ›å»ºçº¿ç¨‹çš„æ–¹å¼"></a>åˆ›å»ºçº¿ç¨‹çš„æ–¹å¼</h4><ul><li>ç»§æ‰¿<code>Thread</code>ç±»ï¼Œé‡å†™ <code>run</code> æ–¹æ³•</li><li>å®ç° <code>Runnable</code> æ¥å£ï¼Œå®ç° <code>run</code> æ–¹æ³•</li><li>å®ç° <code>Callable</code> æ¥å£ï¼Œå®ç° <code>call</code> æ–¹æ³•</li><li>ä½¿ç”¨çº¿ç¨‹æ± åˆ›å»ºçº¿ç¨‹</li></ul><h4 id="runnable-å’Œ-callable-æœ‰ä»€ä¹ˆåŒºåˆ«"><a href="#runnable-å’Œ-callable-æœ‰ä»€ä¹ˆåŒºåˆ«" class="headerlink" title="runnable å’Œ callable æœ‰ä»€ä¹ˆåŒºåˆ«"></a>runnable å’Œ callable æœ‰ä»€ä¹ˆåŒºåˆ«</h4><ul><li>Runnable æ¥å£çš„æ–¹æ³•æ²¡æœ‰è¿”å›å€¼ï¼ŒCallable æ¥å£å¯ä»¥æœ‰è¿”å›å€¼ï¼Œé€šè¿‡ FutureTask ä¸­çš„ get æ–¹æ³•è·å–å¼‚æ­¥æ‰§è¡Œçš„è¿”å›å€¼ï¼Œä½†æ‰§è¡Œè¿™ä¸ªæ–¹æ³•ä¼šé˜»å¡ä¸»è¿›ç¨‹</li><li>Runnable ä¸èƒ½æŠ›å‡ºå¼‚å¸¸ï¼ŒCallable å¯ä»¥æŠ›å‡ºå¼‚å¸¸</li></ul><h4 id="çº¿ç¨‹çš„-run-å’Œ-start-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"><a href="#çº¿ç¨‹çš„-run-å’Œ-start-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ" class="headerlink" title="çº¿ç¨‹çš„ run()å’Œ start()æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"></a>çº¿ç¨‹çš„ run()å’Œ start()æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h4><ul><li>run åªæ˜¯è°ƒç”¨æ™®é€šæ–¹æ³•ï¼Œå¯ä»¥å¤šæ¬¡æ‰§è¡Œ</li><li>start æ–¹æ³•ä¼šå¯åŠ¨çº¿ç¨‹ï¼Œä¼šè°ƒç”¨ native çš„ start0 æ–¹æ³•ï¼Œåªèƒ½è°ƒç”¨ä¸€æ¬¡</li></ul><h4 id="çº¿ç¨‹åŒ…æ‹¬å“ªäº›çŠ¶æ€ï¼ŒçŠ¶æ€ä¹‹é—´æ˜¯å¦‚ä½•å˜åŒ–çš„"><a href="#çº¿ç¨‹åŒ…æ‹¬å“ªäº›çŠ¶æ€ï¼ŒçŠ¶æ€ä¹‹é—´æ˜¯å¦‚ä½•å˜åŒ–çš„" class="headerlink" title="çº¿ç¨‹åŒ…æ‹¬å“ªäº›çŠ¶æ€ï¼ŒçŠ¶æ€ä¹‹é—´æ˜¯å¦‚ä½•å˜åŒ–çš„"></a>çº¿ç¨‹åŒ…æ‹¬å“ªäº›çŠ¶æ€ï¼ŒçŠ¶æ€ä¹‹é—´æ˜¯å¦‚ä½•å˜åŒ–çš„</h4><ul><li>New</li><li>Runnable</li><li>Blocked</li><li>Waitting</li><li>TimeWaitting</li><li>Terminated</li></ul><p>åˆ›å»ºçº¿ç¨‹æ—¶æ—¶ New çŠ¶æ€ï¼Œè°ƒç”¨ start æ–¹æ³•åä¼šè¿›å…¥ Runnable çŠ¶æ€ï¼ŒRunnable çŠ¶æ€ä¸­ä¼šæ ¹æ®äº‰æŠ¢ cpu æ—¶é—´ç‰‡çš„æƒ…å†µä¼šåœ¨å°±ç»ªå’Œè¿è¡ŒçŠ¶æ€æ¥å›åˆ‡æ¢ï¼Œå¦‚æœå‡ºç°éœ€è¦ç­‰å¾…é”ï¼Œä¼šè¿›å…¥ Blocked çŠ¶æ€ï¼Œæ‹¿åˆ°é”åå†æ¬¡å˜æˆ Runnable çŠ¶æ€ï¼Œçº¿ç¨‹ä¸­è°ƒç”¨äº† wait æ–¹æ³•æ—¶ä¼šè¿›å…¥ Waitting çŠ¶æ€ï¼Œè°ƒç”¨ notify æˆ–è€… notifyAll æ–¹æ³•åï¼Œçº¿ç¨‹è¢«å”¤é†’ï¼Œè¿›å…¥ Runnable çŠ¶æ€ï¼Œè¿è¡Œä¸­é‡åˆ° sleep ä¼šè¿›å…¥ TimeWaitting çŠ¶æ€ï¼Œæ‰§è¡Œå®Œæ¯•æˆ–çº¿ç¨‹æ­»äº¡åä¼šè¿›å…¥ Terminated çŠ¶æ€ã€‚</p><h4 id="æ–°å»º-T1ã€T2ã€T3-ä¸‰ä¸ªçº¿ç¨‹ï¼Œå¦‚ä½•ä¿è¯å®ƒä»¬æŒ‰é¡ºåºæ‰§è¡Œï¼Ÿ"><a href="#æ–°å»º-T1ã€T2ã€T3-ä¸‰ä¸ªçº¿ç¨‹ï¼Œå¦‚ä½•ä¿è¯å®ƒä»¬æŒ‰é¡ºåºæ‰§è¡Œï¼Ÿ" class="headerlink" title="æ–°å»º T1ã€T2ã€T3 ä¸‰ä¸ªçº¿ç¨‹ï¼Œå¦‚ä½•ä¿è¯å®ƒä»¬æŒ‰é¡ºåºæ‰§è¡Œï¼Ÿ"></a>æ–°å»º T1ã€T2ã€T3 ä¸‰ä¸ªçº¿ç¨‹ï¼Œå¦‚ä½•ä¿è¯å®ƒä»¬æŒ‰é¡ºåºæ‰§è¡Œï¼Ÿ</h4><p>åœ¨ t2 ä¸­è°ƒç”¨ t1 çš„ join æ–¹æ³•ï¼Œåœ¨ t3 ä¸­è°ƒç”¨ t2 çš„ join æ–¹æ³•</p><h4 id="notify-å’Œ-notifyAll-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"><a href="#notify-å’Œ-notifyAll-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ" class="headerlink" title="notify()å’Œ notifyAll()æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"></a>notify()å’Œ notifyAll()æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h4><p>notify åªä¼šéšæœºå”¤é†’ä¸€ä¸ªçº¿ç¨‹ï¼ŒnotifyAll ä¼šå”¤é†’æ‰€æœ‰çš„çº¿ç¨‹</p><h4 id="åœ¨-java-ä¸­-wait-å’Œ-sleep-æ–¹æ³•çš„ä¸åŒï¼Ÿ"><a href="#åœ¨-java-ä¸­-wait-å’Œ-sleep-æ–¹æ³•çš„ä¸åŒï¼Ÿ" class="headerlink" title="åœ¨ java ä¸­ wait å’Œ sleep æ–¹æ³•çš„ä¸åŒï¼Ÿ"></a>åœ¨ java ä¸­ wait å’Œ sleep æ–¹æ³•çš„ä¸åŒï¼Ÿ</h4><ul><li>wait æ˜¯ Object ç±»ä¸­çš„æ–¹æ³•ï¼Œå¯ä»¥è¢«å”¤é†’ï¼Œå¿…é¡»å…ˆè·å– wait å¯¹è±¡çš„é”ï¼Œä¼šé‡Šæ”¾é”ï¼Œ</li><li>sleep æ˜¯ Thread ä¸­çš„é™æ€æ–¹æ³•ï¼Œä¸å¯ä»¥è¢«å”¤é†’ï¼Œ ä¸ä¼šé‡Šæ”¾é”</li></ul><h4 id="å¦‚ä½•åœæ­¢ä¸€ä¸ªæ­£åœ¨è¿è¡Œçš„çº¿ç¨‹ï¼Ÿ"><a href="#å¦‚ä½•åœæ­¢ä¸€ä¸ªæ­£åœ¨è¿è¡Œçš„çº¿ç¨‹ï¼Ÿ" class="headerlink" title="å¦‚ä½•åœæ­¢ä¸€ä¸ªæ­£åœ¨è¿è¡Œçš„çº¿ç¨‹ï¼Ÿ"></a>å¦‚ä½•åœæ­¢ä¸€ä¸ªæ­£åœ¨è¿è¡Œçš„çº¿ç¨‹ï¼Ÿ</h4><p>ä½¿ç”¨çº¿ç¨‹çš„ interrupt æ–¹æ³•</p><h2 id="çº¿ç¨‹ä¸­å¹¶å‘é”"><a href="#çº¿ç¨‹ä¸­å¹¶å‘é”" class="headerlink" title="çº¿ç¨‹ä¸­å¹¶å‘é”"></a>çº¿ç¨‹ä¸­å¹¶å‘é”</h2><h4 id="è®²ä¸€ä¸‹-synchronized-å…³é”®å­—çš„åº•å±‚åŸç†ï¼Ÿ"><a href="#è®²ä¸€ä¸‹-synchronized-å…³é”®å­—çš„åº•å±‚åŸç†ï¼Ÿ" class="headerlink" title="è®²ä¸€ä¸‹ synchronized å…³é”®å­—çš„åº•å±‚åŸç†ï¼Ÿ"></a>è®²ä¸€ä¸‹ synchronized å…³é”®å­—çš„åº•å±‚åŸç†ï¼Ÿ</h4><p>åº•å±‚æ˜¯ç”± Monitor å®ç°çš„ï¼ŒMoniter æ˜¯ç”¨ C++ç¼–å†™çš„ï¼Œè¿›å…¥ synchronized æ–¹æ³•å—æ—¶ï¼Œå¯¹è±¡é”ä¼šå…ˆå…³è” Monitorï¼ŒMonitor ä¸­å­˜åœ¨ä¸‰ä¸ªå±æ€§ï¼Œownerï¼šæŒæœ‰é”çš„çº¿ç¨‹ã€entrylistï¼šå¤„äºé˜»å¡çŠ¶æ€çš„çº¿ç¨‹ å’Œ waitset å¤„äº waitting çŠ¶æ€çš„çº¿ç¨‹</p><h4 id="synchronized-å…³é”®å­—çš„åº•å±‚åŸç†-è¿›é˜¶"><a href="#synchronized-å…³é”®å­—çš„åº•å±‚åŸç†-è¿›é˜¶" class="headerlink" title="synchronized å…³é”®å­—çš„åº•å±‚åŸç†-è¿›é˜¶"></a>synchronized å…³é”®å­—çš„åº•å±‚åŸç†-è¿›é˜¶</h4><h4 id="ä½ è°ˆè°ˆ-JMMï¼ˆJava-å†…å­˜æ¨¡å‹ï¼‰"><a href="#ä½ è°ˆè°ˆ-JMMï¼ˆJava-å†…å­˜æ¨¡å‹ï¼‰" class="headerlink" title="ä½ è°ˆè°ˆ JMMï¼ˆJava å†…å­˜æ¨¡å‹ï¼‰"></a>ä½ è°ˆè°ˆ JMMï¼ˆJava å†…å­˜æ¨¡å‹ï¼‰</h4><p>æ˜¯ java è™šæ‹Ÿæœºè§„èŒƒä¸­å®šä¹‰çš„ä¸€ç§å†…å­˜æ¨¡å‹ï¼Œæ¯ä¸ªçº¿ç¨‹ä¸­éƒ½æœ‰è‡ªå·±çš„å·¥ä½œå†…å­˜ï¼Œçº¿ç¨‹ä¹‹é—´æ— æ³•äº’ç›¸è®¿é—®ï¼Œå…±äº«çš„å˜é‡å­˜æ”¾åœ¨ä¸»å†…å­˜ä¸­ï¼Œçº¿ç¨‹å·¥ä½œæ—¶ï¼Œéœ€è¦ç”¨åˆ°å…±äº«å˜é‡çš„è¯ä¼šåœ¨è‡ªå·±çš„å·¥ä½œå†…å­˜ä¸­åˆ›å»ºä¸€ä¸ªå…±äº«å˜é‡çš„å‰¯æœ¬ï¼Œçº¿ç¨‹åªèƒ½æ“ä½œè‡ªå·±å·¥ä½œå†…å­˜ä¸­çš„å‰¯æœ¬ï¼Œç”± JMM è´Ÿè´£å°†å‰¯æœ¬åŒæ­¥åˆ°å…±äº«å†…å­˜å’Œå°†å…±äº«å˜é‡åŠ è½½åˆ°çº¿ç¨‹çš„å·¥ä½œå†…å­˜ä¸­</p><h4 id="CAS-ä½ çŸ¥é“å—ï¼Ÿ"><a href="#CAS-ä½ çŸ¥é“å—ï¼Ÿ" class="headerlink" title="CAS ä½ çŸ¥é“å—ï¼Ÿ"></a>CAS ä½ çŸ¥é“å—ï¼Ÿ</h4><p>æ¯”è¾ƒå¹¶äº¤æ¢ï¼Œä¿è¯æ“ä½œçš„åŸå­æ€§ï¼Œæ¯”è¾ƒæ—§çš„å€¼ç›¸åŒæ‰ä¼šå°†æ—§çš„å€¼æ›´æ”¹ä¸ºæ–°çš„å€¼ï¼ŒCAS ä¸­åŒ…å«è‡ªæ—‹é”ï¼Œæ˜¯ä¸€ç§ä¹è§‚é”ï¼Œå‘ç°æ—§å€¼ä¸ç›¸åŒæ—¶ä¼šä¸æ–­åœ°é‡ç½®ï¼ŒCAS çš„åº•å±‚æ—¶ä½¿ç”¨ Unsafe ç±»ä¸­çš„ native æ–¹æ³•ï¼Œ</p><h4 id="è¯·è°ˆè°ˆä½ å¯¹-volatile-çš„ç†è§£"><a href="#è¯·è°ˆè°ˆä½ å¯¹-volatile-çš„ç†è§£" class="headerlink" title="è¯·è°ˆè°ˆä½ å¯¹ volatile çš„ç†è§£"></a>è¯·è°ˆè°ˆä½ å¯¹ volatile çš„ç†è§£</h4><ul><li>ä¿è¯å¯è§æ€§ï¼šä¿è¯ä¸åŒçº¿ç¨‹å¯¹å˜é‡æ“ä½œçš„å¯è§æ€§ï¼Œä¼šå¼ºåˆ¶å°†å¯¹å‰¯æœ¬ä¿®æ”¹çš„å€¼ç«‹åˆ»åŒæ­¥åˆ°ä¸»å­˜ä¸­ï¼Œå…¶ç›®çš„æ—¶é˜²æ­¢ JIT ç¼–è¯‘å™¨å¯¹ä»£ç è¿›è¡Œä¼˜åŒ–</li><li>é˜²æ­¢æŒ‡ä»¤é‡æ’ï¼šåœ¨å˜é‡çš„æ“ä½œä¸­åŠ å…¥å±éšœï¼Œé˜²æ­¢å…¶ä»–çš„å†™æ“ä½œåˆ°è¯¥å˜é‡å†™ä¸‹é¢ï¼Œé˜²æ­¢å…¶ä»–è¯»çš„æ“ä½œåˆ°è¯¥å˜é‡è¯»ä¸Šé¢</li></ul><h4 id="ä»€ä¹ˆæ˜¯-AQSï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯-AQSï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯ AQSï¼Ÿ"></a>ä»€ä¹ˆæ˜¯ AQSï¼Ÿ</h4><p>æŠ½è±¡åŒæ­¥é˜Ÿåˆ—ï¼Œæ˜¯æ„å»ºé”å’ŒåŒæ­¥ç»„ä»¶çš„åŸºç¡€æ¡†æ¶ï¼ŒåŒ…å«äº†é”çš„çŠ¶æ€ï¼Œæ‹¿åˆ°é”çš„çº¿ç¨‹ï¼Œç­‰å¾…é˜Ÿåˆ—çš„å¤´èŠ‚ç‚¹å’Œå°¾èŠ‚ç‚¹ï¼Œæ—¶ä¸€ç§éå…¬å¹³é”</p><h4 id="ReentrantLock-çš„å®ç°åŸç†"><a href="#ReentrantLock-çš„å®ç°åŸç†" class="headerlink" title="ReentrantLock çš„å®ç°åŸç†"></a>ReentrantLock çš„å®ç°åŸç†</h4><p>æ˜¯ç”± CAS å’Œ AQS å®ç°çš„ï¼Œå®ƒæ”¯æŒå…¬å¹³é”å’Œéå…¬å¹³é”</p><h4 id="synchronized-å’Œ-Lock-æœ‰ä»€ä¹ˆåŒºåˆ«"><a href="#synchronized-å’Œ-Lock-æœ‰ä»€ä¹ˆåŒºåˆ«" class="headerlink" title="synchronized å’Œ Lock æœ‰ä»€ä¹ˆåŒºåˆ«"></a>synchronized å’Œ Lock æœ‰ä»€ä¹ˆåŒºåˆ«</h4><p>synchronized æ˜¯å…³é”®å­—ï¼Œç”± c++å®ç°ï¼Œlock æ˜¯æ¥å£ï¼Œç”± java è¯­è¨€å®ç°<br>Lock æ”¯æŒæ›´ç»†ç²’åº¦çš„é”æ§åˆ¶ï¼ŒåŠŸèƒ½æ›´å¤šï¼Œæ”¯æŒå…¬å¹³é”ï¼Œå¯æ‰“æ–­ï¼Œå¯è¶…æ—¶ï¼Œå¤šæ¡ä»¶å˜é‡ï¼Œæœ‰å¤šç§ä¸åŒçš„å®ç°</p><h4 id="æ­»é”äº§ç”Ÿçš„æ¡ä»¶ä»¥åŠæ­»é”æ’æŸ¥æ–¹æ¡ˆ"><a href="#æ­»é”äº§ç”Ÿçš„æ¡ä»¶ä»¥åŠæ­»é”æ’æŸ¥æ–¹æ¡ˆ" class="headerlink" title="æ­»é”äº§ç”Ÿçš„æ¡ä»¶ä»¥åŠæ­»é”æ’æŸ¥æ–¹æ¡ˆ"></a>æ­»é”äº§ç”Ÿçš„æ¡ä»¶ä»¥åŠæ­»é”æ’æŸ¥æ–¹æ¡ˆ</h4><p>çº¿ç¨‹ä¸­åŒæ—¶è·å–å¤šæŠŠé”çš„æƒ…å†µï¼Œjps è·å–çº¿ç¨‹çš„ PIDï¼Œå†ç”¨ jstack è·å–çº¿ç¨‹çš„è¿è¡Œæƒ…å†µ</p><h4 id="èŠä¸€ä¸‹-ConcurrentHashMap"><a href="#èŠä¸€ä¸‹-ConcurrentHashMap" class="headerlink" title="èŠä¸€ä¸‹ ConcurrentHashMap"></a>èŠä¸€ä¸‹ ConcurrentHashMap</h4><p>æ˜¯çº¿ç¨‹å®‰å…¨ç‰ˆæœ¬çš„ HashMapï¼Œæ•°æ®ç»“æ„å’Œ HashMap ä¸€æ ·ï¼Œå®ƒåœ¨ç©ºèŠ‚ç‚¹æ’å…¥æ—¶æ˜¯ CAS çš„æ“ä½œï¼Œåœ¨é“¾è¡¨æˆ–è€…çº¢é»‘æ ‘çš„èŠ‚ç‚¹æ˜¯é”çš„å¤´èŠ‚ç‚¹ã€‚</p><h4 id="å¯¼è‡´å¹¶å‘ç¨‹åºå‡ºç°é—®é¢˜çš„æ ¹æœ¬åŸå› æ˜¯ä»€ä¹ˆ"><a href="#å¯¼è‡´å¹¶å‘ç¨‹åºå‡ºç°é—®é¢˜çš„æ ¹æœ¬åŸå› æ˜¯ä»€ä¹ˆ" class="headerlink" title="å¯¼è‡´å¹¶å‘ç¨‹åºå‡ºç°é—®é¢˜çš„æ ¹æœ¬åŸå› æ˜¯ä»€ä¹ˆ"></a>å¯¼è‡´å¹¶å‘ç¨‹åºå‡ºç°é—®é¢˜çš„æ ¹æœ¬åŸå› æ˜¯ä»€ä¹ˆ</h4><p>å¹¶å‘ç¼–ç¨‹ä¸‰å¤§ç‰¹æ€§æ˜¯</p><ul><li>åŸå­æ€§ï¼šçº¿ç¨‹è¦ä¹ˆæ‰§è¡Œè¦ä¹ˆä¸æ‰§è¡Œ</li><li>å¯è§æ€§ï¼šå¯¹æ•°æ®å‰¯æœ¬çš„ä¿®æ”¹èƒ½åŠæ—¶åŒæ­¥åˆ°åˆ«çš„çº¿ç¨‹</li><li>æœ‰åºæ€§ï¼šé˜²æ­¢æŒ‡ä»¤é‡æ’<br>è¿åäº†ç‰¹æ€§å°±å¯èƒ½äº§ç”Ÿé—®é¢˜</li></ul><h2 id="çº¿ç¨‹æ± "><a href="#çº¿ç¨‹æ± " class="headerlink" title="çº¿ç¨‹æ± "></a>çº¿ç¨‹æ± </h2><h4 id="è¯´ä¸€ä¸‹çº¿ç¨‹æ± çš„æ ¸å¿ƒå‚æ•°ï¼ˆçº¿ç¨‹æ± çš„æ‰§è¡ŒåŸç†çŸ¥é“å˜›ï¼‰"><a href="#è¯´ä¸€ä¸‹çº¿ç¨‹æ± çš„æ ¸å¿ƒå‚æ•°ï¼ˆçº¿ç¨‹æ± çš„æ‰§è¡ŒåŸç†çŸ¥é“å˜›ï¼‰" class="headerlink" title="è¯´ä¸€ä¸‹çº¿ç¨‹æ± çš„æ ¸å¿ƒå‚æ•°ï¼ˆçº¿ç¨‹æ± çš„æ‰§è¡ŒåŸç†çŸ¥é“å˜›ï¼‰"></a>è¯´ä¸€ä¸‹çº¿ç¨‹æ± çš„æ ¸å¿ƒå‚æ•°ï¼ˆçº¿ç¨‹æ± çš„æ‰§è¡ŒåŸç†çŸ¥é“å˜›ï¼‰</h4><p>çº¿ç¨‹æ± æœ‰ä¸ƒå¤§å‚æ•°</p><ul><li>æ ¸å¿ƒçº¿ç¨‹æ± æ•°</li><li>æœ€å¤§çº¿ç¨‹æ•°</li><li>éæ ¸å¿ƒçº¿ç¨‹å­˜æ´»æ—¶é—´</li><li>éæ ¸å¿ƒçº¿ç¨‹å­˜æ´»æ—¶é—´å•ä½</li><li>é˜»å¡é˜Ÿåˆ—</li><li>çº¿ç¨‹å·¥å‚</li><li>æ‹’ç»ç­–ç•¥</li></ul><p>å…¶ä¸­æ‹’ç»ç­–ç•¥æ˜¯è¾¾åˆ°æœ€å¤§å…ˆä¹˜é™¤ï¼Œå¹¶ä¸”é˜»å¡é˜Ÿåˆ—ä¹Ÿæ»¡äº†çš„æ—¶å€™æ‹’ç»ç­–ç•¥åˆ†ä¸º</p><ul><li>AbortPolicyï¼šç›´æ¥æŠ›å‡ºå¼‚å¸¸ï¼Œé»˜è®¤ç­–ç•¥</li><li>CallerRunsPolicyï¼šç”¨è°ƒç”¨è€…æ‰€åœ¨çš„çº¿ç¨‹æ¥æ‰§è¡Œä»»åŠ¡</li><li>DiscardOldestPolicyï¼šä¸¢å¼ƒé˜»å¡é˜Ÿåˆ—ä¸­é æœ€å‰çš„ä»»åŠ¡ï¼Œå¹¶æ‰§è¡Œå½“å‰ä»»åŠ¡</li><li>DiscardPolicyï¼šç›´æ¥ä¸¢å¼ƒä»»åŠ¡</li></ul><h4 id="çº¿ç¨‹æ± ä¸­æœ‰å“ªäº›å¸¸è§çš„é˜»å¡é˜Ÿåˆ—"><a href="#çº¿ç¨‹æ± ä¸­æœ‰å“ªäº›å¸¸è§çš„é˜»å¡é˜Ÿåˆ—" class="headerlink" title="çº¿ç¨‹æ± ä¸­æœ‰å“ªäº›å¸¸è§çš„é˜»å¡é˜Ÿåˆ—"></a>çº¿ç¨‹æ± ä¸­æœ‰å“ªäº›å¸¸è§çš„é˜»å¡é˜Ÿåˆ—</h4><p>å¸¸è§çš„æœ‰ ArrayBlokingQueue å’Œ LinkedBlokingQueue<br>ä¸åŒä¹‹å¤„ï¼š</p><ul><li>ArrayBlokingQueue æ˜¯æœ‰ç•Œçš„ï¼ŒLinkedBlokingQueue åˆ™æ˜¯å¯ä»¥è®¾ç½®ä¸ºæ— ç•Œ</li><li>ArrayBlokingQueue åªæœ‰ä¸€æŠŠé”ï¼Œé”æ•´ä¸ªæ•°ç»„ï¼Œè€Œ LinkedBlokingQueue æœ‰å¤´èŠ‚ç‚¹å’Œå°¾èŠ‚ç‚¹ä¸¤æŠŠé”ï¼Œç›¸å¯¹æ¥è¯´åŠ å…¥å’Œå–å‡ºå…ƒç´ çš„æ—¶å€™ LinkedBlokingQueue æ•ˆç‡æ›´é«˜ä¸€äº›</li></ul><h4 id="å¦‚ä½•ç¡®å®šæ ¸å¿ƒçº¿ç¨‹æ•°"><a href="#å¦‚ä½•ç¡®å®šæ ¸å¿ƒçº¿ç¨‹æ•°" class="headerlink" title="å¦‚ä½•ç¡®å®šæ ¸å¿ƒçº¿ç¨‹æ•°"></a>å¦‚ä½•ç¡®å®šæ ¸å¿ƒçº¿ç¨‹æ•°</h4><ul><li>é«˜å¹¶å‘ï¼Œä»»åŠ¡æ—¶é—´çŸ­ï¼šN+1ï¼Œå¯ä»¥å‡å°‘ä¸Šä¸‹æ–‡åˆ‡æ¢</li><li>å¹¶å‘ä¸é«˜ï¼Œä»»åŠ¡æ—¶é—´è¾ƒé•¿<ul><li>IO å¯†é›†å‹çš„ä»»åŠ¡ä½¿ç”¨ 2N+1</li><li>cpu å¯†é›†å‹ä½¿ç”¨ N+1</li></ul></li></ul><h4 id="ä¸ºä»€ä¹ˆä¸å»ºè®®ç”¨-Executors-åˆ›å»ºçº¿ç¨‹æ± "><a href="#ä¸ºä»€ä¹ˆä¸å»ºè®®ç”¨-Executors-åˆ›å»ºçº¿ç¨‹æ± " class="headerlink" title="ä¸ºä»€ä¹ˆä¸å»ºè®®ç”¨ Executors åˆ›å»ºçº¿ç¨‹æ± "></a>ä¸ºä»€ä¹ˆä¸å»ºè®®ç”¨ Executors åˆ›å»ºçº¿ç¨‹æ± </h4><p>è®°å¾— java å¼€å‘æ‰‹å†Œé‡Œè¿™ä¸ªæ˜¯å¼ºåˆ¶çš„ï¼Œå› ä¸º Executors åˆ›å»ºçš„çº¿ç¨‹æœ‰æœ€å¤§çº¿ç¨‹æ•°ã€é˜»å¡é˜Ÿåˆ—çš„é•¿åº¦ä¸º Integer.MAX_VALUE çš„ï¼Œå¯èƒ½ä¼šå¯¼è‡´ OOM</p><h2 id="ä½¿ç”¨åœºæ™¯"><a href="#ä½¿ç”¨åœºæ™¯" class="headerlink" title="ä½¿ç”¨åœºæ™¯"></a>ä½¿ç”¨åœºæ™¯</h2><h4 id="çº¿ç¨‹æ± ä½¿ç”¨åœºæ™¯"><a href="#çº¿ç¨‹æ± ä½¿ç”¨åœºæ™¯" class="headerlink" title="çº¿ç¨‹æ± ä½¿ç”¨åœºæ™¯"></a>çº¿ç¨‹æ± ä½¿ç”¨åœºæ™¯</h4><ul><li>ä½¿ç”¨ java æ“ä½œå¤§é‡çš„æ•°æ®çš„æ—¶å€™ï¼Œæ“ä½œå…¨éƒ¨å¯èƒ½å¯¼è‡´ OOMï¼Œå¯ä»¥ä½¿ç”¨ CountDownLatch å’Œçº¿ç¨‹æ± åˆ†æˆä¸€ä¸ªä¸€ä¸ªçš„ä»»åŠ¡æ‰§è¡Œ</li><li>æ•°æ®æ±‡æ€»ï¼Œå½“ä¸€ä¸ªæ¥å£éœ€è¦å¤šä¸ªè¿œç¨‹è°ƒç”¨æ—¶ï¼Œå¯ä»¥å°†å¤šä¸ªè°ƒç”¨æäº¤åˆ°çº¿ç¨‹æ± ä¸­åŒæ­¥æ‰§è¡Œï¼Œæé«˜é€Ÿåº¦</li><li>å¼‚æ­¥è°ƒç”¨ï¼Œä¸€ä¸ªæ¥å£å€¼çš„è¿”å›ä¸éœ€è¦ç­‰æŸä¸€ä¸ªæ–¹æ³•æ‰§è¡Œç»“æŸï¼Œæ¯”å¦‚æœç´¢å†…å®¹æ˜¯ï¼Œè®°å½•æœç´¢è®°å½•å’Œè¿”å›æœç´¢ç»“æœï¼Œæ·»åŠ è®°å½•å¯ä»¥æäº¤åˆ°çº¿ç¨‹æ± ä¸­å¼‚æ­¥æ‰§è¡Œ</li></ul><h4 id="å¦‚ä½•æ§åˆ¶æŸä¸ªæ–¹æ³•å…è®¸å¹¶å‘è®¿é—®çº¿ç¨‹çš„æ•°é‡"><a href="#å¦‚ä½•æ§åˆ¶æŸä¸ªæ–¹æ³•å…è®¸å¹¶å‘è®¿é—®çº¿ç¨‹çš„æ•°é‡" class="headerlink" title="å¦‚ä½•æ§åˆ¶æŸä¸ªæ–¹æ³•å…è®¸å¹¶å‘è®¿é—®çº¿ç¨‹çš„æ•°é‡"></a>å¦‚ä½•æ§åˆ¶æŸä¸ªæ–¹æ³•å…è®¸å¹¶å‘è®¿é—®çº¿ç¨‹çš„æ•°é‡</h4><p>ä½¿ç”¨ Semaphoreï¼Œä¿å­˜çš„æ˜¯ä¸€ä¸ªä¿¡å·é‡ï¼Œè¿›å…¥çº¿ç¨‹çš„æ—¶å€™è¯·æ±‚ä¿¡å·ï¼Œä¿¡å·é‡-1ï¼Œåªæœ‰ä¿¡å·é‡å¤§äº 0 æ‰èƒ½è¯·æ±‚æˆåŠŸï¼Œæ–¹æ³•ç»“æŸåï¼Œè°ƒç”¨é‡Šæ”¾ä¿¡å·çš„æ–¹æ³•ï¼ŒæŠŠä¿¡å·é‡åŠ å›å»ã€‚</p><h2 id="è°ˆè°ˆä½ å¯¹-ThreadLocal-çš„ç†è§£"><a href="#è°ˆè°ˆä½ å¯¹-ThreadLocal-çš„ç†è§£" class="headerlink" title="è°ˆè°ˆä½ å¯¹ ThreadLocal çš„ç†è§£"></a>è°ˆè°ˆä½ å¯¹ ThreadLocal çš„ç†è§£</h2><p>ThreadLocal æ˜¯è§£å†³çº¿ç¨‹å®‰å…¨çš„ä¸€ä¸ªæ“ä½œç±»ï¼Œå°†æ•°æ®å­˜å‚¨åˆ°å„è‡ªçº¿ç¨‹ä¸­ï¼Œæœ‰ setï¼Œget å’Œ remove ä¸‰ä¸ªä¸»è¦æ–¹æ³•</p><h4 id=""><a href="#" class="headerlink" title=""></a></h4>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/2023/12/08/MarkDown_All_In_One/"/>
      <url>/2023/12/08/MarkDown_All_In_One/</url>
      
        <content type="html"><![CDATA[<p>[TOC]</p><h1 id="æ ‡é¢˜"><a href="#æ ‡é¢˜" class="headerlink" title="æ ‡é¢˜"></a>æ ‡é¢˜</h1><h2 id="äºŒçº§æ ‡é¢˜-ignore-true"><a href="#äºŒçº§æ ‡é¢˜-ignore-true" class="headerlink" title="äºŒçº§æ ‡é¢˜ {ignore&#x3D;true}"></a>äºŒçº§æ ‡é¢˜ {ignore&#x3D;true}</h2><h3 id="ä¸‰çº§æ ‡é¢˜"><a href="#ä¸‰çº§æ ‡é¢˜" class="headerlink" title="ä¸‰çº§æ ‡é¢˜"></a>ä¸‰çº§æ ‡é¢˜</h3><h4 id="å››çº§æ ‡é¢˜"><a href="#å››çº§æ ‡é¢˜" class="headerlink" title="å››çº§æ ‡é¢˜"></a>å››çº§æ ‡é¢˜</h4><h5 id="äº”çº§æ ‡é¢˜"><a href="#äº”çº§æ ‡é¢˜" class="headerlink" title="äº”çº§æ ‡é¢˜"></a>äº”çº§æ ‡é¢˜</h5><h6 id="å…­çº§æ ‡é¢˜"><a href="#å…­çº§æ ‡é¢˜" class="headerlink" title="å…­çº§æ ‡é¢˜"></a>å…­çº§æ ‡é¢˜</h6><h1 id="æ–‡æœ¬æ ·å¼"><a href="#æ–‡æœ¬æ ·å¼" class="headerlink" title="æ–‡æœ¬æ ·å¼"></a>æ–‡æœ¬æ ·å¼</h1><p><em>å¼ºè°ƒæ–‡æœ¬</em><br><strong>åŠ ç²—æ–‡æœ¬</strong></p><p>&#x3D;&#x3D;æ ‡è®°æ–‡æœ¬&#x3D;&#x3D;</p><p><del>åˆ é™¤æ–‡æœ¬</del></p><blockquote><p>å¼•ç”¨æ–‡æœ¬</p></blockquote><p>H<del>2</del>O is æ˜¯æ¶²ä½“ã€‚</p><p>2^10^ è¿ç®—ç»“æœæ˜¯ 1024</p><h1 id="åˆ—è¡¨"><a href="#åˆ—è¡¨" class="headerlink" title="åˆ—è¡¨"></a>åˆ—è¡¨</h1><ul><li>é¡¹ç›®<ul><li>é¡¹ç›®<ul><li>é¡¹ç›®</li></ul></li></ul></li></ul><ol><li>é¡¹ç›® 1</li><li>é¡¹ç›® 2</li><li>é¡¹ç›® 3</li></ol><ul><li><input disabled="" type="checkbox"> è®¡åˆ’ä»»åŠ¡</li><li><input checked="" disabled="" type="checkbox"> å®Œæˆä»»åŠ¡</li></ul><h1 id="å›¾ç‰‡"><a href="#å›¾ç‰‡" class="headerlink" title="å›¾ç‰‡"></a>å›¾ç‰‡</h1><p>å›¾ç‰‡: <img src="https://img-home.csdnimg.cn/images/20220524100510.png" alt="Alt"></p><p>å¸¦å°ºå¯¸çš„å›¾ç‰‡: ![Alt](<a href="https://img-home.csdnimg.cn/images/20220524100510.png">https://img-home.csdnimg.cn/images/20220524100510.png</a> &#x3D;60x60)</p><p>å®½åº¦ç¡®å®šé«˜åº¦ç­‰æ¯”ä¾‹çš„å›¾ç‰‡: ![Alt](<a href="https://img-home.csdnimg.cn/images/20220524100510.png">https://img-home.csdnimg.cn/images/20220524100510.png</a> &#x3D;60x)</p><p>é«˜åº¦ç¡®å®šå®½åº¦ç­‰æ¯”ä¾‹çš„å›¾ç‰‡: ![Alt](<a href="https://img-home.csdnimg.cn/images/20220524100510.png">https://img-home.csdnimg.cn/images/20220524100510.png</a> &#x3D;x60)</p><p>å±…ä¸­çš„å›¾ç‰‡: <img src="https://img-home.csdnimg.cn/images/20220524100510.png#pic_center" alt="Alt"></p><p>å±…ä¸­å¹¶ä¸”å¸¦å°ºå¯¸çš„å›¾ç‰‡: ![Alt](<a href="https://img-home.csdnimg.cn/images/20220524100510.png#pic_center">https://img-home.csdnimg.cn/images/20220524100510.png#pic_center</a> &#x3D;60x60)</p><p>å±…å³çš„å›¾ç‰‡: <img src="https://img-home.csdnimg.cn/images/20220524100510.png#pic_right" alt="Alt"></p><h1 id="é“¾æ¥"><a href="#é“¾æ¥" class="headerlink" title="é“¾æ¥"></a>é“¾æ¥</h1><p>é“¾æ¥: <a href="https://www.csdn.net/">link</a></p><h1 id="ä»£ç ç‰‡"><a href="#ä»£ç ç‰‡" class="headerlink" title="ä»£ç ç‰‡"></a>ä»£ç ç‰‡</h1><p>ä¸‹é¢å±•ç¤ºä¸€äº› <code>å†…è”ä»£ç ç‰‡</code>ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// An highlighted block</span></span><br><span class="line"><span class="keyword">var</span> foo = <span class="string">&quot;bar&quot;</span>;</span><br></pre></td></tr></table></figure><h1 id="è¡¨æ ¼"><a href="#è¡¨æ ¼" class="headerlink" title="è¡¨æ ¼"></a>è¡¨æ ¼</h1><table><thead><tr><th>é¡¹ç›®</th><th>Value</th></tr></thead><tbody><tr><td>ç”µè„‘</td><td>$1600</td></tr><tr><td>æ‰‹æœº</td><td>$12</td></tr><tr><td>å¯¼ç®¡</td><td>$1</td></tr></tbody></table><table><thead><tr><th align="center">Column 1</th><th align="right">Column 2</th></tr></thead><tbody><tr><td align="center">centered æ–‡æœ¬å±…ä¸­</td><td align="right">right-aligned æ–‡æœ¬å±…å³</td></tr></tbody></table><h1 id="æ³¨è„š"><a href="#æ³¨è„š" class="headerlink" title="æ³¨è„š"></a>æ³¨è„š</h1><p>ä¸€ä¸ªå…·æœ‰æ³¨è„šçš„æ–‡æœ¬ã€‚<a href="%E6%B3%A8%E8%84%9A%E7%9A%84%E8%A7%A3%E9%87%8A">^1</a></p><h1 id="æ³¨é‡Š"><a href="#æ³¨é‡Š" class="headerlink" title="æ³¨é‡Š"></a>æ³¨é‡Š</h1><p>Markdown å°†æ–‡æœ¬è½¬æ¢ä¸º HTMLã€‚</p><p>*[HTML]: è¶…æ–‡æœ¬æ ‡è®°è¯­è¨€</p><h1 id="è‡ªå®šä¹‰åˆ—è¡¨"><a href="#è‡ªå®šä¹‰åˆ—è¡¨" class="headerlink" title="è‡ªå®šä¹‰åˆ—è¡¨"></a>è‡ªå®šä¹‰åˆ—è¡¨</h1><dl><dt>Markdown</dt><dd>Text-to-HTML conversion tool</dd></dl><dl><dt>Authors<br>: John</dt><dd>Luke</dd></dl><h1 id="LaTeX-æ•°å­¦å…¬å¼"><a href="#LaTeX-æ•°å­¦å…¬å¼" class="headerlink" title="LaTeX æ•°å­¦å…¬å¼"></a>LaTeX æ•°å­¦å…¬å¼</h1><p>Gamma å…¬å¼å±•ç¤º $\Gamma(n) &#x3D; (n-1)!\quad\forall<br>n\in\mathbb N$ æ˜¯é€šè¿‡ Euler integral</p><p>$$<br>\Gamma(z) &#x3D; \int_0^\infty t^{z-1}e^{-t}dt,.<br>$$</p><h1 id="æ’å…¥ç”˜ç‰¹å›¾"><a href="#æ’å…¥ç”˜ç‰¹å›¾" class="headerlink" title="æ’å…¥ç”˜ç‰¹å›¾"></a>æ’å…¥ç”˜ç‰¹å›¾</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">gantt</span><br><span class="line">        dateFormat  YYYY-MM-DD</span><br><span class="line">        title Adding GANTT diagram functionality to mermaid</span><br><span class="line">        section ç°æœ‰ä»»åŠ¡</span><br><span class="line">        å·²å®Œæˆ               :done,    des1, 2014-01-06,2014-01-08</span><br><span class="line">        è¿›è¡Œä¸­               :active,  des2, 2014-01-09, 3d</span><br><span class="line">        è®¡åˆ’ä¸­               :         des3, after des2, 5d</span><br></pre></td></tr></table></figure><h1 id="æ’å…¥-UML-å›¾"><a href="#æ’å…¥-UML-å›¾" class="headerlink" title="æ’å…¥ UML å›¾"></a>æ’å…¥ UML å›¾</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">sequenceDiagram</span><br><span class="line">å¼ ä¸‰ -&gt;&gt; æå››: ä½ å¥½ï¼æå››, æœ€è¿‘æ€ä¹ˆæ ·?</span><br><span class="line">æå››--&gt;&gt;ç‹äº”: ä½ æœ€è¿‘æ€ä¹ˆæ ·ï¼Œç‹äº”ï¼Ÿ</span><br><span class="line">æå››--x å¼ ä¸‰: æˆ‘å¾ˆå¥½ï¼Œè°¢è°¢!</span><br><span class="line">æå››-x ç‹äº”: æˆ‘å¾ˆå¥½ï¼Œè°¢è°¢!</span><br><span class="line">Note right of ç‹äº”: æå››æƒ³äº†å¾ˆé•¿æ—¶é—´, æ–‡å­—å¤ªé•¿äº†&lt;br/&gt;ä¸é€‚åˆæ”¾åœ¨ä¸€è¡Œ.</span><br><span class="line"></span><br><span class="line">æå››--&gt;&gt;å¼ ä¸‰: æ‰“é‡ç€ç‹äº”...</span><br><span class="line">å¼ ä¸‰-&gt;&gt;ç‹äº”: å¾ˆå¥½... ç‹äº”, ä½ æ€ä¹ˆæ ·?</span><br></pre></td></tr></table></figure><h1 id="æ’å…¥-Mermaid-æµç¨‹å›¾"><a href="#æ’å…¥-Mermaid-æµç¨‹å›¾" class="headerlink" title="æ’å…¥ Mermaid æµç¨‹å›¾"></a>æ’å…¥ Mermaid æµç¨‹å›¾</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">graph LR</span><br><span class="line">A[é•¿æ–¹å½¢] -- é“¾æ¥ --&gt; B((åœ†))</span><br><span class="line">A --&gt; C(åœ†è§’é•¿æ–¹å½¢)</span><br><span class="line">B --&gt; D&#123;è±å½¢&#125;</span><br><span class="line">C --&gt; D</span><br></pre></td></tr></table></figure><h1 id="æ’å…¥-Flowchart-æµç¨‹å›¾"><a href="#æ’å…¥-Flowchart-æµç¨‹å›¾" class="headerlink" title="æ’å…¥ Flowchart æµç¨‹å›¾"></a>æ’å…¥ Flowchart æµç¨‹å›¾</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">graph TD;</span><br><span class="line">    A--&gt;B;</span><br><span class="line">    A--&gt;C;</span><br><span class="line">    B--&gt;D;</span><br><span class="line">    C--&gt;D;</span><br></pre></td></tr></table></figure><h1 id="æ’å…¥-classDiagram-ç±»å›¾"><a href="#æ’å…¥-classDiagram-ç±»å›¾" class="headerlink" title="æ’å…¥ classDiagram ç±»å›¾"></a>æ’å…¥ classDiagram ç±»å›¾</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">classDiagram</span><br><span class="line">    Class01 &lt;|-- AveryLongClass : Cool</span><br><span class="line">    &lt;&lt;interface&gt;&gt; Class01</span><br><span class="line">    Class09 --&gt; C2 : Where am i?</span><br><span class="line">    Class09 --* C3</span><br><span class="line">    Class09 --|&gt; Class07</span><br><span class="line">    Class07 : equals()</span><br><span class="line">    Class07 : Object[] elementData</span><br><span class="line">    Class01 : size()</span><br><span class="line">    Class01 : int chimp</span><br><span class="line">    Class01 : int gorilla</span><br><span class="line">    class Class10 &#123;</span><br><span class="line">        &gt;&gt;service&gt;&gt;</span><br><span class="line">        int id</span><br><span class="line">        size()</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/2023/12/08/skywalking/"/>
      <url>/2023/12/08/skywalking/</url>
      
        <content type="html"><![CDATA[<p>docker run â€“name skywalking-oap-server â€“restart always -e TZ&#x3D;Asia&#x2F;Shanghai â€“link elasticsearch7:elasticsearch7 -e SW_STORAGE&#x3D;elasticsearch -e SW_STORAGE_ES_CLUSTER_NODES&#x3D;elasticsearch7:9200 -d -p 12800:12800 -p 11800:11800 apache&#x2F;skywalking-oap-server</p><p>docker run -d â€“name skywalking-ui â€“restart&#x3D;always -e TZ&#x3D;Asia&#x2F;Shanghai -p 8088:8080 â€“link skywalking-oap:oap -e SW_OAP_ADDRESS&#x3D;<a href="http://oap:12800/">http://oap:12800</a> apache&#x2F;skywalking-ui<br>docker run -d â€“name skywalking-ui â€“restart&#x3D;always -e TZ&#x3D;Asia&#x2F;Shanghai -p 8088:8080 â€“link skywalking-oap-server:skywalking-oap-server -e SW_OAP_ADDRESS&#x3D;<a href="http://localhost:12800/">http://localhost:12800</a> apache&#x2F;skywalking-ui</p><p>docker run -d â€“name skywalking-ui â€“restart&#x3D;always -e TZ&#x3D;Asia&#x2F;Shanghai -p 8080:8080 â€“link skywalking-oap:oap -e SW_OAP_ADDRESS&#x3D;<a href="http://oap:12800/">http://oap:12800</a> apache&#x2F;skywalking-ui:9.2.0</p><p>-DSW_AGENT_NAME&#x3D;dispatcher-service -DSW_AGENT_COLLECTOR_BACKEND_SERVICES&#x3D;127.0.0.1:11800 -javaagent:D:\softWare\apache-skywalking-java-agent-8.16.0\skywalking-agent\skywalking-agent.jar</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/2023/12/08/dockerCmd/"/>
      <url>/2023/12/08/dockerCmd/</url>
      
        <content type="html"><![CDATA[<p><code>docker run -d --name nacos -p 3333:8848 -p 4333:9848 -p 9849:9849 --privileged=true -e JVM_XMS=256m -e JVM_XMX=256m -e MODE=standalone -v /f/docker/nacos/logs/:/home/nacos/logs -v /f/docker/nacos/conf/:/home/nacos/conf/ nacos/nacos-server:v2.2.0</code></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/2023/12/08/%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B/"/>
      <url>/2023/12/08/%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B/</url>
      
        <content type="html"><![CDATA[<h1 id="æ¯æ—¥æŠ¥è¡¨æ–‡æ¡£"><a href="#æ¯æ—¥æŠ¥è¡¨æ–‡æ¡£" class="headerlink" title="æ¯æ—¥æŠ¥è¡¨æ–‡æ¡£"></a>æ¯æ—¥æŠ¥è¡¨æ–‡æ¡£</h1><h2 id="æ¶‰åŠåˆ°çš„è¡¨æ ¼"><a href="#æ¶‰åŠåˆ°çš„è¡¨æ ¼" class="headerlink" title="æ¶‰åŠåˆ°çš„è¡¨æ ¼"></a>æ¶‰åŠåˆ°çš„è¡¨æ ¼</h2><ol><li><code>æ­å·æ”¯é˜Ÿå·¡æ£€2.0.xlsx</code>ä¸­<code>æ¯æ—¥å·¡æ£€è¡¨</code>ï¼šå¡å£ç›¸æœºç‚¹ä½çš„ä¿¡æ¯ï¼Œå‰å‡ åˆ—ä¸ºå…·ä½“ä¿¡æ¯ï¼Œæœ€åé¢åˆ—åæ˜¯æ—¥æœŸçš„æ˜¯æ¯å¤©çš„åœ¨çº¿çŠ¶å†µã€‚</li><li><code>æ¯æ—¥å¤–åœºç‚¹ä½.xlsx</code>ï¼šæ¯å¤©ç¦»çº¿å¡å£çš„ä¿¡æ¯ï¼Œæ¯å¤©æ—©é—´å·¡æ£€æ—¶å°†å½“å¤©ç¦»çº¿çš„å¡å£å¤åˆ¶åˆ°æ­¤è¡¨</li><li><code>å¤–åœºç»´ä¿®å°è´¦.xlsx</code>ï¼šå¡å£ç›¸æœºçš„ç¦»çº¿å’Œæ¢å¤æƒ…å†µï¼Œæ¯æ—¥å·¡æ£€æ—¶æ ¹æ®å½“å¤©å¡å£ç›¸æœºçš„å˜åŒ–æƒ…å†µåˆ°è¯¥è¡¨ä¸­æ·»åŠ æˆ–æ›´æ–°</li><li><code>[å½“å¤©æ—¥æœŸ]è¿ç»´æ—¥æŠ¥è¡¨.xlsx</code>ï¼šä¸»è¦åˆ¶ä½œçš„æŠ¥è¡¨ï¼Œè¯¥æ–‡ä»¶éœ€è¦å¤åˆ¶å‰ä¸€å¤©çš„å¹¶é‡å‘½åï¼Œä»¥ä¸‹æ˜¯å¯¹æ¯ä¸ªè¡¨çš„è¯´æ˜ï¼š<br>ï¼ˆ1ï¼‰å¡å£ï¼šå¡å£ç›¸æœºçš„åœ¨çº¿ç‡ç­‰ä¿¡æ¯ï¼Œå…¨è¡¨æ ¹æ®å…¬å¼ç”±<code>æ•…éšœç›¸æœº</code>è¡¨ä¸­çš„æ•°æ®è®¡ç®—å¾—åˆ°ï¼Œä¸éœ€è¦ä¿®æ”¹<br>ï¼ˆ2ï¼‰ç›‘æ§ï¼šç›‘æ§çš„åœ¨çº¿æƒ…å†µç­‰ä¿¡æ¯ï¼Œå…¨è¡¨é™¤æ‰€å±é“è·¯éƒ¨åˆ†çš„å½“æ—¥æ•…éšœæ•°éœ€è¦æ‰‹åŠ¨ç»Ÿè®¡å¤–ï¼Œéƒ½ç”±<code>ç¦»çº¿ç›‘æ§æ¸…å•</code>è¡¨æ•°æ®è®¡ç®—å¾—åˆ°ï¼Œä¸éœ€è¦ä¿®æ”¹<br>ï¼ˆ3ï¼‰ç¦»çº¿ç›‘æ§æ¸…å•ï¼šç¦»çº¿ç›‘æ§æ¸…å•ï¼Œä¸ºäº†æ–¹ä¾¿æ‰‹åŠ¨ç»Ÿè®¡<code>ç›‘æ§</code>è¡¨ä¸­çš„ç¦»çº¿æ•°é€šå¸¸åœ¨æœ€åä¸€åˆ—åŠ ä¸Šç›‘æ§æ‰€åœ¨çš„é«˜é€Ÿï¼ˆè¿™ä¸€åˆ—åªæ˜¯ä¸ºæŠ¥è¡¨åˆ¶ä½œäººå‘˜æä¾›ä¾¿åˆ©ï¼Œä¸ä½œä¸ºæŠ¥è¡¨å†…å®¹ï¼‰<br>ï¼ˆ4ï¼‰æ•…éšœç›¸æœºï¼šå½“å¤©ç¦»çº¿çš„å¡å£<br>ï¼ˆ5ï¼‰å®Œå¥½ç‡æŠ½æŸ¥ç›¸æœºï¼šæŠ½æŸ¥å½“å¤©ç›¸æœºæ‹æ‘„æ•ˆæœçš„æƒ…å†µ<br>ï¼ˆ6ï¼‰æ€»è¡¨ï¼šå…¨è¡¨ä½¿ç”¨å…¬å¼è‡ªåŠ¨è®¡ç®—å¾—åˆ°ï¼Œä¸éœ€è¦ä¿®æ”¹<br>ï¼ˆ7ï¼‰Sheet1ï¼šç”±<code>æ•…éšœç›¸æœº</code>å’Œ<code>ç¦»çº¿ç›‘æ§æ¸…å•</code>è¡¨å¤åˆ¶ä¸Šä¸‹æ‹¼æ¥å¾—åˆ°</li><li><code>[å½“å¤©æ—¥æœŸ]è¿ç»´æ—¥æŠ¥è¡¨.word</code>ï¼šä¸»è¦åˆ¶ä½œçš„æ–‡æ¡£ï¼Œè¯¥æ–‡ä»¶éœ€è¦å¤åˆ¶å‰ä¸€å¤©çš„å¹¶é‡å‘½åï¼Œä¸»è¦åŒ…å«<code>[å½“å¤©æ—¥æœŸ]è¿ç»´æ—¥æŠ¥è¡¨.xlsx</code>ä¸­çš„å‡ å¼ è¡¨å’Œç¦»çº¿æƒ…å†µã€æŠ½æŸ¥ç›‘æ§æ‹æ‘„ä¸æ¸…æ™°çš„æˆªå›¾</li></ol><h2 id="éœ€è¦ä½¿ç”¨çš„å·¥å…·"><a href="#éœ€è¦ä½¿ç”¨çš„å·¥å…·" class="headerlink" title="éœ€è¦ä½¿ç”¨çš„å·¥å…·"></a>éœ€è¦ä½¿ç”¨çš„å·¥å…·</h2><ol><li>WPS Officeï¼šç”¨äºç¼–è¾‘ Excel å’Œ Word</li><li>PingInfoViewï¼šç¾¤ Ping è½¯ä»¶ï¼Œæµ‹è¯•å¡å£ IP èƒ½å¦è¿é€š</li><li>Chromeï¼šè®¿é—®æ”¶è—æ ä¸­çš„<code>æµ™æ±Ÿçœé«˜é€Ÿäº¤è­¦â€¦â€¦</code>ï¼Œç”¨äºæŠ½æŸ¥ç›¸æœºæ‹æ‘„æ•ˆæœ</li><li>InfovisionSMAG-HTPCï¼ˆé«˜é€Ÿäº¤é€šå®‰å…¨æ£€æµ‹ä¸æ²»ç†å¹³å°ï¼‰ï¼šæŸ¥çœ‹ç›‘æ§çš„ç¦»çº¿æƒ…å†µ</li></ol><blockquote><p>æ³¨æ„ï¼š3 ä¸­çš„ç½‘é¡µå’Œ 4 ä¸­ APP ç•Œé¢ç›¸ä¼¼ï¼Œä½†åŠŸèƒ½ä¸åŒï¼Œéœ€è¦æ³¨æ„åŒºåˆ†</p></blockquote><h2 id="åè¯è§£é‡Š"><a href="#åè¯è§£é‡Š" class="headerlink" title="åè¯è§£é‡Š"></a>åè¯è§£é‡Š</h2><ol><li>å¡å£ç¦»çº¿ï¼šç¾¤ Ping è½¯ä»¶ä¸­ç»è¿‡å¤šè½®ï¼ˆåè½®ä»¥ä¸Šï¼‰åï¼Œå¤±è´¥ç‡ä¸º 100%çš„</li><li>å¡å£ä¸¢åŒ…ä¸¥é‡ï¼šè¿ç»­å¤šä¸ª IP å¤±è´¥ç‡æ¥è¿‘ 100%ï¼Œå°†è¿™ä¸€æ‰¹ IP çš„ç›¸æœºï¼ˆç›¸æœºåç§°é€šå¸¸éå¸¸ç›¸ä¼¼ï¼‰éƒ½è§†ä¸ºä¸¢åŒ…ä¸¥é‡</li></ol><h2 id="å·¥ä½œå†…å®¹"><a href="#å·¥ä½œå†…å®¹" class="headerlink" title="å·¥ä½œå†…å®¹"></a>å·¥ä½œå†…å®¹</h2><ol><li><p>æ—©é—´å·¡æ£€ï¼šå·¡æ£€å¡å£ï¼Œæ‰¾å‡ºç¦»çº¿çš„å¡å£<br>1.1 è¿›å…¥<code>æ­å·æ”¯é˜Ÿå·¡æ£€2.0.xlsx</code>ï¼Œå»æ‰æ‰€æœ‰ç­›é€‰æ¡ä»¶ï¼Œå¤åˆ¶æ˜¨å¤©çš„åœ¨çº¿æƒ…å†µåˆ°è¡¨æ ¼æœ€å³è¾¹ï¼Œå¹¶é‡å‘½åä¸ºä»Šå¤©<br>1.2 ä¾æ¬¡ç­›é€‰å‡ºæ¯ä¸ªå¤§é˜Ÿçš„æ•°æ®å¹¶å¤åˆ¶åˆ°ç¾¤ Ping è½¯ä»¶å¹¶æ‰§è¡Œ<br>1.3 Ping è¿‡å¤šè½®ç­‰åˆ°æ¯ä¸ª IP çš„å¤±è´¥ç‡ç›¸å¯¹ç¨³å®šåï¼Œå°†æ¯ä¸ª IP çš„åœ¨çº¿æƒ…å†µå’Œè¡¨ä¸­çš„æ˜¨æ—¥çš„åœ¨çº¿æƒ…å†µåšæ¯”è¾ƒï¼Œæ ¹æ®<code>å¡å£ç¦»çº¿</code>åˆ¤æ–­ç¦»çº¿æƒ…å†µï¼Œå‘ç°æ˜¨å¤©ç¦»çº¿ä½†ä»Šå¤©åœ¨çº¿çš„å’Œä»Šå¤©æ–°å¢ç¦»çº¿çš„éœ€è¦åœ¨<code>æ­å·æ”¯é˜Ÿå·¡æ£€2.0.xlsx</code>ä»Šæ—¥åœ¨çº¿æƒ…å†µä¸­æ›´æ”¹ã€‚<br>1.4 ç­›é€‰å‡ºä»Šå¤©ç¦»çº¿çš„ç›¸æœºï¼Œå°†ç­›é€‰ç»“æœä¸­<code>[å¤§é˜Ÿï¼Œæ–°å…¬é‡Œæ¡©ï¼Œå¯†ç ï¼ŒIP]</code>è¿™å‡ ä¸ªå­—æ®µå¤åˆ¶åˆ°<code>æ¯æ—¥å¤–åœºç‚¹ä½.xlsx</code>ï¼Œæ­¤æ—¶å¯ä»¥å†å¤åˆ¶ä»Šæ—¥ç¦»çº¿ IP åˆ°ç¾¤ Ping ä¸­æ£€æŸ¥æ˜¯å¦æœ‰è¯¯ã€‚<br>1.5 æŠŠ<code>æ¯æ—¥å¤–åœºç‚¹ä½.xlsx</code>å¤åˆ¶åˆ°ä¸€ä¸ª<code>é‡‘å±å¤–å£³ï¼Œç›–å£æœ‰çº¢çº¿ï¼Œå°æœ‰thinkplus</code>çš„ U ç›˜ä¸­ï¼Œè¦†ç›– U ç›˜åŸæœ‰æ–‡ä»¶ï¼ŒæŠŠæ–‡ä»¶å‘ç»™åˆ˜ç‚³ã€‚</p><!--</li><li><p>å¡«å†™å¡å£çš„ä¿®å¤å’Œæ–°å¢ç¦»çº¿ä¿¡æ¯<br>2.1 è¿›å…¥<code>æ­å·æ”¯é˜Ÿå·¡æ£€2.0.xlsx</code><br>2.2 ç­›é€‰ä»Šå¤©ä¿®å¥½çš„ï¼ˆç­›é€‰æ˜¨æ—¥æ˜¯ç¦»çº¿ï¼Œä»Šæ—¥æ˜¯ âœ” çš„ï¼‰ï¼Œåˆ°<code>å¤–åœºç»´ä¿®å°è´¦.xlsx</code>ä¸­æŸ¥æ‰¾ä¿®å¤çš„ç‚¹ä½åç§°ï¼Œå°†æ¢å¤æ—¶é—´è®¾ç½®ä¸ºä»Šå¤©ï¼Œæ•…éšœåŸå› å’Œä¿®å¤ç»è¿‡è¯¢é—®ç‚³å“¥ã€‚<br>2.3 ç­›é€‰ä»Šå¤©æ–°åçš„ï¼ˆç­›é€‰æ˜¨æ—¥æ˜¯ âœ”ï¼Œä»Šæ—¥æ˜¯ç¦»çº¿çš„ï¼‰ï¼Œå°†ç­›é€‰ç»“æœå¤åˆ¶åˆ°<code>å¤–åœºç»´ä¿®å°è´¦.xlsx</code>çš„æœ€ä¸‹æ–¹ï¼Œæ‰çº¿æ—¶é—´å¡«å†™ä¸ºä»Šæ—¥ã€‚ â€“&gt;</p></li><li><p>å®Œå¥½ç‡æŠ½æŸ¥ç›¸æœºï¼ˆä¸»è¦æ£€æŸ¥ç›¸æœºåœ¨å¤œé—´èƒ½å¦æ‹æ‘„æ¸…æ¥šè½¦è¾†è½¦ç‰Œï¼‰<br>2.1 è¿›å…¥<code>[ä»Šæ—¥æ—¥æœŸ]è¿ç»´æ—¥æŠ¥è¡¨.xlsx</code>ä¸­çš„<code>å®Œå¥½ç‡æŠ½æŸ¥ç›¸æœº</code>è¡¨ï¼Œåˆ é™¤æŠ½æŸ¥è®¾å¤‡åç§°å’ŒæŠ“æ‹æ•ˆæœè¿™ä¸¤åˆ—<br>2.2 åœ¨ Chrome æµè§ˆå™¨ä¸­æ‰“å¼€<code>é«˜é€Ÿäº¤é€šå®‰å…¨ç›‘æµ‹ä¸æ²»ç†å¹³å°</code>ï¼ˆé€šè¿‡ç‚¹å‡»æµè§ˆå™¨æ”¶è—å¤¹æœ€åä¸€ä¸ªè¿›å…¥ç½‘é¡µï¼‰<br>2.3 æ‰“å¼€åœ¨ç½‘é¡µä¸­çš„<code>è½¦è¾†æ£€ç´¢æ¨¡å—</code>ä¸­çš„<code>æ­£å¸¸è½¦è¾†æŸ¥è¯¢</code>åŠŸèƒ½ï¼Œç­›é€‰æ—¶é—´æ®µä¸ºè‡ªå®šä¹‰ï¼Œæ—¶é—´è®¾ç½®ä¸ºå½“å¤©å‡Œæ™¨çš„æ—¶é—´æ®µ<br>2.4 ç‚¹å‡»é€‰æ‹©èŒƒå›´ï¼Œåœ¨æ ‘é€‰æ‹©ä¸­è¿›å…¥<code>æ­å·å¸‚&gt;é«˜é€Ÿå¡å£</code><br>2.5 æ ¹æ®<code>å®Œå¥½ç‡æŠ½æŸ¥ç›¸æœº</code>è¡¨ä¸­æ¯ä¸ªå¤§é˜Ÿéœ€è¦æŠ½æŸ¥çš„æ•°é‡ï¼Œåœ¨æ ‘é€‰æ‹©ä¸­æ‰“å¼€å¯¹åº”å¤§é˜Ÿï¼Œéšæœºé€‰æ‹©ä¸€ä¸ªç›¸æœºç‚¹ä½å¹¶æŸ¥è¯¢ï¼ˆè‹¥æ˜¾ç¤ºæ²¡æœ‰ç¬¦åˆæ¡ä»¶çš„æ•°æ®ï¼Œåˆ™éœ€è¦é‡æ–°é€‰æ‹©ç›¸æœºï¼‰ï¼ŒæŸ¥çœ‹å½“å‰ç›¸æœºæ‹æ‘„çš„ç…§ç‰‡ä¸­è½¦ç‰Œï¼Œè‹¥æ— æ³•åˆ†è¾¨ï¼Œéœ€è¦å°†æµè§ˆå™¨æœ€å¤§åŒ–å¹¶ä¸”æˆªå…¨å±ï¼ˆæ–¹ä¾¿åç»­æ’ç‰ˆå’Œè¯æ˜ç›¸æœºçš„æŠ½æŸ¥æ˜¯ä»Šå¤©åšçš„ï¼‰ï¼Œå°†æˆªå±ç²˜è´´åˆ°<code>[ä»Šæ—¥æ—¥æœŸ]è¿ç»´æ—¥æŠ¥è¡¨.word</code>ä¸­<code>ä¸‰ã€é™„å›¾&gt;2.æŠ“æ‹æ•ˆæœå›¾ç‰‡</code>å¯¹åº”å¤§é˜Ÿçš„éƒ¨åˆ†ï¼Œå¹¶å¡«å†™ excel ä¸­çš„æŠ“æ‹æ•ˆæœä¸º<code>å¤œé—´æ‹æ‘„è½¦ç‰Œçœ‹ä¸æ¸…</code>ã€‚</p></li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">graph TD</span><br><span class="line">A(åœ¨Chromeä¸­æ‰“å¼€é«˜é€Ÿäº¤é€šå®‰å…¨ç›‘æµ‹ä¸æ²»ç†å¹³å°) --&gt; B(é€‰æ‹©`è½¦è¾†æ£€ç´¢æ¨¡å—`ä¸­çš„`æ­£å¸¸è½¦è¾†æŸ¥è¯¢`åŠŸèƒ½)</span><br><span class="line">B --&gt; C(ç­›é€‰æ—¶é—´æ®µä¸ºè‡ªå®šä¹‰ï¼Œæ—¶é—´è®¾ç½®ä¸ºå½“å¤©å‡Œæ™¨çš„æ—¶é—´æ®µ)</span><br><span class="line">C --&gt; D(ç‚¹å‡»é€‰æ‹©èŒƒå›´ï¼Œåœ¨æ ‘é€‰æ‹©ä¸­è¿›å…¥`æ­å·å¸‚&gt;é«˜é€Ÿå¡å£`)</span><br><span class="line">D --&gt; E(è¿›å…¥è¿ç»´æ—¥æŠ¥è¡¨ä¸­çš„`å®Œå¥½ç‡æŠ½æŸ¥ç›¸æœº`è¡¨)</span><br><span class="line">E --&gt; F(æŒ‰ç…§`å®Œå¥½ç‡æŠ½æŸ¥ç›¸æœº`è¡¨ä¸­å¤§é˜Ÿåˆ—ï¼ŒæŒ‰ç…§å¤§é˜Ÿä¾æ¬¡é€‰æ‹©nä¸ª)</span><br><span class="line">F --&gt; G(éšæœºé€‰æ‹©ç›¸æœº)</span><br><span class="line">G --&gt; H(`å®Œå¥½ç‡æŠ½æŸ¥ç›¸æœº`è¡¨ä¸­å¡«å…¥å½“å‰ç›‘æ§å)</span><br><span class="line">H --&gt; I(æŸ¥çœ‹ç…§ç‰‡ä¸­è½¦ç‰Œæ˜¯å¦æ¸…æ™°)</span><br><span class="line">I -- æ¸…æ™° --&gt; G</span><br><span class="line">I -- ä¸æ¸…æ™° --&gt; J(æµè§ˆå™¨æœ€å¤§åŒ–å¹¶ä¸”æˆªå…¨å±\nå°†æˆªå±ç²˜è´´åˆ°`è¿ç»´æ—¥æŠ¥è¡¨.word`ä¸­`ä¸‰ã€é™„å›¾&gt;2.æŠ“æ‹æ•ˆæœå›¾ç‰‡`å¯¹åº”å¤§é˜Ÿçš„éƒ¨åˆ†)</span><br><span class="line">J --&gt; K(`å®Œå¥½ç‡æŠ½æŸ¥ç›¸æœº`å¡«å†™ä¸º`å¤œé—´æ‹æ‘„è½¦ç‰Œçœ‹ä¸æ¸…`)</span><br><span class="line">K --&gt; G</span><br></pre></td></tr></table></figure><ol start="3"><li><p>ç›‘æ§è¿ç»´ï¼ˆ15:30 å·¦å³åšï¼‰<br>3.1 æ‰“å¼€<code>[å½“å¤©æ—¥æœŸ]è¿ç»´æ—¥æŠ¥è¡¨.xlsx</code>ï¼Œè¿›å…¥å·¥ä½œç°¿<code>ç¦»çº¿ç›‘æ§æ¸…å•</code>ï¼Œè¿›å…¥æŸ¥çœ‹è§†é¢‘çš„è½¯ä»¶ã€‚<br>3.2 é¦–å…ˆæ£€æŸ¥æ˜¨æ—¥ç¦»çº¿è®¾å¤‡ä»Šæ—¥æ˜¯å¦æ¢å¤ï¼ˆåœ¨è§†é¢‘è½¯ä»¶ä¸­æœç´¢è®¾å¤‡åç§°å¹¶åŒå‡»æŸ¥çœ‹è§†é¢‘ï¼‰ï¼Œæ˜¾ç¤ºå–æµå¤±è´¥è¯´æ˜æœªæ¢å¤ï¼Œèƒ½æ­£å¸¸æ˜¾ç¤ºè§†é¢‘åˆ™åœ¨<code>ç¦»çº¿ç›‘æ§æ¸…å•</code>ä¸­åˆ é™¤å½“å‰ç‚¹ä½ã€‚<br>3.2 åœ¨è§†é¢‘è½¯ä»¶ä¸­ä»ä¸Šå¾€ä¸‹æŸ¥æ‰¾æœ‰ç¦»çº¿çš„ç›‘æ§ï¼Œæ‰¾åˆ°ç°è‰²çš„ç›‘æ§éœ€è¦åŒå‡»æŸ¥çœ‹æ˜¯å¦èƒ½è§‚çœ‹ï¼Œå–æµå¤±è´¥åˆ™å°†è¯¥ç›‘æ§æ·»åŠ åˆ°<code>ç¦»çº¿ç›‘æ§æ¸…å•</code>ä¸­ï¼ŒåŒæ—¶æ ‡è®°å¤§é˜Ÿã€æ•…éšœæ—¥æœŸå’Œæ‰€å±é«˜é€Ÿï¼ˆä¾¿äºåç»­ç»Ÿè®¡å„é«˜é€Ÿç¦»çº¿æ•°ï¼‰ã€‚<br>3.3 è¿›å…¥<code>[ä»Šæ—¥æ—¥æœŸ]è¿ç»´æ—¥æŠ¥è¡¨.xlsx</code>ä¸­çš„<code>ç›‘æ§</code>è¡¨ï¼Œæ ¹æ®<code>ç¦»çº¿ç›‘æ§æ¸…å•</code>ä¸­çš„æ•°æ®ç»Ÿè®¡æ¯æ¡é«˜é€Ÿçš„ç¦»çº¿æ•°é‡ï¼Œæˆ‘ä»¬åªéœ€è¦å¡«å†™æ‰€å±é“è·¯ä¸­çš„å½“æ—¥æ•…éšœæ•°è¿™ä¸€åˆ—ï¼Œå…¶ä½™éƒ½ç”±å…¬å¼è®¡ç®—å¾—åˆ°ã€‚</p></li><li><p>æ£€æŸ¥å¡å£ç›¸æœºç¦»çº¿æƒ…å†µï¼Œå®ŒæˆæŠ¥è¡¨ï¼ˆ15:30 å·¦å³åšï¼‰<br>5.1 å†æ¬¡æ“ä½œ<code>1.3-1.4</code>è¿™é‡Œéœ€è¦å°† ping å‡ºæ¥æœ‰ç¦»çº¿çš„ç»“æœå¯¹å¤±è´¥ç™¾åˆ†æ¯”é™åºæ’åˆ—ï¼Œç­‰åˆ°åªæœ‰ç¦»çº¿çš„ä¸ºçº¢ç‚¹æ—¶æˆªå›¾ï¼Œå¹¶æ”¾åˆ° word çš„<code>ä¸‰ã€é™„å›¾&gt;1.åœ¨çº¿ç‡å›¾ç‰‡ä¸­</code><br>5.2 è¿›å…¥<code>[ä»Šæ—¥æ—¥æœŸ]è¿ç»´æ—¥æŠ¥è¡¨.xlsx</code>ä¸­çš„<code>æ•…éšœç›¸æœº</code>è¡¨ï¼Œæ ¹æ®<code>æ­å·æ”¯é˜Ÿå·¡æ£€2.0.xlsx</code>ä¸­çš„æ•°æ®ï¼Œç§»é™¤<code>æ•…éšœç›¸æœºä¸­</code>ä»Šå¤©ä¿®å¥½äº†çš„ï¼Œå†æ·»åŠ ä¸­ä»Šå¤©æ–°å¢çš„ï¼Œ<code>å¤–åœºç»´ä¿®å°è´¦.xlsx</code>ä¸­ä¹Ÿè®¸å“Ÿå•Šå¯¹åº”ä¿®æ”¹<br>5.3 æ£€æŸ¥<code>[ä»Šæ—¥æ—¥æœŸ]è¿ç»´æ—¥æŠ¥è¡¨.xlsx</code>ï¼Œè¿›å…¥<code>å¡å£è¡¨</code>å°†å¡å£åœ¨çº¿ç‡ä½äº 95%å’Œå®Œå¥½ç‡ä½äº 98%çš„ç™¾åˆ†æ¯” å•å…ƒæ ¼æ ‡çº¢ï¼Œ<code>ç›‘æ§</code>è¡¨ä¹ŸæŒ‰ç…§ä¸Šè¿°çš„è§„åˆ™æ ‡çº¢ï¼Œ<code>æ•…éšœç›¸æœº</code>è¡¨æŠŠä»Šå¤©æ–°å¢çš„æ ‡é»„ï¼Œ<code>æ€»è¡¨</code>æ›´æ”¹ç¬¬äºŒè¡Œçš„æ—¶é—´ï¼ŒæŒ‰ç…§è§„åˆ™æ ‡çº¢ï¼Œ<code>Sheet1</code>è¡¨åªéœ€å¤åˆ¶è¡¨<code>æ•…éšœç›¸æœº</code>å’Œ<code>ç¦»çº¿ç›‘æ§æ¸…å•</code><br>5.4 æ‰“å¼€<code>[ä»Šæ—¥æ—¥æœŸ]è¿ç»´æ—¥æŠ¥è¡¨.word</code>ï¼Œæ›´æ”¹ç¬¬äºŒè¡Œçš„æ—¥æœŸï¼Œä¹‹åæ ¹æ®å†…å®¹ä»<code>[ä»Šæ—¥æ—¥æœŸ]è¿ç»´æ—¥æŠ¥è¡¨.xlsx</code>ä¸­å¤åˆ¶å¯¹åº”çš„å†…å®¹è¿‡å»ã€‚</p></li></ol>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Hello World</title>
      <link href="/2023/12/07/hello-world/"/>
      <url>/2023/12/07/hello-world/</url>
      
        <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
      
      
      
    </entry>
    
    
  
  
</search>
